import{r as c}from"./vendor-react-BuVtq312.js";import{k as n}from"./index-hzFfJlKH.js";function b(){const e=c.useRef(new Map),u=c.useCallback(async({item:s,itemName:i,itemType:t,onOptimisticDelete:m,onRestore:a,onConfirmDelete:p,delay:l=5e3})=>{const r=`${t}-${Date.now()}-${Math.random()}`;m();const $=n(`${t.charAt(0).toUpperCase()+t.slice(1)} "${i}" deleted`,{description:"Click undo to restore",duration:l,action:{label:"Undo",onClick:()=>{const o=e.current.get(r);o&&(clearTimeout(o.timeoutId),e.current.delete(r)),a(),n.success(`${t.charAt(0).toUpperCase()+t.slice(1)} restored`)}},onDismiss:()=>{}}),f=setTimeout(async()=>{e.current.delete(r);try{await p()}catch{a(),n.error(`Failed to delete ${t}. Item has been restored.`)}},l);return e.current.set(r,{toastId:$,timeoutId:f}),r},[]),d=c.useCallback(()=>{e.current.forEach(({timeoutId:s})=>{clearTimeout(s)}),e.current.clear()},[]);return{executeDelete:u,cancelAllPending:d}}export{b as u};
