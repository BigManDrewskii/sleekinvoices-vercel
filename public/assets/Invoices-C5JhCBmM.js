import{j as e,r as v}from"./vendor-react-BuVtq312.js";import{C as Gs,c as fe,B as E,k as m,T as ne,q as ae,r as oe,s as ie,S as ue,D as xs,e as ps,f as us,h as vs,o as Hs,I as ns,i as Ys,l as Ws,v as as,n as Xs,b as Js,u as Zs,w as et,t as T,p as st,G as tt,g as ct,j as nt}from"./index-hzFfJlKH.js";import{C as X}from"./checkbox-Cacebbmr.js";import{S as Le,a as Be,b as Ee,c as Fe,d as B}from"./select-BmfPitD4.js";import{T as hs,a as gs,b as ve,c as J,d as Is,e as j}from"./table-y7wtTQEZ.js";import{O as at,l as ot,aa as js,ab as it,ac as lt,a0 as rt,s as Me,y as $e,a7 as bs,d as ze,I as Re,q as os,m as fs,a2 as ys,ad as dt,ae as mt,af as xt,X as pt,ag as ut,a as vt,a8 as is,a9 as ht}from"./vendor-icons-CPPAmKDz.js";import{D as ls}from"./DeleteConfirmDialog-BLT6kY2H.js";import{S as h,a as he}from"./skeleton-QN8DVCY2.js";import{D as ks,a as Ns,b as Ss,c as S,d as ge,N as gt}from"./Navigation-DKoTJDrW.js";import{S as ws,a as w,P as It}from"./scrollable-table-wrapper-nwSnGFpJ.js";import{D as V,C as U}from"./typography-CdqW54LS.js";import{C as Ie}from"./CurrencySelector-CmxErqHw.js";import{u as jt,F as bt}from"./useTableSort-BKzs4CS_.js";import{u as ft}from"./useUrlFilters-CRX96KXw.js";import{u as yt}from"./useUndoableDelete-CCCtPilo.js";import{E as rs,a as ds}from"./EmptyState-B5hZ-p_K.js";import{L as kt}from"./label-DJDGx5UM.js";import{l as Nt,I as St,m as wt}from"./vendor-radix-DQBG9U-J.js";import{P as Dt}from"./PDFViewerModal-B9N2AWhL.js";import"./vendor-data-DopHG4T0.js";import"./alert-dialog-nKHsLnMc.js";import"./UserAvatar-DzPpP9tb.js";import"./vendor-date-B2OJh1lx.js";import"./popover-BWvbcDDZ.js";import"./tabs-Bgk-_Zyf.js";function Ct({rows:c=15}){return e.jsxs("div",{"data-loc":"client/src/components/skeletons/InvoiceListSkeleton.tsx:21",className:"rounded-lg border border-border overflow-hidden",children:[e.jsxs("div",{"data-loc":"client/src/components/skeletons/InvoiceListSkeleton.tsx:23",className:"grid grid-cols-[auto_minmax(100px,1fr)_minmax(120px,1fr)_100px_100px_100px_80px_80px_auto] gap-4 px-4 py-3 bg-muted/30 border-b border-border items-center",children:[e.jsx(h,{"data-loc":"client/src/components/skeletons/InvoiceListSkeleton.tsx:24",className:"h-4 w-4 rounded"}),e.jsx(h,{"data-loc":"client/src/components/skeletons/InvoiceListSkeleton.tsx:25",className:"h-4 w-20"}),e.jsx(h,{"data-loc":"client/src/components/skeletons/InvoiceListSkeleton.tsx:26",className:"h-4 w-16"}),e.jsx(h,{"data-loc":"client/src/components/skeletons/InvoiceListSkeleton.tsx:27",className:"h-4 w-20"}),e.jsx(h,{"data-loc":"client/src/components/skeletons/InvoiceListSkeleton.tsx:28",className:"h-4 w-20"}),e.jsx(h,{"data-loc":"client/src/components/skeletons/InvoiceListSkeleton.tsx:29",className:"h-4 w-16"}),e.jsx(h,{"data-loc":"client/src/components/skeletons/InvoiceListSkeleton.tsx:30",className:"h-4 w-16"}),e.jsx(h,{"data-loc":"client/src/components/skeletons/InvoiceListSkeleton.tsx:31",className:"h-4 w-14"}),e.jsx(h,{"data-loc":"client/src/components/skeletons/InvoiceListSkeleton.tsx:32",className:"h-4 w-8"})]}),e.jsx("div",{"data-loc":"client/src/components/skeletons/InvoiceListSkeleton.tsx:36",className:"divide-y divide-border",children:Array.from({length:c}).map((o,n)=>e.jsxs("div",{"data-loc":"client/src/components/skeletons/InvoiceListSkeleton.tsx:38",className:"grid grid-cols-[auto_minmax(100px,1fr)_minmax(120px,1fr)_100px_100px_100px_80px_80px_auto] gap-4 px-4 py-4 items-center",children:[e.jsx(h,{"data-loc":"client/src/components/skeletons/InvoiceListSkeleton.tsx:43",className:"h-4 w-4 rounded"}),e.jsx(h,{"data-loc":"client/src/components/skeletons/InvoiceListSkeleton.tsx:45",className:"h-4 w-24"}),e.jsx(h,{"data-loc":"client/src/components/skeletons/InvoiceListSkeleton.tsx:47",className:"h-4 w-32"}),e.jsx(h,{"data-loc":"client/src/components/skeletons/InvoiceListSkeleton.tsx:49",className:"h-4 w-20"}),e.jsx(h,{"data-loc":"client/src/components/skeletons/InvoiceListSkeleton.tsx:51",className:"h-4 w-20"}),e.jsx(h,{"data-loc":"client/src/components/skeletons/InvoiceListSkeleton.tsx:53",className:"h-4 w-20"}),e.jsx(he,{"data-loc":"client/src/components/skeletons/InvoiceListSkeleton.tsx:55"}),e.jsx(he,{"data-loc":"client/src/components/skeletons/InvoiceListSkeleton.tsx:57"}),e.jsx(h,{"data-loc":"client/src/components/skeletons/InvoiceListSkeleton.tsx:59",className:"h-8 w-8 rounded-lg"})]},n))})]})}function Tt(){return e.jsx(Gs,{"data-loc":"client/src/components/skeletons/InvoiceListSkeleton.tsx:72",className:"p-4",children:e.jsxs("div",{"data-loc":"client/src/components/skeletons/InvoiceListSkeleton.tsx:73",className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{"data-loc":"client/src/components/skeletons/InvoiceListSkeleton.tsx:74",className:"space-y-3 flex-1",children:[e.jsxs("div",{"data-loc":"client/src/components/skeletons/InvoiceListSkeleton.tsx:75",className:"flex items-center gap-3",children:[e.jsx(h,{"data-loc":"client/src/components/skeletons/InvoiceListSkeleton.tsx:76",className:"h-5 w-24"}),e.jsx(he,{"data-loc":"client/src/components/skeletons/InvoiceListSkeleton.tsx:77"})]}),e.jsx(h,{"data-loc":"client/src/components/skeletons/InvoiceListSkeleton.tsx:79",className:"h-4 w-40"}),e.jsxs("div",{"data-loc":"client/src/components/skeletons/InvoiceListSkeleton.tsx:80",className:"flex items-center gap-4",children:[e.jsx(h,{"data-loc":"client/src/components/skeletons/InvoiceListSkeleton.tsx:81",className:"h-3 w-24"}),e.jsx(h,{"data-loc":"client/src/components/skeletons/InvoiceListSkeleton.tsx:82",className:"h-3 w-24"})]})]}),e.jsxs("div",{"data-loc":"client/src/components/skeletons/InvoiceListSkeleton.tsx:85",className:"text-right space-y-2",children:[e.jsx(h,{"data-loc":"client/src/components/skeletons/InvoiceListSkeleton.tsx:86",className:"h-6 w-20 ml-auto"}),e.jsx(he,{"data-loc":"client/src/components/skeletons/InvoiceListSkeleton.tsx:87",className:"ml-auto"})]})]})})}function At({rows:c=15}){return e.jsxs(e.Fragment,{children:[e.jsx("div",{"data-loc":"client/src/components/skeletons/InvoiceListSkeleton.tsx:101",className:"hidden md:block",children:e.jsx(Ct,{"data-loc":"client/src/components/skeletons/InvoiceListSkeleton.tsx:102",rows:c})}),e.jsx("div",{"data-loc":"client/src/components/skeletons/InvoiceListSkeleton.tsx:106",className:"md:hidden space-y-3",children:Array.from({length:Math.min(c,8)}).map((o,n)=>e.jsx(Tt,{"data-loc":"client/src/components/skeletons/InvoiceListSkeleton.tsx:108"},n))})]})}function Z({status:c,className:o}){const n={unpaid:{label:"Unpaid",bgClass:"bg-destructive/10",textClass:"text-destructive",icon:js},partial:{label:"Partial",bgClass:"bg-yellow-500/10",textClass:"text-yellow-400",icon:ot},paid:{label:"Paid",bgClass:"bg-green-500/10",textClass:"text-green-400",icon:at}},{label:l,bgClass:p,textClass:k,icon:i}=n[c];return e.jsxs("span",{"data-loc":"client/src/components/shared/PaymentStatusBadge.tsx:37",className:fe("inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium",p,k,o),children:[e.jsx(i,{"data-loc":"client/src/components/shared/PaymentStatusBadge.tsx:45",className:"w-3 h-3"}),l]})}function je({invoiceId:c,invoiceNumber:o,hasPaymentLink:n,onView:l,onEdit:p,onDownloadPDF:k,onViewPDF:i,onSendEmail:b,onCreatePaymentLink:u,onDelete:D,onDuplicate:A,onSyncToQuickBooks:F,quickBooksConnected:C=!1,quickBooksSynced:P=!1,isLoading:f={}}){const $=()=>{navigator.clipboard.writeText(o),m.success("Invoice number copied to clipboard")};return e.jsxs(ks,{"data-loc":"client/src/components/invoices/InvoiceActionsMenu.tsx:72",children:[e.jsx(Ns,{"data-loc":"client/src/components/invoices/InvoiceActionsMenu.tsx:73",asChild:!0,children:e.jsx(E,{"data-loc":"client/src/components/invoices/InvoiceActionsMenu.tsx:74",variant:"ghost",size:"sm",className:"h-8 w-8 p-0","aria-label":`Actions for invoice ${o}`,children:e.jsx(it,{"data-loc":"client/src/components/invoices/InvoiceActionsMenu.tsx:80",className:"h-4 w-4"})})}),e.jsxs(Ss,{"data-loc":"client/src/components/invoices/InvoiceActionsMenu.tsx:83",align:"end",className:"w-56",children:[e.jsxs(S,{"data-loc":"client/src/components/invoices/InvoiceActionsMenu.tsx:84",onClick:l,className:"cursor-pointer",children:[e.jsx(lt,{"data-loc":"client/src/components/invoices/InvoiceActionsMenu.tsx:85",className:"mr-2 h-4 w-4"}),e.jsx("span",{"data-loc":"client/src/components/invoices/InvoiceActionsMenu.tsx:86",children:"View Invoice"})]}),e.jsxs(S,{"data-loc":"client/src/components/invoices/InvoiceActionsMenu.tsx:88",onClick:p,className:"cursor-pointer",children:[e.jsx(rt,{"data-loc":"client/src/components/invoices/InvoiceActionsMenu.tsx:89",className:"mr-2 h-4 w-4"}),e.jsx("span",{"data-loc":"client/src/components/invoices/InvoiceActionsMenu.tsx:90",children:"Edit Invoice"})]}),e.jsxs(S,{"data-loc":"client/src/components/invoices/InvoiceActionsMenu.tsx:92",onClick:$,className:"cursor-pointer",children:[e.jsx(Me,{"data-loc":"client/src/components/invoices/InvoiceActionsMenu.tsx:96",className:"mr-2 h-4 w-4"}),e.jsx("span",{"data-loc":"client/src/components/invoices/InvoiceActionsMenu.tsx:97",children:"Copy Invoice #"})]}),e.jsxs(S,{"data-loc":"client/src/components/invoices/InvoiceActionsMenu.tsx:99",onClick:A,disabled:f.duplicate,className:"cursor-pointer",children:[e.jsx($e,{"data-loc":"client/src/components/invoices/InvoiceActionsMenu.tsx:104",className:"mr-2 h-4 w-4"}),e.jsx("span",{"data-loc":"client/src/components/invoices/InvoiceActionsMenu.tsx:105",children:"Duplicate Invoice"})]}),e.jsx(ge,{"data-loc":"client/src/components/invoices/InvoiceActionsMenu.tsx:108"}),e.jsxs(S,{"data-loc":"client/src/components/invoices/InvoiceActionsMenu.tsx:110",onClick:k,disabled:f.pdf,className:"cursor-pointer",children:[e.jsx(bs,{"data-loc":"client/src/components/invoices/InvoiceActionsMenu.tsx:115",className:"mr-2 h-4 w-4"}),e.jsx("span",{"data-loc":"client/src/components/invoices/InvoiceActionsMenu.tsx:116",children:"Download PDF"})]}),i&&e.jsxs(S,{"data-loc":"client/src/components/invoices/InvoiceActionsMenu.tsx:119",onClick:i,disabled:f.pdf,className:"cursor-pointer",children:[e.jsx(ze,{"data-loc":"client/src/components/invoices/InvoiceActionsMenu.tsx:124",className:"mr-2 h-4 w-4"}),e.jsx("span",{"data-loc":"client/src/components/invoices/InvoiceActionsMenu.tsx:125",children:"View PDF"})]}),e.jsxs(S,{"data-loc":"client/src/components/invoices/InvoiceActionsMenu.tsx:128",onClick:b,disabled:f.email,className:"cursor-pointer",children:[e.jsx(Re,{"data-loc":"client/src/components/invoices/InvoiceActionsMenu.tsx:133",className:"mr-2 h-4 w-4"}),e.jsx("span",{"data-loc":"client/src/components/invoices/InvoiceActionsMenu.tsx:134",children:"Send Email"})]}),!n&&e.jsxs(S,{"data-loc":"client/src/components/invoices/InvoiceActionsMenu.tsx:137",onClick:u,disabled:f.paymentLink,className:"cursor-pointer",children:[e.jsx(Me,{"data-loc":"client/src/components/invoices/InvoiceActionsMenu.tsx:142",className:"mr-2 h-4 w-4"}),e.jsx("span",{"data-loc":"client/src/components/invoices/InvoiceActionsMenu.tsx:143",children:"Create Payment Link"})]}),C&&F&&e.jsxs(S,{"data-loc":"client/src/components/invoices/InvoiceActionsMenu.tsx:147",onClick:F,disabled:f.quickBooksSync,className:"cursor-pointer",children:[f.quickBooksSync?e.jsx(os,{"data-loc":"client/src/components/invoices/InvoiceActionsMenu.tsx:153",className:"mr-2 h-4 w-4 animate-spin"}):P?e.jsx(fs,{"data-loc":"client/src/components/invoices/InvoiceActionsMenu.tsx:155",className:"mr-2 h-4 w-4 text-green-500"}):e.jsx(os,{"data-loc":"client/src/components/invoices/InvoiceActionsMenu.tsx:157",className:"mr-2 h-4 w-4"}),e.jsx("span",{"data-loc":"client/src/components/invoices/InvoiceActionsMenu.tsx:159",children:P?"Re-sync to QuickBooks":"Sync to QuickBooks"})]}),e.jsx(ge,{"data-loc":"client/src/components/invoices/InvoiceActionsMenu.tsx:167"}),e.jsxs(S,{"data-loc":"client/src/components/invoices/InvoiceActionsMenu.tsx:169",onClick:D,disabled:f.delete,className:"cursor-pointer text-destructive focus:text-destructive focus:bg-destructive/10",children:[e.jsx(ys,{"data-loc":"client/src/components/invoices/InvoiceActionsMenu.tsx:174",className:"mr-2 h-4 w-4"}),e.jsx("span",{"data-loc":"client/src/components/invoices/InvoiceActionsMenu.tsx:175",children:"Delete Invoice"})]})]})]})}function be({invoiceNumber:c,maxLength:o=20}){const n=c.length>o,l=n?`${c.substring(0,o)}...`:c,p=()=>{navigator.clipboard.writeText(c),m.success("Invoice number copied to clipboard")};return n?e.jsx(ne,{"data-loc":"client/src/components/invoices/InvoiceNumberCell.tsx:48",children:e.jsxs(ae,{"data-loc":"client/src/components/invoices/InvoiceNumberCell.tsx:49",children:[e.jsx(oe,{"data-loc":"client/src/components/invoices/InvoiceNumberCell.tsx:50",asChild:!0,children:e.jsxs("div",{"data-loc":"client/src/components/invoices/InvoiceNumberCell.tsx:51",className:"flex items-center gap-2 cursor-help",children:[e.jsx("span",{"data-loc":"client/src/components/invoices/InvoiceNumberCell.tsx:52",className:"font-numeric-bold text-muted-foreground",children:l}),e.jsx(E,{"data-loc":"client/src/components/invoices/InvoiceNumberCell.tsx:55",variant:"ghost",size:"sm",className:"h-6 w-6 p-0 opacity-0 group-hover:opacity-100 transition-opacity",onClick:p,"aria-label":"Copy invoice number",children:e.jsx($e,{"data-loc":"client/src/components/invoices/InvoiceNumberCell.tsx:62",className:"h-3 w-3"})})]})}),e.jsx(ie,{"data-loc":"client/src/components/invoices/InvoiceNumberCell.tsx:66",children:e.jsx("p",{"data-loc":"client/src/components/invoices/InvoiceNumberCell.tsx:67",className:"font-numeric text-sm",children:c})})]})}):e.jsxs("div",{"data-loc":"client/src/components/invoices/InvoiceNumberCell.tsx:32",className:"flex items-center gap-2",children:[e.jsx("span",{"data-loc":"client/src/components/invoices/InvoiceNumberCell.tsx:33",className:"font-numeric-bold",children:c}),e.jsx(E,{"data-loc":"client/src/components/invoices/InvoiceNumberCell.tsx:34",variant:"ghost",size:"sm",className:"h-6 w-6 p-0 opacity-0 group-hover:opacity-100 transition-opacity",onClick:p,"aria-label":"Copy invoice number",children:e.jsx($e,{"data-loc":"client/src/components/invoices/InvoiceNumberCell.tsx:41",className:"h-3 w-3"})})]})}function Pt({selectedIds:c,clearSelection:o,handleBulkSendEmail:n,handleBulkCreatePaymentLinks:l,handleBulkUpdateStatus:p,setBulkDeleteDialogOpen:k,bulkSendEmail:i,bulkCreatePaymentLinks:b,bulkUpdateStatus:u}){return e.jsx(e.Fragment,{children:c.size>0&&e.jsxs("div",{"data-loc":"client/src/components/invoices/InvoiceBulkActionsBar.tsx:48",className:"mb-4 p-4 bg-gradient-to-r from-primary/10 to-primary/5 border border-primary/20 rounded-2xl flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 backdrop-blur-sm",children:[e.jsxs("div",{"data-loc":"client/src/components/invoices/InvoiceBulkActionsBar.tsx:49",className:"flex items-center gap-2",children:[e.jsx(dt,{"data-loc":"client/src/components/invoices/InvoiceBulkActionsBar.tsx:50",className:"h-4 w-4 text-primary"}),e.jsxs("span",{"data-loc":"client/src/components/invoices/InvoiceBulkActionsBar.tsx:51",className:"text-sm font-medium",children:[c.size," invoice",c.size!==1?"s":""," ","selected"]})]}),e.jsxs("div",{"data-loc":"client/src/components/invoices/InvoiceBulkActionsBar.tsx:56",className:"flex items-center gap-2",children:[e.jsxs(E,{"data-loc":"client/src/components/invoices/InvoiceBulkActionsBar.tsx:57",variant:"outline",size:"sm",onClick:o,children:[e.jsx(mt,{"data-loc":"client/src/components/invoices/InvoiceBulkActionsBar.tsx:58",className:"h-4 w-4 mr-1"}),"Clear"]}),e.jsxs(ks,{"data-loc":"client/src/components/invoices/InvoiceBulkActionsBar.tsx:61",children:[e.jsx(Ns,{"data-loc":"client/src/components/invoices/InvoiceBulkActionsBar.tsx:62",asChild:!0,children:e.jsxs(E,{"data-loc":"client/src/components/invoices/InvoiceBulkActionsBar.tsx:63",variant:"outline",size:"sm",children:["Bulk Actions",e.jsx(xt,{"data-loc":"client/src/components/invoices/InvoiceBulkActionsBar.tsx:65",className:"h-4 w-4 ml-1"})]})}),e.jsxs(Ss,{"data-loc":"client/src/components/invoices/InvoiceBulkActionsBar.tsx:68",align:"end",className:"w-56",children:[e.jsxs(S,{"data-loc":"client/src/components/invoices/InvoiceBulkActionsBar.tsx:69",onClick:()=>n(),disabled:i.isPending,children:[e.jsx(Re,{"data-loc":"client/src/components/invoices/InvoiceBulkActionsBar.tsx:73",className:"h-4 w-4 mr-2"}),"Send Emails"]}),e.jsxs(S,{"data-loc":"client/src/components/invoices/InvoiceBulkActionsBar.tsx:76",onClick:()=>l(),disabled:b.isPending,children:[e.jsx(Me,{"data-loc":"client/src/components/invoices/InvoiceBulkActionsBar.tsx:80",className:"h-4 w-4 mr-2"}),"Create Payment Links"]}),e.jsx(ge,{"data-loc":"client/src/components/invoices/InvoiceBulkActionsBar.tsx:83"}),e.jsxs(S,{"data-loc":"client/src/components/invoices/InvoiceBulkActionsBar.tsx:84",onClick:()=>p("sent"),disabled:u.isPending,children:[e.jsx(Re,{"data-loc":"client/src/components/invoices/InvoiceBulkActionsBar.tsx:88",className:"h-4 w-4 mr-2"}),"Mark as Sent"]}),e.jsxs(S,{"data-loc":"client/src/components/invoices/InvoiceBulkActionsBar.tsx:91",onClick:()=>p("paid"),disabled:u.isPending,children:[e.jsx(fs,{"data-loc":"client/src/components/invoices/InvoiceBulkActionsBar.tsx:95",className:"h-4 w-4 mr-2"}),"Mark as Paid"]}),e.jsxs(S,{"data-loc":"client/src/components/invoices/InvoiceBulkActionsBar.tsx:98",onClick:()=>p("draft"),disabled:u.isPending,children:[e.jsx(ze,{"data-loc":"client/src/components/invoices/InvoiceBulkActionsBar.tsx:102",className:"h-4 w-4 mr-2"}),"Mark as Draft"]}),e.jsx(ge,{"data-loc":"client/src/components/invoices/InvoiceBulkActionsBar.tsx:105"}),e.jsxs(S,{"data-loc":"client/src/components/invoices/InvoiceBulkActionsBar.tsx:106",onClick:()=>k(!0),className:"text-destructive focus:text-destructive",children:[e.jsx(ys,{"data-loc":"client/src/components/invoices/InvoiceBulkActionsBar.tsx:110",className:"h-4 w-4 mr-2"}),"Delete Selected"]})]})]})]})]})})}function Lt({invoices:c,selectedIds:o,allCurrentPageSelected:n,someCurrentPageSelected:l,toggleSelectAll:p,toggleSelect:k,sort:i,handleSort:b,totalItems:u,qbStatus:D,onView:A,onEdit:F,onDelete:C,onDuplicate:P,onDownloadPDF:f,onSendEmail:$,onCreatePaymentLink:N,isLoading:r={},syncingInvoiceId:R}){return c?e.jsxs("div",{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:100",className:"rounded-2xl bg-gradient-to-br from-card to-card/80 border border-border/50 backdrop-blur-sm overflow-hidden",children:[e.jsxs("div",{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:101",className:"p-5 pb-4",children:[e.jsx("h3",{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:102",className:"text-lg font-semibold text-foreground",children:"All Invoices"}),e.jsxs("p",{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:103",className:"text-sm text-muted-foreground",children:[e.jsx("span",{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:104",className:"font-numeric",children:u})," invoice",u!==1?"s":""," found"]})]}),e.jsxs("div",{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:108",className:"px-5 pb-5",children:[e.jsx(ws,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:110",minWidth:900,className:"hidden md:block",children:e.jsxs(hs,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:111",children:[e.jsx(gs,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:112",children:e.jsxs(ve,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:113",children:[e.jsx(J,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:114",className:"w-[40px]",children:e.jsx(X,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:115",checked:n,onCheckedChange:p,"aria-label":"Select all invoices on this page",className:l&&!n?"data-[state=checked]:bg-primary/50":""})}),e.jsx(w,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:126",label:"Invoice #",sortKey:"invoiceNumber",currentSort:i,onSort:b}),e.jsx(w,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:132",label:"Client",sortKey:"client.name",currentSort:i,onSort:b}),e.jsx(w,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:138",label:"Issue Date",sortKey:"issueDate",currentSort:i,onSort:b}),e.jsx(w,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:144",label:"Due Date",sortKey:"dueDate",currentSort:i,onSort:b}),e.jsx(w,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:150",label:"Amount",sortKey:"total",currentSort:i,onSort:b}),e.jsx(w,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:156",label:"Payment",sortKey:"paymentStatus",currentSort:i,onSort:b}),e.jsx(w,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:162",label:"Status",sortKey:"status",currentSort:i,onSort:b}),D?.connected&&e.jsx(J,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:169",className:"w-[60px] text-center",children:"QB"}),e.jsx(J,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:171",className:"text-right",children:"Actions"})]})}),e.jsx(Is,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:174",children:c.map(t=>e.jsxs(ve,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:176",className:`group ${o.has(t.id)?"bg-primary/5":""}`,children:[e.jsx(j,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:180",children:e.jsx(X,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:181",checked:o.has(t.id),onCheckedChange:()=>k(t.id),"aria-label":`Select invoice ${t.invoiceNumber}`})}),e.jsx(j,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:187",children:e.jsx(be,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:188",invoiceNumber:t.invoiceNumber})}),e.jsx(j,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:190",children:t.client.name}),e.jsx(j,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:191",children:e.jsx(V,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:192",date:t.issueDate,format:"short"})}),e.jsx(j,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:194",children:e.jsx(V,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:195",date:t.dueDate,format:"short"})}),e.jsx(j,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:197",className:"font-semibold",children:e.jsxs("div",{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:198",className:"space-y-1",children:[e.jsxs("div",{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:199",className:"flex items-center gap-2",children:[e.jsx(U,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:200",amount:t.total,currency:t.currency}),t.currency&&t.currency!=="USD"&&e.jsx(Ie,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:205",code:t.currency})]}),t.paymentStatus&&t.paymentStatus!=="unpaid"&&e.jsxs("div",{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:210",className:"text-xs text-muted-foreground",children:["Paid: ",e.jsx(U,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:211",amount:t.totalPaid||"0"})]})]})}),e.jsx(j,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:216",children:t.paymentStatus?e.jsx(Z,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:218",status:t.paymentStatus}):e.jsx(Z,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:220",status:"unpaid"})}),e.jsx(j,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:223",children:e.jsx(ue,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:224",status:t.status})}),D?.connected&&e.jsx(j,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:227",className:"text-center",children:e.jsx(ne,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:228",children:e.jsxs(ae,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:229",children:[e.jsx(oe,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:230",asChild:!0,children:e.jsx("div",{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:231",className:"flex justify-center",children:t.quickbooks?.synced?e.jsx("div",{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:233",className:"w-6 h-6 rounded-full bg-emerald-500/10 flex items-center justify-center",children:e.jsx("svg",{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:234",className:"w-3 h-3 text-emerald-500",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:239",d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})})}):e.jsx("div",{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:243",className:"w-6 h-6 rounded-full bg-muted/50 flex items-center justify-center",children:e.jsx("div",{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:244",className:"w-2 h-2 rounded-full bg-muted-foreground/30"})})})}),e.jsx(ie,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:249",side:"top",children:e.jsxs("span",{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:250",className:"text-xs",children:[t.quickbooks?.synced&&e.jsx("div",{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:252",className:"font-medium",children:"Synced to QuickBooks"}),t.quickbooks?.lastSyncedAt&&e.jsx("div",{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:257",className:"text-muted-foreground",children:new Date(t.quickbooks.lastSyncedAt).toLocaleString()})]})})]})})}),e.jsx(j,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:269",className:"text-right",children:e.jsx(je,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:270",invoiceId:t.id,invoiceNumber:t.invoiceNumber,hasPaymentLink:!!t.paymentLink,onView:()=>A(t),onEdit:()=>F(t),onDownloadPDF:()=>f(t),onSendEmail:()=>$(t),onCreatePaymentLink:()=>N(t),onDelete:()=>C(t),onDuplicate:()=>P(t),quickBooksConnected:D?.connected||!1,isLoading:{pdf:r.pdf,email:r.email,paymentLink:r.paymentLink,duplicate:r.duplicate,quickBooksSync:R===t.id}})})]},t.id))})]})}),e.jsx("div",{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:298",className:"md:hidden px-5 pb-5 space-y-4",children:c.map(t=>e.jsxs("div",{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:300",className:`border rounded-lg p-4 space-y-3 ${o.has(t.id)?"border-primary bg-primary/5":""}`,children:[e.jsxs("div",{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:304",className:"flex items-start justify-between",children:[e.jsxs("div",{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:305",className:"flex items-start gap-3",children:[e.jsx(X,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:306",checked:o.has(t.id),onCheckedChange:()=>k(t.id),"aria-label":`Select invoice ${t.invoiceNumber}`,className:"mt-1"}),e.jsxs("div",{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:312",children:[e.jsx(be,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:313",invoiceNumber:t.invoiceNumber}),e.jsx("p",{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:314",className:"text-sm text-muted-foreground",children:t.client.name})]})]}),e.jsx(je,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:319",invoiceId:t.id,invoiceNumber:t.invoiceNumber,hasPaymentLink:!!t.paymentLink,onView:()=>A(t),onEdit:()=>F(t),onDownloadPDF:()=>f(t),onSendEmail:()=>$(t),onCreatePaymentLink:()=>N(t),onDelete:()=>C(t),onDuplicate:()=>P(t),quickBooksConnected:D?.connected||!1,isLoading:{pdf:r.pdf,email:r.email,paymentLink:r.paymentLink,duplicate:r.duplicate,quickBooksSync:R===t.id}})]}),e.jsxs("div",{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:340",className:"flex items-center justify-between",children:[e.jsxs("div",{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:341",className:"flex items-center gap-2",children:[e.jsx(ue,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:342",status:t.status}),e.jsx(Z,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:343",status:t.paymentStatus||"unpaid"}),D?.connected&&t.quickbooks?.synced&&e.jsx(ne,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:347",children:e.jsxs(ae,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:348",children:[e.jsx(oe,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:349",asChild:!0,children:e.jsx("div",{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:350",className:"w-5 h-5 rounded-full bg-emerald-500/10 flex items-center justify-center",children:e.jsx("svg",{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:351",className:"w-3 h-3 text-emerald-500",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:356",d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})})})}),e.jsx(ie,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:360",side:"top",children:e.jsx("span",{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:361",className:"text-xs",children:"Synced to QuickBooks"})})]})})]}),e.jsxs("div",{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:367",className:"text-right",children:[e.jsxs("p",{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:368",className:"font-semibold flex items-center gap-1 justify-end",children:[e.jsx(U,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:369",amount:t.total,currency:t.currency}),t.currency&&t.currency!=="USD"&&e.jsx(Ie,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:374",code:t.currency})]}),t.paymentStatus&&t.paymentStatus!=="unpaid"&&e.jsxs("p",{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:379",className:"text-xs text-muted-foreground",children:["Paid: ",e.jsx(U,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:380",amount:t.totalPaid||"0"})]})]})]}),e.jsxs("div",{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:385",className:"flex justify-between text-xs text-muted-foreground pt-2 border-t",children:[e.jsxs("span",{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:386",children:["Issued:"," ",e.jsx(V,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:388",date:t.issueDate,format:"short"})]}),e.jsxs("span",{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:390",children:["Due: ",e.jsx(V,{"data-loc":"client/src/components/invoices/InvoiceTable.tsx:391",date:t.dueDate,format:"short"})]})]})]},t.id))})]})]}):null}function Bt({field:c,value:o,onChange:n}){return c.type==="select"?e.jsxs("div",{"data-loc":"client/src/components/ui/filter-modal.tsx:50",className:"space-y-2",children:[e.jsx("label",{"data-loc":"client/src/components/ui/filter-modal.tsx:51",htmlFor:c.key,className:"text-xs font-medium text-muted-foreground block ml-0.5",children:c.label}),e.jsxs(Le,{"data-loc":"client/src/components/ui/filter-modal.tsx:57",value:o,onValueChange:l=>n(c.key,l),children:[e.jsx(Be,{"data-loc":"client/src/components/ui/filter-modal.tsx:58",id:c.key,children:e.jsx(Ee,{"data-loc":"client/src/components/ui/filter-modal.tsx:59",placeholder:c.placeholder})}),e.jsx(Fe,{"data-loc":"client/src/components/ui/filter-modal.tsx:61",children:c.options?.map(l=>e.jsx(B,{"data-loc":"client/src/components/ui/filter-modal.tsx:63",value:l.value,children:l.label},l.value))})]})]}):c.type==="number"?e.jsxs("div",{"data-loc":"client/src/components/ui/filter-modal.tsx:75",className:"space-y-2",children:[e.jsx("label",{"data-loc":"client/src/components/ui/filter-modal.tsx:76",htmlFor:c.key,className:"text-xs font-medium text-muted-foreground block ml-0.5",children:c.label}),e.jsx(ns,{"data-loc":"client/src/components/ui/filter-modal.tsx:82",id:c.key,type:"number",placeholder:c.placeholder,value:o,onChange:l=>n(c.key,l.target.value),className:"h-10"})]}):e.jsxs("div",{"data-loc":"client/src/components/ui/filter-modal.tsx:95",className:"space-y-2",children:[e.jsx("label",{"data-loc":"client/src/components/ui/filter-modal.tsx:96",htmlFor:c.key,className:"text-xs font-medium text-muted-foreground block ml-0.5",children:c.label}),e.jsx(ns,{"data-loc":"client/src/components/ui/filter-modal.tsx:102",id:c.key,type:"text",placeholder:c.placeholder,value:o,onChange:l=>n(c.key,l.target.value),className:"h-10"})]})}function Et({open:c,onOpenChange:o,title:n="Filters",fields:l,values:p,onChange:k,onClear:i}){const b=v.useCallback(()=>{i()},[i]);return e.jsx(xs,{"data-loc":"client/src/components/ui/filter-modal.tsx:128",open:c,onOpenChange:o,children:e.jsxs(ps,{"data-loc":"client/src/components/ui/filter-modal.tsx:129",className:"max-w-lg",children:[e.jsx(us,{"data-loc":"client/src/components/ui/filter-modal.tsx:130",className:"pb-4",children:e.jsx(vs,{"data-loc":"client/src/components/ui/filter-modal.tsx:131",className:"text-xl flex items-center gap-3",children:e.jsx("span",{"data-loc":"client/src/components/ui/filter-modal.tsx:132",children:n})})}),e.jsx("div",{"data-loc":"client/src/components/ui/filter-modal.tsx:136",className:"grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-5 py-2 max-h-[60vh] overflow-y-auto",children:l.map(u=>e.jsx("div",{"data-loc":"client/src/components/ui/filter-modal.tsx:138",className:fe(u.type==="text"?"sm:col-span-2":""),children:e.jsx(Bt,{"data-loc":"client/src/components/ui/filter-modal.tsx:142",field:u,value:p[u.key]??"",onChange:k})},u.key))}),e.jsxs(Hs,{"data-loc":"client/src/components/ui/filter-modal.tsx:151",className:"flex-row justify-end gap-3 pt-6 px-0 border-t",children:[e.jsxs(E,{"data-loc":"client/src/components/ui/filter-modal.tsx:152",variant:"outline",onClick:b,children:[e.jsx(pt,{"data-loc":"client/src/components/ui/filter-modal.tsx:153",className:"h-4 w-4 mr-2"}),"Clear All"]}),e.jsx(E,{"data-loc":"client/src/components/ui/filter-modal.tsx:156",onClick:()=>o(!1),children:"Apply Filters"})]})]})})}function Ft({className:c,...o}){return e.jsx(Nt,{"data-loc":"client/src/components/ui/radio-group.tsx:12","data-slot":"radio-group",className:fe("grid gap-3",c),...o})}function ms({className:c,...o}){return e.jsx(St,{"data-loc":"client/src/components/ui/radio-group.tsx:25","data-slot":"radio-group-item",className:fe("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",c),...o,children:e.jsx(wt,{"data-loc":"client/src/components/ui/radio-group.tsx:33","data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:e.jsx(js,{"data-loc":"client/src/components/ui/radio-group.tsx:37",className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}function Mt({open:c,onOpenChange:o,invoices:n,onExportPDF:l}){const[p,k]=v.useState("csv"),[i,b]=v.useState(!1),u=n.reduce((N,r)=>N+parseFloat(r.total||"0"),0),D=n.reduce((N,r)=>N+parseFloat(r.totalPaid||"0"),0),A=u-D,F=n.filter(N=>N.paymentStatus==="paid").length,C=n[0]?.currency||"USD",P=()=>{if(n.length===0)return;const N=["Invoice Number","Client Name","Client Email","Status","Payment Status","Issue Date","Due Date","Total Amount","Amount Paid","Amount Due","Currency"],r=n.map(x=>[x.invoiceNumber,x.client.name,x.client.email||"",x.status,x.paymentStatus||"unpaid",new Date(x.issueDate).toLocaleDateString(),new Date(x.dueDate).toLocaleDateString(),parseFloat(x.total?.toString()||"0").toFixed(2),parseFloat(x.totalPaid?.toString()||"0").toFixed(2),parseFloat(x.amountDue?.toString()||x.total?.toString()||"0").toFixed(2),x.currency||"USD"]);r.push([]),r.push(["SUMMARY","","","","","","","","","",""]),r.push(["Total Invoices",n.length.toString(),"","","","","","","","",""]),r.push(["Total Amount","","","","","","",u.toFixed(2),"","",C]),r.push(["Total Paid","","","","","","","",D.toFixed(2),"",C]),r.push(["Outstanding","","","","","","","","",A.toFixed(2),C]);const R=[N.map(x=>`"${x}"`).join(","),...r.map(x=>x.map(M=>`"${String(M).replace(/"/g,'""')}"`).join(","))].join(`
`),t=new Blob([R],{type:"text/csv;charset=utf-8;"}),_=URL.createObjectURL(t),O=document.createElement("a");O.href=_,O.download=`sleek-invoices-export-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(O),O.click(),document.body.removeChild(O),URL.revokeObjectURL(_)},f=async()=>{if(n.length===0)return;const N=$t(n,{totalAmount:u,paidAmount:D,outstandingAmount:A,currency:C}),r=window.open("","_blank");r&&(r.document.write(N),r.document.close(),setTimeout(()=>{r.print()},500))},$=async()=>{b(!0);try{p==="csv"?P():await f(),o(!1)}finally{b(!1)}};return e.jsx(xs,{"data-loc":"client/src/components/InvoiceExportDialog.tsx:213",open:c,onOpenChange:o,children:e.jsxs(ps,{"data-loc":"client/src/components/InvoiceExportDialog.tsx:214",className:"sm:max-w-[500px]",children:[e.jsxs(us,{"data-loc":"client/src/components/InvoiceExportDialog.tsx:215",children:[e.jsx(vs,{"data-loc":"client/src/components/InvoiceExportDialog.tsx:216",children:"Export Invoices"}),e.jsxs(Ys,{"data-loc":"client/src/components/InvoiceExportDialog.tsx:217",children:["Export ",n.length," invoice",n.length!==1?"s":""," ","with current filters applied."]})]}),e.jsxs(Ws,{"data-loc":"client/src/components/InvoiceExportDialog.tsx:223",spacing:"relaxed",children:[e.jsxs("div",{"data-loc":"client/src/components/InvoiceExportDialog.tsx:225",className:"rounded-lg border p-4 bg-muted/50",children:[e.jsx("p",{"data-loc":"client/src/components/InvoiceExportDialog.tsx:226",className:"text-sm font-medium mb-3",children:"Export Summary"}),e.jsxs("div",{"data-loc":"client/src/components/InvoiceExportDialog.tsx:227",className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{"data-loc":"client/src/components/InvoiceExportDialog.tsx:228",children:[e.jsx("p",{"data-loc":"client/src/components/InvoiceExportDialog.tsx:229",className:"text-muted-foreground",children:"Total Invoices"}),e.jsx("p",{"data-loc":"client/src/components/InvoiceExportDialog.tsx:230",className:"font-semibold",children:n.length})]}),e.jsxs("div",{"data-loc":"client/src/components/InvoiceExportDialog.tsx:232",children:[e.jsx("p",{"data-loc":"client/src/components/InvoiceExportDialog.tsx:233",className:"text-muted-foreground",children:"Paid Invoices"}),e.jsx("p",{"data-loc":"client/src/components/InvoiceExportDialog.tsx:234",className:"font-semibold text-green-600",children:F})]}),e.jsxs("div",{"data-loc":"client/src/components/InvoiceExportDialog.tsx:236",children:[e.jsx("p",{"data-loc":"client/src/components/InvoiceExportDialog.tsx:237",className:"text-muted-foreground",children:"Total Amount"}),e.jsx("p",{"data-loc":"client/src/components/InvoiceExportDialog.tsx:238",className:"font-semibold",children:as(u,C)})]}),e.jsxs("div",{"data-loc":"client/src/components/InvoiceExportDialog.tsx:242",children:[e.jsx("p",{"data-loc":"client/src/components/InvoiceExportDialog.tsx:243",className:"text-muted-foreground",children:"Outstanding"}),e.jsx("p",{"data-loc":"client/src/components/InvoiceExportDialog.tsx:244",className:"font-semibold text-orange-600",children:as(A,C)})]})]})]}),e.jsxs("div",{"data-loc":"client/src/components/InvoiceExportDialog.tsx:252",className:"space-y-3",children:[e.jsx(kt,{"data-loc":"client/src/components/InvoiceExportDialog.tsx:253",children:"Export Format"}),e.jsxs(Ft,{"data-loc":"client/src/components/InvoiceExportDialog.tsx:254",value:p,onValueChange:N=>k(N),"aria-label":"Export format selection",children:[e.jsxs("div",{"data-loc":"client/src/components/InvoiceExportDialog.tsx:259",className:"flex items-start space-x-3 p-3 rounded-lg border hover:bg-muted/50 cursor-pointer",children:[e.jsx(ms,{"data-loc":"client/src/components/InvoiceExportDialog.tsx:260",value:"csv",id:"csv",className:"mt-1"}),e.jsxs("div",{"data-loc":"client/src/components/InvoiceExportDialog.tsx:261",className:"flex-1",children:[e.jsxs("label",{"data-loc":"client/src/components/InvoiceExportDialog.tsx:262",htmlFor:"csv",className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(ut,{"data-loc":"client/src/components/InvoiceExportDialog.tsx:266",className:"h-5 w-5 text-green-600"}),e.jsx("span",{"data-loc":"client/src/components/InvoiceExportDialog.tsx:267",className:"font-medium",children:"CSV Spreadsheet"})]}),e.jsx("p",{"data-loc":"client/src/components/InvoiceExportDialog.tsx:269",className:"text-sm text-muted-foreground mt-1",children:"Best for data analysis in Excel, Google Sheets, or other spreadsheet applications."})]})]}),e.jsxs("div",{"data-loc":"client/src/components/InvoiceExportDialog.tsx:275",className:"flex items-start space-x-3 p-3 rounded-lg border hover:bg-muted/50 cursor-pointer",children:[e.jsx(ms,{"data-loc":"client/src/components/InvoiceExportDialog.tsx:276",value:"pdf",id:"pdf",className:"mt-1"}),e.jsxs("div",{"data-loc":"client/src/components/InvoiceExportDialog.tsx:277",className:"flex-1",children:[e.jsxs("label",{"data-loc":"client/src/components/InvoiceExportDialog.tsx:278",htmlFor:"pdf",className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(ze,{"data-loc":"client/src/components/InvoiceExportDialog.tsx:282",className:"h-5 w-5 text-destructive"}),e.jsx("span",{"data-loc":"client/src/components/InvoiceExportDialog.tsx:283",className:"font-medium",children:"PDF Report"})]}),e.jsx("p",{"data-loc":"client/src/components/InvoiceExportDialog.tsx:285",className:"text-sm text-muted-foreground mt-1",children:"Professional report format with summary statistics, ideal for sharing or archiving."})]})]})]})]})]}),e.jsx(Xs,{"data-loc":"client/src/components/InvoiceExportDialog.tsx:295",onClose:()=>o(!1),onSubmit:$,submitText:`Export ${p.toUpperCase()}`,cancelText:"Cancel",isLoading:i,disabled:n.length===0})]})})}function $t(c,o){const n=i=>new Date(i).toLocaleDateString(),l=i=>new Intl.NumberFormat("en-US",{style:"currency",currency:o.currency}).format(i),p={draft:"#6b7280",sent:"#3b82f6",viewed:"#8b5cf6",paid:"#22c55e",overdue:"#ef4444",canceled:"#9ca3af"},k={unpaid:"#ef4444",partial:"#f59e0b",paid:"#22c55e"};return`
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Invoice Report - ${new Date().toLocaleDateString()}</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { 
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      padding: 40px;
      color: #1f2937;
      line-height: 1.5;
    }
    .header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 40px;
      padding-bottom: 20px;
      border-bottom: 2px solid #e5e7eb;
    }
    .header h1 {
      font-size: 28px;
      font-weight: 700;
      color: #111827;
    }
    .header .date {
      color: #6b7280;
      font-size: 14px;
    }
    .summary {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 20px;
      margin-bottom: 40px;
    }
    .summary-card {
      background: #f9fafb;
      border-radius: 8px;
      padding: 20px;
    }
    .summary-card .label {
      font-size: 12px;
      text-transform: uppercase;
      color: #6b7280;
      margin-bottom: 4px;
    }
    .summary-card .value {
      font-size: 24px;
      font-weight: 700;
    }
    .summary-card.paid .value { color: #22c55e; }
    .summary-card.outstanding .value { color: #f59e0b; }
    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 13px;
    }
    th {
      background: #f9fafb;
      padding: 12px 8px;
      text-align: left;
      font-weight: 600;
      border-bottom: 2px solid #e5e7eb;
    }
    td {
      padding: 12px 8px;
      border-bottom: 1px solid #e5e7eb;
    }
    .status-badge {
      display: inline-block;
      padding: 2px 8px;
      border-radius: 4px;
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      color: white;
    }
    .text-right { text-align: right; }
    .footer {
      margin-top: 40px;
      padding-top: 20px;
      border-top: 1px solid #e5e7eb;
      text-align: center;
      color: #9ca3af;
      font-size: 12px;
    }
    @media print {
      body { padding: 20px; }
      .summary { grid-template-columns: repeat(4, 1fr); }
    }
  </style>
</head>
<body>
  <div class="header">
    <div>
      <h1>Invoice Report</h1>
      <p class="date">Generated on ${new Date().toLocaleDateString()} at ${new Date().toLocaleTimeString()}</p>
    </div>
  </div>

  <div class="summary">
    <div class="summary-card">
      <div class="label">Total Invoices</div>
      <div class="value">${c.length}</div>
    </div>
    <div class="summary-card">
      <div class="label">Total Amount</div>
      <div class="value">${l(o.totalAmount)}</div>
    </div>
    <div class="summary-card paid">
      <div class="label">Amount Paid</div>
      <div class="value">${l(o.paidAmount)}</div>
    </div>
    <div class="summary-card outstanding">
      <div class="label">Outstanding</div>
      <div class="value">${l(o.outstandingAmount)}</div>
    </div>
  </div>

  <table>
    <thead>
      <tr>
        <th>Invoice #</th>
        <th>Client</th>
        <th>Status</th>
        <th>Payment</th>
        <th>Issue Date</th>
        <th>Due Date</th>
        <th class="text-right">Amount</th>
      </tr>
    </thead>
    <tbody>
      ${c.map(i=>`
        <tr>
          <td><strong>${i.invoiceNumber}</strong></td>
          <td>${i.client.name}</td>
          <td>
            <span class="status-badge" style="background-color: ${p[i.status]||"#6b7280"}">
              ${i.status}
            </span>
          </td>
          <td>
            <span class="status-badge" style="background-color: ${k[i.paymentStatus||"unpaid"]}">
              ${i.paymentStatus||"unpaid"}
            </span>
          </td>
          <td>${n(i.issueDate)}</td>
          <td>${n(i.dueDate)}</td>
          <td class="text-right">${l(parseFloat(i.total||"0"))}</td>
        </tr>
      `).join("")}
    </tbody>
  </table>

  <div class="footer">
    <p>Generated by SleekInvoices â€¢ ${c.length} invoice${c.length!==1?"s":""} exported</p>
  </div>
</body>
</html>
  `}function rc(){const{loading:c,isAuthenticated:o}=Js(),[,n]=Zs(),l=et(),[p,k]=v.useState(""),[i,b]=v.useState("all"),[u,D]=v.useState("all"),[A,F]=v.useState(!1),[C,P]=v.useState(!1),[f,$]=v.useState(null),[N,r]=v.useState(!1),[R,t]=v.useState(1),[_,O]=v.useState(15),{sort:x,handleSort:M,sortData:Ds}=jt({defaultKey:"invoiceNumber"}),{filters:d,setFilter:Y,clearFilters:qe,hasActiveFilters:Cs}=ft({pageKey:"invoices",filters:[{key:"client",defaultValue:"all"},{key:"dateRange",defaultValue:"all"},{key:"minAmount",defaultValue:""},{key:"maxAmount",defaultValue:""}]}),[y,z]=v.useState(new Set),[Ts,Ve]=v.useState(!1),[As,Ue]=v.useState(!1),[Ps,Ls]=v.useState(null),[Bs,_e]=v.useState(null);v.useEffect(()=>{if(!l)return;const a=new URLSearchParams(l).get("status");a&&["draft","sent","paid","overdue","canceled"].includes(a)&&b(a)},[l]);const{data:q,isLoading:Es}=T.invoices.list.useQuery(void 0,{enabled:o}),g=T.useUtils(),{pushUndoAction:Fs}=st(),Oe=T.invoices.delete.useMutation({onSuccess:()=>{},onError:s=>{g.invoices.list.invalidate(),m.error(s.message||"Failed to delete invoice. Item has been restored.")}}),{executeDelete:Ms}=yt(),$s=s=>{const a=g.invoices.list.getData(),I=()=>{a?g.invoices.list.setData(void 0,a):g.invoices.list.invalidate()};Fs({type:"delete",entityType:"invoice",description:`Delete invoice ${s.invoiceNumber}`,undo:I}),Ms({item:s,itemName:s.invoiceNumber,itemType:"invoice",onOptimisticDelete:()=>{g.invoices.list.setData(void 0,L=>L?.filter(Q=>Q.id!==s.id)),P(!1),$(null)},onRestore:I,onConfirmDelete:async()=>{await Oe.mutateAsync({id:s.id})}})},Qe=T.invoices.bulkDelete.useMutation({onMutate:async({ids:s})=>{await g.invoices.list.cancel();const a=g.invoices.list.getData(),I=new Set(s);return g.invoices.list.setData(void 0,L=>L?.filter(Q=>!I.has(Q.id))),r(!1),z(new Set),{previousInvoices:a,deletedCount:s.length}},onSuccess:s=>{m.success(`${s.deletedCount} invoice(s) deleted successfully`)},onError:(s,a,I)=>{I?.previousInvoices&&g.invoices.list.setData(void 0,I.previousInvoices),m.error(s.message||"Failed to delete invoices")},onSettled:()=>{g.invoices.list.invalidate()}}),ee=T.invoices.generatePDF.useMutation({onSuccess:s=>{Ls(s.url),_e(null),Ue(!0),m.success("PDF generated successfully")},onError:s=>{const a=s.message||"Failed to generate PDF";a.includes("Storage proxy credentials")||a.includes("BUILT_IN_FORGE")?m.error("PDF generation is not configured. Please contact support."):m.error(a)}}),le=T.invoices.sendEmail.useMutation({onMutate:async({id:s})=>{await g.invoices.list.cancel();const a=g.invoices.list.getData();return g.invoices.list.setData(void 0,I=>I?.map(L=>L.id===s?{...L,status:"sent"}:L)),{previousInvoices:a}},onSuccess:()=>{m.success("Invoice sent successfully")},onError:(s,a,I)=>{I?.previousInvoices&&g.invoices.list.setData(void 0,I.previousInvoices),m.error(s.message||"Failed to send invoice")},onSettled:()=>{g.invoices.list.invalidate()}}),re=T.invoices.createPaymentLink.useMutation({onSuccess:s=>{m.success("Payment link created"),g.invoices.list.invalidate(),navigator.clipboard.writeText(s.url),m.success("Payment link copied to clipboard")},onError:s=>{m.error(s.message||"Failed to create payment link")}}),{data:W}=T.quickbooks.getStatus.useQuery(void 0,{enabled:o}),[ye,ke]=v.useState(null),Rs=T.quickbooks.syncInvoice.useMutation({onSuccess:(s,a)=>{m.success("Invoice synced to QuickBooks"),ke(null)},onError:s=>{m.error(s.message||"Failed to sync to QuickBooks"),ke(null)}}),Ke=s=>{ke(s),Rs.mutate({invoiceId:s})},de=T.invoices.duplicate.useMutation({onSuccess:s=>{m.success(`Invoice duplicated as ${s.invoiceNumber}`),g.invoices.list.invalidate(),n(`/invoices/${s.id}/edit`)},onError:s=>{m.error(s.message||"Failed to duplicate invoice")}}),Ne=s=>{de.mutate({id:s})},Ge=T.invoices.bulkUpdateStatus.useMutation({onSuccess:s=>{m.success(`${s.updatedCount} invoice(s) updated successfully`),s.errors.length>0&&m.warning(`${s.errors.length} invoice(s) failed to update`),g.invoices.list.invalidate(),z(new Set)},onError:s=>{m.error(s.message||"Failed to update invoices")}}),zs=s=>{Ge.mutate({ids:Array.from(y),status:s})},He=T.invoices.bulkSendEmail.useMutation({onSuccess:s=>{m.success(`${s.sentCount} invoice(s) sent successfully`),s.errors.length>0&&m.warning(`${s.errors.length} invoice(s) failed to send`),g.invoices.list.invalidate(),z(new Set)},onError:s=>{m.error(s.message||"Failed to send invoices")}}),qs=()=>{He.mutate({ids:Array.from(y)})},Ye=T.invoices.bulkCreatePaymentLinks.useMutation({onSuccess:s=>{m.success(`${s.createdCount} payment link(s) created`),s.errors.length>0&&m.warning(`${s.errors.length} invoice(s) failed`),g.invoices.list.invalidate(),z(new Set)},onError:s=>{m.error(s.message||"Failed to create payment links")}}),Vs=()=>{Ye.mutate({ids:Array.from(y)})};if(c)return e.jsx("div",{"data-loc":"client/src/pages/Invoices.tsx:431",className:"min-h-screen flex items-center justify-center bg-background",children:e.jsx("div",{"data-loc":"client/src/pages/Invoices.tsx:432",className:"opacity-70",children:e.jsx(tt,{"data-loc":"client/src/pages/Invoices.tsx:433",size:"md"})})});if(!o)return window.location.href=ct(),null;const Se=v.useMemo(()=>q?q.map(a=>({id:a.client.id,name:a.client.name})).filter((a,I,L)=>L.findIndex(Q=>Q.id===a.id)===I).sort((a,I)=>a.name.localeCompare(I.name)):[],[q]),me=v.useMemo(()=>{let s=0;return d.client!=="all"&&s++,d.dateRange!=="all"&&s++,(d.minAmount||d.maxAmount)&&s++,s},[d]),Us=v.useMemo(()=>{const s=[];if(d.client!=="all"){const a=Se.find(I=>I.id.toString()===d.client);s.push({key:"client",label:"Client",value:a?.name||d.client,onRemove:()=>Y("client","all")})}if(d.dateRange!=="all"){const a={today:"Today",week:"Last 7 Days",month:"Last 30 Days",quarter:"Last 90 Days",year:"Last Year"};s.push({key:"dateRange",label:"Date",value:a[d.dateRange]||d.dateRange,onRemove:()=>Y("dateRange","all")})}return d.minAmount&&s.push({key:"minAmount",label:"Min",value:`$${d.minAmount}`,onRemove:()=>Y("minAmount","")}),d.maxAmount&&s.push({key:"maxAmount",label:"Max",value:`$${d.maxAmount}`,onRemove:()=>Y("maxAmount","")}),s},[d,Se,Y]),We=v.useMemo(()=>q?q.filter(s=>{const a=p.toLowerCase(),I=s.invoiceNumber.toLowerCase().includes(a)||s.client.name.toLowerCase().includes(a),L=i==="all"||s.status.toLowerCase()===i,Q=u==="all"||(s.paymentStatus||"unpaid")===u,Ks=d.client==="all"||s.client.id.toString()===d.client;let ts=!0;if(d.dateRange!=="all"){const K=new Date(s.issueDate),G=new Date;let H;switch(d.dateRange){case"today":H=new Date(G.getFullYear(),G.getMonth(),G.getDate());break;case"week":H=new Date(G.getTime()-10080*60*1e3);break;case"month":H=new Date(G.getTime()-720*60*60*1e3);break;case"quarter":H=new Date(G.getTime()-2160*60*60*1e3);break;case"year":H=new Date(G.getTime()-365*24*60*60*1e3);break;default:H=new Date(0)}ts=K>=H}let ce=!0;const cs=parseFloat(s.total?.toString()||"0");if(d.minAmount){const K=parseFloat(d.minAmount);isNaN(K)||(ce=ce&&cs>=K)}if(d.maxAmount){const K=parseFloat(d.maxAmount);isNaN(K)||(ce=ce&&cs<=K)}return I&&L&&Q&&Ks&&ts&&ce}):[],[q,p,i,u,d.client,d.dateRange,d.minAmount,d.maxAmount]),we=Ds(We),se=we.length,Xe=Math.ceil(se/_),xe=we.slice((R-1)*_,R*_),te=xe.map(s=>s.id),pe=te.length>0&&te.every(s=>y.has(s)),Je=te.some(s=>y.has(s)),Ze=()=>{if(pe){const s=new Set(y);te.forEach(a=>s.delete(a)),z(s)}else{const s=new Set(y);te.forEach(a=>s.add(a)),z(s)}},De=s=>{const a=new Set(y);a.has(s)?a.delete(s):a.add(s),z(a)},_s=()=>{z(new Set)},es=(s,a)=>{s(a),t(1)},Ce=s=>{$(s),P(!0)},Os=()=>{f&&$s(f)},Qs=()=>{Qe.mutate({ids:Array.from(y)})},Te=s=>{ee.mutate({id:s})},ss=(s,a)=>{ee.mutate({id:s}),_e(`Invoice-${a}.pdf`)},Ae=s=>{le.mutate({id:s})},Pe=s=>{re.mutate({id:s})};return e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:746",className:"page-wrapper",children:[e.jsx(gt,{"data-loc":"client/src/pages/Invoices.tsx:747"}),e.jsxs("main",{"data-loc":"client/src/pages/Invoices.tsx:750",id:"main-content",className:"page-content page-transition",role:"main","aria-label":"Invoices",children:[e.jsx("div",{"data-loc":"client/src/pages/Invoices.tsx:757",className:"page-header",children:e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:758",className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:759",children:[e.jsx("h1",{"data-loc":"client/src/pages/Invoices.tsx:760",className:"page-header-title",children:"Invoices"}),e.jsx("p",{"data-loc":"client/src/pages/Invoices.tsx:761",className:"page-header-subtitle",children:"Manage and track all your invoices"})]}),e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:765",className:"flex gap-2 w-full sm:w-auto",children:[e.jsxs(E,{"data-loc":"client/src/pages/Invoices.tsx:766",variant:"outline",onClick:()=>Ve(!0),className:"gap-2 touch-target",children:[e.jsx(bs,{"data-loc":"client/src/pages/Invoices.tsx:771",className:"h-4 w-4"}),e.jsx("span",{"data-loc":"client/src/pages/Invoices.tsx:772",className:"hidden sm:inline",children:"Export"}),e.jsx("span",{"data-loc":"client/src/pages/Invoices.tsx:773",className:"sm:hidden",children:"Export"})]}),e.jsxs(E,{"data-loc":"client/src/pages/Invoices.tsx:775",variant:"outline",onClick:()=>n("/invoices/guided"),className:"gap-2 touch-target border-purple-500/30 hover:border-purple-500/50 hover:bg-purple-500/5",children:[e.jsx(vt,{"data-loc":"client/src/pages/Invoices.tsx:780",className:"h-4 w-4 text-purple-500"}),e.jsx("span",{"data-loc":"client/src/pages/Invoices.tsx:781",className:"hidden sm:inline",children:"Guided"})]}),e.jsxs(E,{"data-loc":"client/src/pages/Invoices.tsx:783",onClick:()=>n("/invoices/create"),className:"flex-1 sm:flex-none touch-target",children:[e.jsx(is,{"data-loc":"client/src/pages/Invoices.tsx:787",className:"h-4 w-4 mr-2"}),e.jsx("span",{"data-loc":"client/src/pages/Invoices.tsx:788",className:"hidden sm:inline",children:"New Invoice"}),e.jsx("span",{"data-loc":"client/src/pages/Invoices.tsx:789",className:"sm:hidden",children:"New"})]})]})]})}),e.jsx(Pt,{"data-loc":"client/src/pages/Invoices.tsx:795",selectedIds:y,clearSelection:_s,handleBulkSendEmail:qs,handleBulkCreatePaymentLinks:Vs,handleBulkUpdateStatus:zs,setBulkDeleteDialogOpen:r,bulkSendEmail:He,bulkCreatePaymentLinks:Ye,bulkUpdateStatus:Ge}),e.jsx(Lt,{"data-loc":"client/src/pages/Invoices.tsx:807",invoices:xe,selectedIds:y,allCurrentPageSelected:pe,someCurrentPageSelected:Je,toggleSelectAll:Ze,toggleSelect:De,sort:x,handleSort:M,totalItems:se,qbStatus:W,onView:s=>window.location.assign(`/invoices/${s.id}`),onEdit:s=>window.location.assign(`/invoices/${s.id}/edit`),onDelete:s=>Ce(s),onDuplicate:s=>Ne(s.id),onDownloadPDF:s=>Te(s.id),onSendEmail:s=>Ae(s.id),onCreatePaymentLink:s=>Pe(s.id),isLoading:{pdf:ee.isPending,email:le.isPending,paymentLink:re.isPending,duplicate:de.isPending},syncingInvoiceId:ye}),e.jsxs(bt,{"data-loc":"client/src/pages/Invoices.tsx:835",searchValue:p,onSearchChange:s=>{k(s),t(1)},searchPlaceholder:"Search by invoice number or client name...",activeFilters:Us,onClearAll:Cs?qe:void 0,children:[e.jsxs(Le,{"data-loc":"client/src/pages/Invoices.tsx:845",value:i,onValueChange:s=>es(b,s),children:[e.jsx(Be,{"data-loc":"client/src/pages/Invoices.tsx:849",className:"w-full sm:w-[150px]",children:e.jsx(Ee,{"data-loc":"client/src/pages/Invoices.tsx:850",placeholder:"Status"})}),e.jsxs(Fe,{"data-loc":"client/src/pages/Invoices.tsx:852",children:[e.jsx(B,{"data-loc":"client/src/pages/Invoices.tsx:853",value:"all",children:"All Status"}),e.jsx(B,{"data-loc":"client/src/pages/Invoices.tsx:854",value:"draft",children:"Draft"}),e.jsx(B,{"data-loc":"client/src/pages/Invoices.tsx:855",value:"sent",children:"Sent"}),e.jsx(B,{"data-loc":"client/src/pages/Invoices.tsx:856",value:"paid",children:"Paid"}),e.jsx(B,{"data-loc":"client/src/pages/Invoices.tsx:857",value:"overdue",children:"Overdue"}),e.jsx(B,{"data-loc":"client/src/pages/Invoices.tsx:858",value:"canceled",children:"Canceled"})]})]}),e.jsxs(Le,{"data-loc":"client/src/pages/Invoices.tsx:861",value:u,onValueChange:s=>es(D,s),children:[e.jsx(Be,{"data-loc":"client/src/pages/Invoices.tsx:865",className:"w-full sm:w-[150px]",children:e.jsx(Ee,{"data-loc":"client/src/pages/Invoices.tsx:866",placeholder:"Payment"})}),e.jsxs(Fe,{"data-loc":"client/src/pages/Invoices.tsx:868",children:[e.jsx(B,{"data-loc":"client/src/pages/Invoices.tsx:869",value:"all",children:"All Payments"}),e.jsx(B,{"data-loc":"client/src/pages/Invoices.tsx:870",value:"unpaid",children:"Unpaid"}),e.jsx(B,{"data-loc":"client/src/pages/Invoices.tsx:871",value:"partial",children:"Partial"}),e.jsx(B,{"data-loc":"client/src/pages/Invoices.tsx:872",value:"paid",children:"Fully Paid"})]})]}),e.jsxs(E,{"data-loc":"client/src/pages/Invoices.tsx:875",variant:A?"secondary":"outline",onClick:()=>F(!0),className:"gap-2","aria-label":`Filters${me>0?`, ${me} active`:""}`,children:[e.jsx(ht,{"data-loc":"client/src/pages/Invoices.tsx:881",className:"h-4 w-4"}),"Filters",me>0&&e.jsx(nt,{"data-loc":"client/src/pages/Invoices.tsx:884",variant:"secondary",className:"ml-1 h-5 w-5 p-0 flex items-center justify-center text-xs",children:me})]})]}),e.jsx(Et,{"data-loc":"client/src/pages/Invoices.tsx:895",open:A,onOpenChange:F,title:"Invoice Filters",fields:[{key:"client",label:"Client",type:"select",options:[{value:"all",label:"All Clients"},...Se.map(s=>({value:s.id.toString(),label:s.name}))]},{key:"dateRange",label:"Date Range",type:"select",options:[{value:"all",label:"All Time"},{value:"today",label:"Today"},{value:"week",label:"Last 7 Days"},{value:"month",label:"Last 30 Days"},{value:"quarter",label:"Last 90 Days"},{value:"year",label:"Last Year"}]},{key:"minAmount",label:"Min Amount",type:"number",placeholder:"0.00"},{key:"maxAmount",label:"Max Amount",type:"number",placeholder:"No limit"}],values:d,onChange:Y,onClear:qe}),e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:944",className:"rounded-2xl bg-gradient-to-br from-card to-card/80 border border-border/50 backdrop-blur-sm overflow-hidden",children:[e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:945",className:"p-5 pb-4",children:[e.jsx("h3",{"data-loc":"client/src/pages/Invoices.tsx:946",className:"text-lg font-semibold text-foreground",children:"All Invoices"}),e.jsxs("p",{"data-loc":"client/src/pages/Invoices.tsx:949",className:"text-sm text-muted-foreground",children:[e.jsx("span",{"data-loc":"client/src/pages/Invoices.tsx:950",className:"font-numeric",children:se})," invoice",se!==1?"s":""," found"]})]}),e.jsx("div",{"data-loc":"client/src/pages/Invoices.tsx:954",className:"px-5 pb-5",children:Es?e.jsx(At,{"data-loc":"client/src/pages/Invoices.tsx:956"}):!q||q.length===0?e.jsx(rs,{"data-loc":"client/src/pages/Invoices.tsx:958",...ds.invoices,action:{label:"Create Invoice",onClick:()=>n("/invoices/create"),icon:is}}):We.length===0?e.jsx(rs,{"data-loc":"client/src/pages/Invoices.tsx:967",...ds.search,size:"sm"}):e.jsxs(e.Fragment,{children:[e.jsx(ws,{"data-loc":"client/src/pages/Invoices.tsx:971",minWidth:900,className:"hidden md:block",children:e.jsxs(hs,{"data-loc":"client/src/pages/Invoices.tsx:972",children:[e.jsx(gs,{"data-loc":"client/src/pages/Invoices.tsx:973",children:e.jsxs(ve,{"data-loc":"client/src/pages/Invoices.tsx:974",children:[e.jsx(J,{"data-loc":"client/src/pages/Invoices.tsx:975",className:"w-[40px]",children:e.jsx(X,{"data-loc":"client/src/pages/Invoices.tsx:976",checked:pe,onCheckedChange:Ze,"aria-label":"Select all invoices on this page",className:Je&&!pe?"data-[state=checked]:bg-primary/50":""})}),e.jsx(w,{"data-loc":"client/src/pages/Invoices.tsx:987",label:"Invoice #",sortKey:"invoiceNumber",currentSort:x,onSort:M}),e.jsx(w,{"data-loc":"client/src/pages/Invoices.tsx:993",label:"Client",sortKey:"client.name",currentSort:x,onSort:M}),e.jsx(w,{"data-loc":"client/src/pages/Invoices.tsx:999",label:"Issue Date",sortKey:"issueDate",currentSort:x,onSort:M}),e.jsx(w,{"data-loc":"client/src/pages/Invoices.tsx:1005",label:"Due Date",sortKey:"dueDate",currentSort:x,onSort:M}),e.jsx(w,{"data-loc":"client/src/pages/Invoices.tsx:1011",label:"Amount",sortKey:"total",currentSort:x,onSort:M}),e.jsx(w,{"data-loc":"client/src/pages/Invoices.tsx:1017",label:"Payment",sortKey:"paymentStatus",currentSort:x,onSort:M}),e.jsx(w,{"data-loc":"client/src/pages/Invoices.tsx:1023",label:"Status",sortKey:"status",currentSort:x,onSort:M}),W?.connected&&e.jsx(J,{"data-loc":"client/src/pages/Invoices.tsx:1030",className:"w-[60px] text-center",children:"QB"}),e.jsx(J,{"data-loc":"client/src/pages/Invoices.tsx:1034",className:"text-right",children:"Actions"})]})}),e.jsx(Is,{"data-loc":"client/src/pages/Invoices.tsx:1037",children:xe?.map(s=>e.jsxs(ve,{"data-loc":"client/src/pages/Invoices.tsx:1039",className:`group ${y.has(s.id)?"bg-primary/5":""}`,children:[e.jsx(j,{"data-loc":"client/src/pages/Invoices.tsx:1043",children:e.jsx(X,{"data-loc":"client/src/pages/Invoices.tsx:1044",checked:y.has(s.id),onCheckedChange:()=>De(s.id),"aria-label":`Select invoice ${s.invoiceNumber}`})}),e.jsx(j,{"data-loc":"client/src/pages/Invoices.tsx:1050",children:e.jsx(be,{"data-loc":"client/src/pages/Invoices.tsx:1051",invoiceNumber:s.invoiceNumber})}),e.jsx(j,{"data-loc":"client/src/pages/Invoices.tsx:1055",children:s.client.name}),e.jsx(j,{"data-loc":"client/src/pages/Invoices.tsx:1056",children:e.jsx(V,{"data-loc":"client/src/pages/Invoices.tsx:1057",date:s.issueDate,format:"short"})}),e.jsx(j,{"data-loc":"client/src/pages/Invoices.tsx:1062",children:e.jsx(V,{"data-loc":"client/src/pages/Invoices.tsx:1063",date:s.dueDate,format:"short"})}),e.jsx(j,{"data-loc":"client/src/pages/Invoices.tsx:1068",className:"font-semibold",children:e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:1069",className:"space-y-1",children:[e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:1070",className:"flex items-center gap-2",children:[e.jsx(U,{"data-loc":"client/src/pages/Invoices.tsx:1071",amount:s.total,currency:s.currency}),s.currency&&s.currency!=="USD"&&e.jsx(Ie,{"data-loc":"client/src/pages/Invoices.tsx:1077",code:s.currency})]}),s.paymentStatus&&s.paymentStatus!=="unpaid"&&e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:1082",className:"text-xs text-muted-foreground",children:["Paid:"," ",e.jsx(U,{"data-loc":"client/src/pages/Invoices.tsx:1084",amount:s.totalPaid||"0"})]})]})}),e.jsx(j,{"data-loc":"client/src/pages/Invoices.tsx:1091",children:s.paymentStatus?e.jsx(Z,{"data-loc":"client/src/pages/Invoices.tsx:1093",status:s.paymentStatus}):e.jsx(Z,{"data-loc":"client/src/pages/Invoices.tsx:1097",status:"unpaid"})}),e.jsx(j,{"data-loc":"client/src/pages/Invoices.tsx:1100",children:e.jsx(ue,{"data-loc":"client/src/pages/Invoices.tsx:1101",status:s.status})}),W?.connected&&e.jsx(j,{"data-loc":"client/src/pages/Invoices.tsx:1104",className:"text-center",children:e.jsx(ne,{"data-loc":"client/src/pages/Invoices.tsx:1105",children:e.jsxs(ae,{"data-loc":"client/src/pages/Invoices.tsx:1106",children:[e.jsx(oe,{"data-loc":"client/src/pages/Invoices.tsx:1107",asChild:!0,children:e.jsx("div",{"data-loc":"client/src/pages/Invoices.tsx:1108",className:"flex justify-center",children:s.quickbooks?.synced?e.jsx("div",{"data-loc":"client/src/pages/Invoices.tsx:1110",className:"w-6 h-6 rounded-full bg-emerald-500/10 flex items-center justify-center",children:e.jsx("svg",{"data-loc":"client/src/pages/Invoices.tsx:1111",className:"w-4 h-4 text-emerald-500",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{"data-loc":"client/src/pages/Invoices.tsx:1116",d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})})}):e.jsx("div",{"data-loc":"client/src/pages/Invoices.tsx:1120",className:"w-6 h-6 rounded-full bg-muted/50 flex items-center justify-center",children:e.jsx("div",{"data-loc":"client/src/pages/Invoices.tsx:1121",className:"w-2 h-2 rounded-full bg-muted-foreground/30"})})})}),e.jsx(ie,{"data-loc":"client/src/pages/Invoices.tsx:1126",side:"top",children:s.quickbooks?.synced?e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:1128",className:"text-xs",children:[e.jsx("div",{"data-loc":"client/src/pages/Invoices.tsx:1129",className:"font-medium",children:"Synced to QuickBooks"}),s.quickbooks.lastSyncedAt&&e.jsx("div",{"data-loc":"client/src/pages/Invoices.tsx:1133",className:"text-muted-foreground",children:new Date(s.quickbooks.lastSyncedAt).toLocaleString()})]}):e.jsx("span",{"data-loc":"client/src/pages/Invoices.tsx:1141",children:"Not synced to QuickBooks"})})]})})}),e.jsx(j,{"data-loc":"client/src/pages/Invoices.tsx:1148",className:"text-right",children:e.jsx(je,{"data-loc":"client/src/pages/Invoices.tsx:1149",invoiceId:s.id,invoiceNumber:s.invoiceNumber,hasPaymentLink:!!s.paymentLink,onView:()=>n(`/invoices/${s.id}`),onEdit:()=>n(`/invoices/${s.id}/edit`),onDownloadPDF:()=>Te(s.id),onViewPDF:()=>ss(s.id,s.invoiceNumber),onSendEmail:()=>Ae(s.id),onCreatePaymentLink:()=>Pe(s.id),onDelete:()=>Ce(s),onDuplicate:()=>Ne(s.id),onSyncToQuickBooks:()=>Ke(s.id),quickBooksConnected:W?.connected||!1,isLoading:{pdf:ee.isPending,email:le.isPending,paymentLink:re.isPending,duplicate:de.isPending,quickBooksSync:ye===s.id}})})]},s.id))})]})}),e.jsx("div",{"data-loc":"client/src/pages/Invoices.tsx:1191",className:"md:hidden space-y-4",children:xe?.map(s=>e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:1193",className:`border rounded-lg p-4 space-y-3 ${y.has(s.id)?"border-primary bg-primary/5":""}`,children:[e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:1197",className:"flex items-start justify-between",children:[e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:1198",className:"flex items-start gap-3",children:[e.jsx(X,{"data-loc":"client/src/pages/Invoices.tsx:1199",checked:y.has(s.id),onCheckedChange:()=>De(s.id),"aria-label":`Select invoice ${s.invoiceNumber}`,className:"mt-1"}),e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:1205",children:[e.jsx(be,{"data-loc":"client/src/pages/Invoices.tsx:1206",invoiceNumber:s.invoiceNumber}),e.jsx("p",{"data-loc":"client/src/pages/Invoices.tsx:1209",className:"text-sm text-muted-foreground",children:s.client.name})]})]}),e.jsx(je,{"data-loc":"client/src/pages/Invoices.tsx:1214",invoiceId:s.id,invoiceNumber:s.invoiceNumber,hasPaymentLink:!!s.paymentLink,onView:()=>n(`/invoices/${s.id}`),onEdit:()=>n(`/invoices/${s.id}/edit`),onDownloadPDF:()=>Te(s.id),onViewPDF:()=>ss(s.id,s.invoiceNumber),onSendEmail:()=>Ae(s.id),onCreatePaymentLink:()=>Pe(s.id),onDelete:()=>Ce(s),onDuplicate:()=>Ne(s.id),onSyncToQuickBooks:()=>Ke(s.id),quickBooksConnected:W?.connected||!1,isLoading:{pdf:ee.isPending,email:le.isPending,paymentLink:re.isPending,duplicate:de.isPending,quickBooksSync:ye===s.id}})]}),e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:1245",className:"flex items-center justify-between",children:[e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:1246",className:"flex items-center gap-2",children:[e.jsx(ue,{"data-loc":"client/src/pages/Invoices.tsx:1247",status:s.status}),e.jsx(Z,{"data-loc":"client/src/pages/Invoices.tsx:1248",status:s.paymentStatus||"unpaid"}),W?.connected&&s.quickbooks?.synced&&e.jsx(ne,{"data-loc":"client/src/pages/Invoices.tsx:1253",children:e.jsxs(ae,{"data-loc":"client/src/pages/Invoices.tsx:1254",children:[e.jsx(oe,{"data-loc":"client/src/pages/Invoices.tsx:1255",asChild:!0,children:e.jsx("div",{"data-loc":"client/src/pages/Invoices.tsx:1256",className:"w-5 h-5 rounded-full bg-emerald-500/10 flex items-center justify-center",children:e.jsx("svg",{"data-loc":"client/src/pages/Invoices.tsx:1257",className:"w-3 h-3 text-emerald-500",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{"data-loc":"client/src/pages/Invoices.tsx:1262",d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})})})}),e.jsx(ie,{"data-loc":"client/src/pages/Invoices.tsx:1266",side:"top",children:e.jsx("span",{"data-loc":"client/src/pages/Invoices.tsx:1267",className:"text-xs",children:"Synced to QuickBooks"})})]})})]}),e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:1275",className:"text-right",children:[e.jsxs("p",{"data-loc":"client/src/pages/Invoices.tsx:1276",className:"font-semibold flex items-center gap-1 justify-end",children:[e.jsx(U,{"data-loc":"client/src/pages/Invoices.tsx:1277",amount:s.total,currency:s.currency}),s.currency&&s.currency!=="USD"&&e.jsx(Ie,{"data-loc":"client/src/pages/Invoices.tsx:1282",code:s.currency})]}),s.paymentStatus&&s.paymentStatus!=="unpaid"&&e.jsxs("p",{"data-loc":"client/src/pages/Invoices.tsx:1287",className:"text-xs text-muted-foreground",children:["Paid:"," ",e.jsx(U,{"data-loc":"client/src/pages/Invoices.tsx:1289",amount:s.totalPaid||"0"})]})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/Invoices.tsx:1294",className:"flex justify-between text-xs text-muted-foreground pt-2 border-t",children:[e.jsxs("span",{"data-loc":"client/src/pages/Invoices.tsx:1295",children:["Issued:"," ",e.jsx(V,{"data-loc":"client/src/pages/Invoices.tsx:1297",date:s.issueDate,format:"short"})]}),e.jsxs("span",{"data-loc":"client/src/pages/Invoices.tsx:1302",children:["Due:"," ",e.jsx(V,{"data-loc":"client/src/pages/Invoices.tsx:1304",date:s.dueDate,format:"short"})]})]})]},s.id))}),Xe>1&&e.jsx("div",{"data-loc":"client/src/pages/Invoices.tsx:1313",className:"mt-6",children:e.jsx(It,{"data-loc":"client/src/pages/Invoices.tsx:1314",currentPage:R,totalPages:Xe,onPageChange:t,pageSize:_,onPageSizeChange:s=>{O(s),t(1)},totalItems:se})})]})})]})]}),e.jsx(ls,{"data-loc":"client/src/pages/Invoices.tsx:1334",open:C,onOpenChange:P,onConfirm:Os,title:"Delete Invoice",description:`Are you sure you want to delete invoice ${f?.invoiceNumber}? This action cannot be undone.`,isLoading:Oe.isPending}),e.jsx(ls,{"data-loc":"client/src/pages/Invoices.tsx:1344",open:N,onOpenChange:r,onConfirm:Qs,title:"Delete Selected Invoices",description:`Are you sure you want to delete ${y.size} invoice${y.size!==1?"s":""}? This action cannot be undone.`,isLoading:Qe.isPending}),e.jsx(Mt,{"data-loc":"client/src/pages/Invoices.tsx:1354",open:Ts,onOpenChange:Ve,invoices:we}),e.jsx(Dt,{"data-loc":"client/src/pages/Invoices.tsx:1361",open:As,onOpenChange:Ue,pdfUrl:Ps||"",fileName:Bs||void 0})]})}export{rc as default};
