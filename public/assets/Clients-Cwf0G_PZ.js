import{r,j as e}from"./vendor-react-BuVtq312.js";import{t as y,k as g,D as fe,e as be,f as Ne,h as De,i as ve,l as ze,m as Ce,I as Se,B as C,n as ae,j as Re,o as Cs,L as js,b as fs,p as bs,G as Ns,C as Pe,a as Ve}from"./index-hzFfJlKH.js";import{C as H}from"./checkbox-Cacebbmr.js";import{C as Ds}from"./ClientDialog-Ch_MRpgo.js";import{L as K}from"./label-DJDGx5UM.js";import{Y as L,L as Y,_ as vs,m as Ss,y as Fe,E as Ts,I as ne,$ as ws,q as ks,a0 as oe,X as ys,d as $e,a1 as As,a2 as ie,a3 as je,a4 as Oe,a5 as Is,a6 as Le,a7 as Ps,u as te,O as Vs,a8 as Es,S as Ms,a9 as Bs}from"./vendor-icons-CPPAmKDz.js";import{D as Ee}from"./DeleteConfirmDialog-BLT6kY2H.js";import{D as _e,a as Ue,b as qe,c as W,d as Me,N as zs}from"./Navigation-DKoTJDrW.js";import{S as Rs,a as Fs,P as $s}from"./scrollable-table-wrapper-nwSnGFpJ.js";import{u as Os}from"./useUndoableDelete-CCCtPilo.js";import{T as Ge,a as Qe,b as re,c as z,d as Ye,e as M}from"./table-y7wtTQEZ.js";import{u as Ls}from"./useUrlFilters-CRX96KXw.js";import{A as ce,a as le}from"./alert-BRTSJszf.js";import{E as _s,a as Us}from"./EmptyState-B5hZ-p_K.js";import{S as I}from"./skeleton-QN8DVCY2.js";import"./vendor-data-DopHG4T0.js";import"./vendor-radix-DQBG9U-J.js";import"./textarea-CA7ezKjn.js";import"./alert-dialog-nKHsLnMc.js";import"./UserAvatar-DzPpP9tb.js";import"./select-BmfPitD4.js";function qs({open:d,onOpenChange:o,client:a}){const[i,m]=r.useState(!1),{data:c,isLoading:u,refetch:j}=y.clientPortal.getActiveAccess.useQuery({clientId:a.id},{enabled:d});y.useUtils();const w=y.clientPortal.generateAccessToken.useMutation({onSuccess:A=>{g.success("Portal access link generated!"),j()},onError:A=>{g.error(A.message||"Failed to generate access link")}}),b=y.clientPortal.revokeAccess.useMutation({onSuccess:()=>{g.success("Portal access revoked"),j()},onError:A=>{g.error(A.message||"Failed to revoke access")}}),x=y.clientPortal.sendInvitation.useMutation({onSuccess:()=>{g.success(`Portal invitation sent to ${a.email}`)},onError:A=>{g.error(A.message||"Failed to send invitation")}}),T=()=>{w.mutate({clientId:a.id})},N=()=>{c?.accessToken&&b.mutate({accessToken:c.accessToken})},t=()=>{if(c){const A=`${window.location.origin}/portal/${c.accessToken}`;navigator.clipboard.writeText(A),m(!0),g.success("Link copied to clipboard!"),setTimeout(()=>m(!1),2e3)}},l=()=>{c&&window.open(`/portal/${c.accessToken}`,"_blank")},V=c?`${window.location.origin}/portal/${c.accessToken}`:"",$=c?new Date>new Date(c.expiresAt):!1;return e.jsx(fe,{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:119",open:d,onOpenChange:o,children:e.jsxs(be,{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:120",className:"sm:max-w-[550px]",children:[e.jsxs(Ne,{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:121",className:"pb-4",children:[e.jsxs(De,{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:122",className:"flex items-center gap-3",children:[e.jsx("div",{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:123",className:"p-3 rounded-xl bg-primary/10",children:e.jsx(L,{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:124",className:"size-5 text-primary"})}),e.jsx("span",{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:126",className:"text-xl",children:"Client Portal Access"})]}),e.jsxs(ve,{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:128",className:"text-base",children:["Manage secure portal access for ",a.name]})]}),e.jsx(ze,{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:133",spacing:"relaxed",children:u?e.jsx("div",{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:135",className:"flex items-center justify-center py-8",children:e.jsx(Y,{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:136",className:"h-8 w-8 animate-spin text-primary"})}):c&&!$?e.jsxs(e.Fragment,{children:[e.jsxs("div",{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:141",className:"rounded-lg border border-primary/20 bg-primary/5 p-4 space-y-3",children:[e.jsxs("div",{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:142",className:"flex items-center gap-2 text-sm font-medium text-primary",children:[e.jsx(vs,{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:143",className:"h-4 w-4"}),"Active Portal Access"]}),e.jsxs("div",{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:147",className:"space-y-2 text-sm",children:[e.jsxs("div",{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:148",className:"flex justify-between",children:[e.jsx("span",{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:149",className:"text-muted-foreground",children:"Created:"}),e.jsx("span",{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:150",className:"font-medium",children:Ce(c.createdAt)})]}),e.jsxs("div",{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:154",className:"flex justify-between",children:[e.jsx("span",{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:155",className:"text-muted-foreground",children:"Expires:"}),e.jsx("span",{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:156",className:"font-medium",children:Ce(c.expiresAt)})]}),c.lastAccessedAt&&e.jsxs("div",{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:161",className:"flex justify-between",children:[e.jsx("span",{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:162",className:"text-muted-foreground",children:"Last Accessed:"}),e.jsx("span",{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:165",className:"font-medium",children:Ce(c.lastAccessedAt)})]})]})]}),e.jsxs("div",{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:174",className:"space-y-2",children:[e.jsx(K,{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:175",htmlFor:"portal-url",className:"text-sm font-medium",children:"Portal Link"}),e.jsxs("div",{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:178",className:"flex gap-2",children:[e.jsxs("div",{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:179",className:"relative flex-1",children:[e.jsx(L,{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:180",className:"absolute left-3 top-1/2 -translate-y-1/2 size-4 text-muted-foreground"}),e.jsx(Se,{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:181",id:"portal-url",value:V,readOnly:!0,className:"font-mono text-sm pl-9"})]}),e.jsx(C,{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:188",variant:"outline",size:"icon",onClick:t,title:"Copy to clipboard","aria-label":"Copy link to clipboard",children:i?e.jsx(Ss,{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:196",className:"size-4 text-green-500"}):e.jsx(Fe,{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:198",className:"size-4"})}),e.jsx(C,{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:201",variant:"outline",size:"icon",onClick:l,title:"Open in new tab","aria-label":"Open portal in new tab",children:e.jsx(Ts,{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:208",className:"size-4"})})]}),e.jsx("p",{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:211",className:"text-xs text-muted-foreground",children:"Share this link with your client to give them access to view and pay their invoices"})]}),e.jsxs("div",{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:218",className:"flex gap-3",children:[e.jsxs(C,{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:219",onClick:()=>x.mutate({clientId:a.id,accessToken:c.accessToken}),disabled:x.isPending||!a.email,className:"flex-1",children:[x.isPending?e.jsx(Y,{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:230",className:"size-4 animate-spin"}):e.jsx(ne,{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:232",className:"size-4"}),"Send Invite"]}),e.jsxs(C,{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:236",variant:"outline",onClick:N,disabled:b.isPending,className:"flex-1",children:[b.isPending?e.jsx(Y,{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:243",className:"size-4 animate-spin"}):e.jsx(ws,{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:245",className:"size-4"}),"Revoke Access"]}),e.jsx(C,{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:249",variant:"ghost",size:"icon",onClick:()=>j(),disabled:u,title:"Refresh","aria-label":"Refresh portal access status",children:e.jsx(ks,{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:257",className:"size-4"})})]}),!a.email&&e.jsx("p",{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:262",className:"text-xs text-yellow-600 bg-yellow-500/10 border border-yellow-500/20 p-3 rounded-lg",children:"⚠️ Client email is required to send invitations. Please add an email address to this client."})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:271",className:"rounded-lg border border-dashed border-border bg-secondary/30 p-8 text-center space-y-4",children:[e.jsx("div",{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:272",className:"flex justify-center",children:e.jsx("div",{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:273",className:"rounded-full bg-primary/10 p-3",children:e.jsx(L,{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:274",className:"h-8 w-8 text-primary"})})}),e.jsxs("div",{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:277",children:[e.jsx("h3",{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:278",className:"font-semibold mb-1",children:"No Active Portal Access"}),e.jsxs("p",{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:281",className:"text-sm text-muted-foreground",children:["Generate a secure link for ",a.name," to access their invoices"]})]}),e.jsxs(C,{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:286",onClick:T,disabled:w.isPending,className:"mt-2",children:[w.isPending?e.jsx(Y,{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:292",className:"size-4 animate-spin"}):e.jsx(L,{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:294",className:"size-4"}),"Generate Portal Link"]})]}),e.jsxs("div",{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:300",className:"rounded-lg bg-blue-500/10 border border-blue-500/20 p-4",children:[e.jsx("h4",{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:301",className:"text-sm font-medium text-blue-700 dark:text-blue-300 mb-2",children:"About Client Portal Access"}),e.jsxs("ul",{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:304",className:"text-xs text-blue-600 dark:text-blue-400 space-y-1",children:[e.jsx("li",{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:305",children:"• Clients can view all their invoices"}),e.jsx("li",{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:306",children:"• Secure payment links included for unpaid invoices"}),e.jsx("li",{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:307",children:"• Access tokens expire after 90 days"}),e.jsx("li",{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:308",children:"• You can revoke access anytime"})]})]})]})}),e.jsx(ae,{"data-loc":"client/src/components/clients/PortalAccessDialog.tsx:315",onClose:()=>o(!1),cancelText:"Close"})]})})}function Gs({tagDialogOpen:d,setTagDialogOpen:o,editingTag:a,setEditingTag:i,newTagName:m,setNewTagName:c,newTagColor:u,setNewTagColor:j,tags:w,deleteTag:b,createTag:x,updateTag:T}){const N=r.useId(),t=r.useId();return e.jsx(fe,{"data-loc":"client/src/components/clients/TagDialog.tsx:57",open:d,onOpenChange:o,children:e.jsxs(be,{"data-loc":"client/src/components/clients/TagDialog.tsx:58",className:"sm:max-w-md",children:[e.jsxs(Ne,{"data-loc":"client/src/components/clients/TagDialog.tsx:59",className:"pb-4",children:[e.jsx(De,{"data-loc":"client/src/components/clients/TagDialog.tsx:60",className:"text-xl",children:a?"Edit Tag":"Manage Tags"}),e.jsx(ve,{"data-loc":"client/src/components/clients/TagDialog.tsx:63",className:"text-base",children:a?"Update the tag details below.":"Create and manage tags to organize your clients."})]}),!a&&w&&w.length>0&&e.jsxs("div",{"data-loc":"client/src/components/clients/TagDialog.tsx:71",className:"space-y-3 pb-2",children:[e.jsx(K,{"data-loc":"client/src/components/clients/TagDialog.tsx:72",className:"text-sm font-medium",children:"Existing Tags"}),e.jsx("div",{"data-loc":"client/src/components/clients/TagDialog.tsx:73",className:"flex flex-wrap gap-2",children:w.map(l=>e.jsxs(Re,{"data-loc":"client/src/components/clients/TagDialog.tsx:75",variant:"secondary",className:"text-sm cursor-pointer hover:opacity-80 pr-1",style:{backgroundColor:l.color+"20",color:l.color,borderColor:l.color},children:[l.name,e.jsx(C,{"data-loc":"client/src/components/clients/TagDialog.tsx:86",variant:"ghost",size:"sm",className:"h-4 w-4 p-0 ml-1 hover:bg-transparent",onClick:()=>{i(l),c(l.name),j(l.color)},children:e.jsx(oe,{"data-loc":"client/src/components/clients/TagDialog.tsx:96",className:"h-3 w-3"})}),e.jsx(C,{"data-loc":"client/src/components/clients/TagDialog.tsx:98",variant:"ghost",size:"sm",className:"h-4 w-4 p-0 hover:bg-transparent text-destructive",onClick:()=>{confirm(`Delete tag "${l.name}"?`)&&b.mutate({id:l.id})},children:e.jsx(ys,{"data-loc":"client/src/components/clients/TagDialog.tsx:108",className:"h-3 w-3"})})]},l.id))})]}),e.jsxs("div",{"data-loc":"client/src/components/clients/TagDialog.tsx:116",className:"space-y-4",children:[e.jsxs("div",{"data-loc":"client/src/components/clients/TagDialog.tsx:117",className:"space-y-2",children:[e.jsx(K,{"data-loc":"client/src/components/clients/TagDialog.tsx:118",htmlFor:N,children:a?"Tag Name":"New Tag Name"}),e.jsx(Se,{"data-loc":"client/src/components/clients/TagDialog.tsx:121",id:N,value:m,onChange:l=>c(l.target.value),placeholder:"e.g., VIP, Recurring, New"})]}),e.jsxs("div",{"data-loc":"client/src/components/clients/TagDialog.tsx:128",className:"space-y-2",children:[e.jsx(K,{"data-loc":"client/src/components/clients/TagDialog.tsx:129",htmlFor:t,children:"Tag Color"}),e.jsxs("div",{"data-loc":"client/src/components/clients/TagDialog.tsx:130",className:"flex items-center gap-3",children:[e.jsx("input",{"data-loc":"client/src/components/clients/TagDialog.tsx:131",type:"color",id:t,value:u,onChange:l=>j(l.target.value),className:"w-10 h-10 rounded cursor-pointer border-0","aria-label":"Custom color picker"}),e.jsx("div",{"data-loc":"client/src/components/clients/TagDialog.tsx:139",className:"flex gap-2",role:"radiogroup","aria-label":"Preset tag colors",children:[{hex:"#6366f1",name:"Indigo"},{hex:"#22c55e",name:"Green"},{hex:"#f59e0b",name:"Amber"},{hex:"#ef4444",name:"Red"},{hex:"#8b5cf6",name:"Purple"},{hex:"#06b6d4",name:"Cyan"},{hex:"#ec4899",name:"Pink"}].map(l=>e.jsx("button",{"data-loc":"client/src/components/clients/TagDialog.tsx:153",type:"button",role:"radio","aria-checked":u===l.hex,"aria-label":`Select ${l.name} color`,className:`w-6 h-6 rounded-full border-2 ${u===l.hex?"border-foreground":"border-transparent"}`,style:{backgroundColor:l.hex},onClick:()=>j(l.hex)},l.hex))})]})]})]}),e.jsxs(Cs,{"data-loc":"client/src/components/clients/TagDialog.tsx:169",className:"gap-3",children:[a&&e.jsx(C,{"data-loc":"client/src/components/clients/TagDialog.tsx:171",variant:"outline",onClick:()=>{i(null),c(""),j("#6366f1")},children:"Cancel Edit"}),e.jsx(C,{"data-loc":"client/src/components/clients/TagDialog.tsx:182",onClick:()=>{if(!m.trim()){g.error("Please enter a tag name");return}a?T.mutate({id:a.id,name:m.trim(),color:u}):x.mutate({name:m.trim(),color:u})},disabled:x.isPending||T.isPending,children:a?"Update Tag":"Create Tag"})]})]})})}function Qs({isSomeSelected:d,selectedIds:o,setSelectedIds:a,tags:i,bulkAssignTag:m,handleBulkDelete:c}){return e.jsx(e.Fragment,{children:d&&e.jsxs("div",{"data-loc":"client/src/components/clients/BulkActionsBar.tsx:38",className:"mb-4 p-3 bg-primary/10 border border-primary/20 rounded-lg flex items-center justify-between",children:[e.jsxs("span",{"data-loc":"client/src/components/clients/BulkActionsBar.tsx:39",className:"text-sm font-medium",children:[o.size," client",o.size!==1?"s":""," ","selected"]}),e.jsxs("div",{"data-loc":"client/src/components/clients/BulkActionsBar.tsx:43",className:"flex gap-2",children:[e.jsx(C,{"data-loc":"client/src/components/clients/BulkActionsBar.tsx:44",variant:"ghost",size:"sm",onClick:()=>a(new Set),children:"Clear Selection"}),e.jsx(js,{"data-loc":"client/src/components/clients/BulkActionsBar.tsx:51",href:`/invoices/batch?clients=${Array.from(o).join(",")}`,children:e.jsxs(C,{"data-loc":"client/src/components/clients/BulkActionsBar.tsx:54",variant:"default",size:"sm",children:[e.jsx($e,{"data-loc":"client/src/components/clients/BulkActionsBar.tsx:55",className:"h-4 w-4 mr-2"}),"Create Invoices"]})}),i&&i.length>0&&e.jsxs(_e,{"data-loc":"client/src/components/clients/BulkActionsBar.tsx:60",children:[e.jsx(Ue,{"data-loc":"client/src/components/clients/BulkActionsBar.tsx:61",asChild:!0,children:e.jsxs(C,{"data-loc":"client/src/components/clients/BulkActionsBar.tsx:62",variant:"outline",size:"sm",children:[e.jsx(As,{"data-loc":"client/src/components/clients/BulkActionsBar.tsx:63",className:"h-4 w-4 mr-2"}),"Add Tag"]})}),e.jsx(qe,{"data-loc":"client/src/components/clients/BulkActionsBar.tsx:67",children:i.map(u=>e.jsxs(W,{"data-loc":"client/src/components/clients/BulkActionsBar.tsx:69",onClick:()=>m.mutate({clientIds:Array.from(o),tagId:u.id}),children:[e.jsx("div",{"data-loc":"client/src/components/clients/BulkActionsBar.tsx:78",className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:u.color}}),u.name]},u.id))})]}),e.jsxs(C,{"data-loc":"client/src/components/clients/BulkActionsBar.tsx:88",variant:"destructive",size:"sm",onClick:c,children:[e.jsx(ie,{"data-loc":"client/src/components/clients/BulkActionsBar.tsx:89",className:"h-4 w-4 mr-2"}),"Delete Selected"]})]})]})})}function Ys({paginatedClients:d,filteredAndSortedClients:o,selectedIds:a,currentSort:i,handleSort:m,handleSelectOne:c,toggleSelectAll:u,clientTagsMap:j,removeTagMutation:w,onEdit:b,onDelete:x,onPortalAccess:T,onDuplicate:N}){return e.jsxs("div",{"data-loc":"client/src/components/clients/ClientTable.tsx:75",className:"rounded-2xl bg-gradient-to-br from-card to-card/80 border border-border/50 backdrop-blur-sm overflow-hidden",children:[e.jsxs("div",{"data-loc":"client/src/components/clients/ClientTable.tsx:76",className:"p-5 pb-4",children:[e.jsx("h3",{"data-loc":"client/src/components/clients/ClientTable.tsx:77",className:"text-lg font-semibold text-foreground",children:"All Clients"}),e.jsxs("p",{"data-loc":"client/src/components/clients/ClientTable.tsx:78",className:"text-sm text-muted-foreground",children:[e.jsx("span",{"data-loc":"client/src/components/clients/ClientTable.tsx:79",className:"font-numeric",children:o.length})," ","client",o.length!==1?"s":""," found"]})]}),e.jsx(Rs,{"data-loc":"client/src/components/clients/ClientTable.tsx:86",minWidth:700,className:"px-5 pb-5",children:e.jsxs(Ge,{"data-loc":"client/src/components/clients/ClientTable.tsx:87",children:[e.jsx(Qe,{"data-loc":"client/src/components/clients/ClientTable.tsx:88",children:e.jsxs(re,{"data-loc":"client/src/components/clients/ClientTable.tsx:89",children:[e.jsx(z,{"data-loc":"client/src/components/clients/ClientTable.tsx:90",className:"w-[40px]",children:e.jsx(H,{"data-loc":"client/src/components/clients/ClientTable.tsx:91",checked:a.size===d.length&&d.length>0,onCheckedChange:u,"aria-label":"Select all clients on this page",className:d.length>0&&d.length===a.size?"data-[state=checked]:bg-primary/50":""})}),e.jsx(Fs,{"data-loc":"client/src/components/clients/ClientTable.tsx:106",label:"Company",sortKey:"name",currentSort:i,onSort:m}),e.jsx(z,{"data-loc":"client/src/components/clients/ClientTable.tsx:112",scope:"col",children:"Contact"}),e.jsx(z,{"data-loc":"client/src/components/clients/ClientTable.tsx:113",scope:"col",children:"VAT"}),e.jsx(z,{"data-loc":"client/src/components/clients/ClientTable.tsx:114",scope:"col",children:"Address"}),e.jsx(z,{"data-loc":"client/src/components/clients/ClientTable.tsx:115",className:"text-right",children:"Actions"})]})}),e.jsx(Ye,{"data-loc":"client/src/components/clients/ClientTable.tsx:118",children:d.map(t=>e.jsxs(re,{"data-loc":"client/src/components/clients/ClientTable.tsx:120",className:a.has(t.id)?"bg-primary/5":"",children:[e.jsx(M,{"data-loc":"client/src/components/clients/ClientTable.tsx:124",children:e.jsx(H,{"data-loc":"client/src/components/clients/ClientTable.tsx:125",checked:a.has(t.id),onCheckedChange:l=>c(t.id,!!l),"aria-label":`Select ${t.name}`})}),e.jsx(M,{"data-loc":"client/src/components/clients/ClientTable.tsx:133",className:"font-medium",children:t.name}),e.jsx(M,{"data-loc":"client/src/components/clients/ClientTable.tsx:134",children:e.jsxs("div",{"data-loc":"client/src/components/clients/ClientTable.tsx:135",className:"space-y-1",children:[t.email&&e.jsxs("div",{"data-loc":"client/src/components/clients/ClientTable.tsx:137",className:"flex items-center gap-2 text-sm",children:[e.jsx(ne,{"data-loc":"client/src/components/clients/ClientTable.tsx:138",className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{"data-loc":"client/src/components/clients/ClientTable.tsx:139",children:t.email})]}),t.phone&&e.jsxs("div",{"data-loc":"client/src/components/clients/ClientTable.tsx:143",className:"flex items-center gap-2 text-sm",children:[e.jsx(je,{"data-loc":"client/src/components/clients/ClientTable.tsx:144",className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{"data-loc":"client/src/components/clients/ClientTable.tsx:145",children:t.phone})]}),!t.email&&!t.phone&&e.jsx("span",{"data-loc":"client/src/components/clients/ClientTable.tsx:149",className:"text-sm text-muted-foreground",children:"No contact info"})]})}),e.jsx(M,{"data-loc":"client/src/components/clients/ClientTable.tsx:155",children:t.companyName||e.jsx("span",{"data-loc":"client/src/components/clients/ClientTable.tsx:157",className:"text-muted-foreground",children:"—"})}),e.jsx(M,{"data-loc":"client/src/components/clients/ClientTable.tsx:160",children:e.jsx("div",{"data-loc":"client/src/components/clients/ClientTable.tsx:161",className:"flex flex-wrap gap-1",children:(j.get(t.id)||[]).map(l=>e.jsx(Re,{"data-loc":"client/src/components/clients/ClientTable.tsx:163",variant:"secondary",className:"text-xs cursor-pointer hover:opacity-80 pr-1",style:{backgroundColor:l.color+"20",color:l.color,borderColor:l.color},title:"Click to remove tag",onClick:()=>w.mutate({clientId:t.id,tagId:l.id}),children:l.name},l.id))})}),e.jsx(M,{"data-loc":"client/src/components/clients/ClientTable.tsx:185",children:t.vatNumber||e.jsx("span",{"data-loc":"client/src/components/clients/ClientTable.tsx:187",className:"text-muted-foreground",children:"—"})}),e.jsx(M,{"data-loc":"client/src/components/clients/ClientTable.tsx:190",className:"text-right",children:e.jsxs(_e,{"data-loc":"client/src/components/clients/ClientTable.tsx:191",children:[e.jsx(Ue,{"data-loc":"client/src/components/clients/ClientTable.tsx:192",asChild:!0,children:e.jsx("button",{"data-loc":"client/src/components/clients/ClientTable.tsx:193",type:"button",className:"p-2 hover:bg-muted/50 rounded transition-colors","aria-label":"Actions",children:"•••"})}),e.jsxs(qe,{"data-loc":"client/src/components/clients/ClientTable.tsx:201",align:"end",className:"w-56",children:[e.jsx(W,{"data-loc":"client/src/components/clients/ClientTable.tsx:202",onClick:()=>b(t),children:e.jsxs("div",{"data-loc":"client/src/components/clients/ClientTable.tsx:205",className:"flex items-center gap-2",children:[e.jsx(oe,{"data-loc":"client/src/components/clients/ClientTable.tsx:206",className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{"data-loc":"client/src/components/clients/ClientTable.tsx:207",className:"text-sm",children:"Edit"})]})}),N&&e.jsx(W,{"data-loc":"client/src/components/clients/ClientTable.tsx:211",onClick:()=>N(t),children:e.jsxs("div",{"data-loc":"client/src/components/clients/ClientTable.tsx:214",className:"flex items-center gap-2",children:[e.jsx(Fe,{"data-loc":"client/src/components/clients/ClientTable.tsx:215",className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{"data-loc":"client/src/components/clients/ClientTable.tsx:216",className:"text-sm",children:"Duplicate"})]})}),e.jsx(Me,{"data-loc":"client/src/components/clients/ClientTable.tsx:220"}),e.jsx(W,{"data-loc":"client/src/components/clients/ClientTable.tsx:221",onClick:()=>x(t),className:"text-destructive",children:e.jsxs("div",{"data-loc":"client/src/components/clients/ClientTable.tsx:225",className:"flex items-center gap-2",children:[e.jsx(ie,{"data-loc":"client/src/components/clients/ClientTable.tsx:226",className:"h-3 w-3"}),e.jsx("span",{"data-loc":"client/src/components/clients/ClientTable.tsx:227",className:"text-sm",children:"Delete"})]})}),e.jsx(Me,{"data-loc":"client/src/components/clients/ClientTable.tsx:230"}),e.jsx(W,{"data-loc":"client/src/components/clients/ClientTable.tsx:231",onClick:()=>T(t),children:e.jsxs("div",{"data-loc":"client/src/components/clients/ClientTable.tsx:234",className:"flex items-center gap-2",children:[e.jsx(L,{"data-loc":"client/src/components/clients/ClientTable.tsx:235",className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{"data-loc":"client/src/components/clients/ClientTable.tsx:236",className:"text-sm",children:"Portal Access"})]})})]})]})})]},t.id))})]})}),e.jsx("div",{"data-loc":"client/src/components/clients/ClientTable.tsx:248",className:"px-5 pb-5 md:hidden",children:e.jsx("div",{"data-loc":"client/src/components/clients/ClientTable.tsx:249",className:"space-y-3",children:d.map(t=>e.jsxs("div",{"data-loc":"client/src/components/clients/ClientTable.tsx:251",className:`p-4 rounded-lg border border-border/50 bg-card/50 ${a.has(t.id)?"ring-2 ring-primary/50":""}`,children:[e.jsxs("div",{"data-loc":"client/src/components/clients/ClientTable.tsx:255",className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{"data-loc":"client/src/components/clients/ClientTable.tsx:256",className:"flex items-start gap-3",children:[e.jsx(H,{"data-loc":"client/src/components/clients/ClientTable.tsx:257",checked:a.has(t.id),onCheckedChange:l=>c(t.id,!!l),"aria-label":`Select ${t.name}`}),e.jsxs("div",{"data-loc":"client/src/components/clients/ClientTable.tsx:264",className:"flex-1 min-w-0",children:[e.jsx("h4",{"data-loc":"client/src/components/clients/ClientTable.tsx:265",className:"font-medium text-foreground truncate",children:t.name}),t.companyName&&e.jsx("p",{"data-loc":"client/src/components/clients/ClientTable.tsx:269",className:"text-sm text-muted-foreground truncate",children:t.companyName})]})]}),e.jsxs("div",{"data-loc":"client/src/components/clients/ClientTable.tsx:275",className:"flex items-center gap-1",children:[e.jsx(C,{"data-loc":"client/src/components/clients/ClientTable.tsx:276",variant:"ghost",size:"sm",onClick:()=>T(t),"aria-label":`Manage portal access for ${t.name}`,children:e.jsx(L,{"data-loc":"client/src/components/clients/ClientTable.tsx:282",className:"h-4 w-4"})}),e.jsx(C,{"data-loc":"client/src/components/clients/ClientTable.tsx:284",variant:"ghost",size:"sm",onClick:()=>b(t),"aria-label":`Edit ${t.name}`,children:e.jsx(oe,{"data-loc":"client/src/components/clients/ClientTable.tsx:290",className:"h-4 w-4"})}),e.jsx(C,{"data-loc":"client/src/components/clients/ClientTable.tsx:292",variant:"ghost",size:"sm",onClick:()=>x(t),className:"text-destructive hover:text-destructive","aria-label":`Delete ${t.name}`,children:e.jsx(ie,{"data-loc":"client/src/components/clients/ClientTable.tsx:299",className:"h-4 w-4"})})]})]}),e.jsxs("div",{"data-loc":"client/src/components/clients/ClientTable.tsx:303",className:"mt-3 space-y-1.5 text-sm",children:[t.email&&e.jsxs("div",{"data-loc":"client/src/components/clients/ClientTable.tsx:305",className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(ne,{"data-loc":"client/src/components/clients/ClientTable.tsx:306",className:"h-3 w-3"}),e.jsx("span",{"data-loc":"client/src/components/clients/ClientTable.tsx:307",className:"truncate",children:t.email})]}),t.phone&&e.jsxs("div",{"data-loc":"client/src/components/clients/ClientTable.tsx:311",className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(je,{"data-loc":"client/src/components/clients/ClientTable.tsx:312",className:"h-3 w-3"}),e.jsx("span",{"data-loc":"client/src/components/clients/ClientTable.tsx:313",children:t.phone})]}),t.address&&e.jsxs("div",{"data-loc":"client/src/components/clients/ClientTable.tsx:317",className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(Oe,{"data-loc":"client/src/components/clients/ClientTable.tsx:318",className:"h-3 w-3 flex-shrink-0"}),e.jsx("span",{"data-loc":"client/src/components/clients/ClientTable.tsx:319",className:"truncate",children:t.address})]})]})]},t.id))})})]})}const Ws={name:"name","client name":"name",client_name:"name","contact name":"name",contact_name:"name",email:"email","email address":"email",email_address:"email",company:"companyName","company name":"companyName",company_name:"companyName",organization:"companyName",address:"address","street address":"address",street_address:"address","full address":"address",phone:"phone","phone number":"phone",phone_number:"phone",telephone:"phone",mobile:"phone",notes:"notes",note:"notes",comments:"notes",vat:"vatNumber","vat number":"vatNumber",vat_number:"vatNumber","tax id":"vatNumber",tax_id:"vatNumber"};function Hs(d){const o=d.split(/\r?\n/).filter(x=>x.trim());if(o.length===0)return{success:!1,clients:[],errors:[{row:0,field:"file",message:"CSV file is empty"}],totalRows:0,validRows:0,duplicates:[]};const a=o[0],i=Be(a).map(x=>x.toLowerCase().trim()),m=new Map;let c=!1;if(i.forEach((x,T)=>{const N=Ws[x];N&&(m.set(T,N),N==="name"&&(c=!0))}),!c)return{success:!1,clients:[],errors:[{row:1,field:"header",message:'Missing required "name" column. Expected column headers: name, email, company, address, phone, notes, vat number'}],totalRows:o.length-1,validRows:0,duplicates:[]};const u=[],j=[],w=new Map,b=[];for(let x=1;x<o.length;x++){const T=o[x].trim();if(!T)continue;const N=Be(T),t={name:""};let l=!1;if(m.forEach((V,$)=>{const A=N[$]?.trim()||"";A&&(t[V]=A)}),t.name||(j.push({row:x+1,field:"name",message:"Name is required"}),l=!0),t.email&&!Ks(t.email)&&(j.push({row:x+1,field:"email",message:"Invalid email format",value:t.email}),l=!0),t.email){const V=t.email.toLowerCase();w.has(V)?(b.push(t.email),j.push({row:x+1,field:"email",message:`Duplicate email (first seen in row ${w.get(V)})`,value:t.email})):w.set(V,x+1)}t.phone&&!Xs(t.phone)&&j.push({row:x+1,field:"phone",message:"Invalid phone format",value:t.phone}),t.vatNumber&&!Js(t.vatNumber)&&j.push({row:x+1,field:"vatNumber",message:"Invalid VAT number format (expected format: XX123456789)",value:t.vatNumber}),l||u.push(t)}return{success:j.filter(x=>x.field==="name"||x.field==="email").length===0,clients:u,errors:j,totalRows:o.length-1,validRows:u.length,duplicates:Array.from(new Set(b))}}function Be(d){const o=[];let a="",i=!1;for(let m=0;m<d.length;m++){const c=d[m],u=d[m+1];c==='"'?i&&u==='"'?(a+='"',m++):i=!i:c===","&&!i?(o.push(a.trim()),a=""):a+=c}return o.push(a.trim()),o}function Ks(d){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(d)}function Xs(d){const o=/^[\d\s\-\(\)\+\.]+$/,a=d.replace(/\D/g,"");return o.test(d)&&a.length>=7}function Js(d){return/^[A-Z]{2}[A-Z0-9]{8,12}$/i.test(d.replace(/\s/g,""))}function Zs(){const d=["Name","Email","Company Name","Address","Phone","Notes","VAT Number"],o=[["John Smith","john@example.com","Acme Corp","123 Main St, New York, NY 10001","+1 (555) 123-4567","VIP client",""],["Jane Doe","jane@company.com","Tech Solutions Ltd","456 Oak Ave, San Francisco, CA 94102","555-987-6543","Monthly retainer","DE123456789"],["Bob Wilson","bob@startup.io","Startup Inc","789 Pine Rd, Austin, TX 78701","","New client",""]];return[d.join(","),...o.map(i=>i.map(m=>m.includes(",")||m.includes('"')?`"${m.replace(/"/g,'""')}"`:m).join(","))].join(`
`)}function et({open:d,onOpenChange:o,onSuccess:a}){const[i,m]=r.useState("upload"),[c,u]=r.useState(null),[j,w]=r.useState(!0),[b,x]=r.useState(null),[T,N]=r.useState(!1),t=y.clients.import.useMutation({onSuccess:h=>{x(h),m("complete"),h.imported>0&&(g.success(`Successfully imported ${h.imported} clients`),a())},onError:h=>{g.error(`Import failed: ${h.message}`),m("preview")}}),l=r.useCallback(h=>{if(!h.name.endsWith(".csv")){g.error("Please select a CSV file");return}const S=new FileReader;S.onload=D=>{const P=D.target?.result,xe=Hs(P);u(xe),m("preview")},S.onerror=()=>{g.error("Failed to read file")},S.readAsText(h)},[]),V=r.useCallback(h=>{h.preventDefault(),N(!1);const S=h.dataTransfer.files[0];S&&l(S)},[l]),$=r.useCallback(h=>{h.preventDefault(),N(!0)},[]),A=r.useCallback(h=>{h.preventDefault(),N(!1)},[]),q=()=>{!c||c.clients.length===0||(m("importing"),t.mutate({clients:c.clients,skipDuplicates:j}))},de=()=>{const h=Zs(),S=new Blob([h],{type:"text/csv"}),D=URL.createObjectURL(S),P=document.createElement("a");P.href=D,P.download="client-import-template.csv",P.click(),URL.revokeObjectURL(D)},O=()=>{m("upload"),u(null),x(null),o(!1)},X=()=>e.jsxs("div",{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:152",className:"space-y-4",children:[e.jsxs("div",{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:153",className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${T?"border-primary bg-primary/5":"border-border"}`,onDrop:V,onDragOver:$,onDragLeave:A,children:[e.jsx(Le,{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:161",className:"h-10 w-10 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:162",className:"text-sm text-muted-foreground mb-2",children:"Drag and drop your CSV file here, or"}),e.jsxs("label",{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:165",className:"cursor-pointer",children:[e.jsx("input",{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:166",type:"file",accept:".csv",className:"hidden",onChange:h=>{const S=h.target.files?.[0];S&&l(S)}}),e.jsx(C,{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:175",variant:"outline",asChild:!0,children:e.jsx("span",{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:176",children:"Browse Files"})})]})]}),e.jsxs("div",{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:181",className:"flex items-center justify-between p-3 bg-secondary/50 rounded-lg",children:[e.jsxs("div",{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:182",className:"flex items-center gap-2",children:[e.jsx($e,{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:183",className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:184",className:"text-sm",children:"Need a template?"})]}),e.jsxs(C,{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:186",variant:"ghost",size:"sm",onClick:de,children:[e.jsx(Ps,{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:187",className:"h-4 w-4 mr-2"}),"Download CSV Template"]})]}),e.jsxs(ce,{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:192",children:[e.jsx(te,{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:193",className:"h-4 w-4"}),e.jsx(le,{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:194",children:"Your CSV should include columns: Name (required), Email, Company Name, Address, Phone, Notes, VAT Number"})]})]}),Te=()=>{if(!c)return null;const h=c.errors.length>0,S=c.errors.filter(D=>D.field==="name"||D.field==="header");return e.jsxs("div",{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:211",className:"space-y-4",children:[e.jsxs("div",{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:213",className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:214",className:"p-3 bg-secondary/50 rounded-lg text-center",children:[e.jsx("div",{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:215",className:"text-2xl font-bold",children:c.totalRows}),e.jsx("div",{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:216",className:"text-xs text-muted-foreground",children:"Total Rows"})]}),e.jsxs("div",{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:218",className:"p-3 bg-green-500/10 rounded-lg text-center",children:[e.jsx("div",{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:219",className:"text-2xl font-bold text-green-500",children:c.validRows}),e.jsx("div",{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:222",className:"text-xs text-muted-foreground",children:"Valid"})]}),e.jsxs("div",{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:224",className:"p-3 bg-destructive/10 rounded-lg text-center",children:[e.jsx("div",{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:225",className:"text-2xl font-bold text-destructive",children:c.errors.length}),e.jsx("div",{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:228",className:"text-xs text-muted-foreground",children:"Issues"})]})]}),h&&e.jsxs(ce,{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:234",variant:S.length>0?"destructive":"default",children:[e.jsx(te,{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:237",className:"h-4 w-4"}),e.jsxs(le,{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:238",children:[e.jsx("div",{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:239",className:"font-medium mb-1",children:S.length>0?"Critical errors found:":"Warnings:"}),e.jsxs("ul",{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:244",className:"text-sm list-disc list-inside max-h-24 overflow-y-auto",children:[c.errors.slice(0,5).map((D,P)=>e.jsxs("li",{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:246",children:["Row ",D.row,": ",D.message,D.value&&e.jsxs("span",{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:249",className:"text-muted-foreground",children:[" ","(",D.value,")"]})]},P)),c.errors.length>5&&e.jsxs("li",{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:257",className:"text-muted-foreground",children:["...and ",c.errors.length-5," more"]})]})]})]}),c.duplicates.length>0&&e.jsxs(ce,{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:268",children:[e.jsx(te,{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:269",className:"h-4 w-4"}),e.jsxs(le,{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:270",children:["Found ",c.duplicates.length," duplicate email(s) in CSV file"]})]}),c.clients.length>0&&e.jsxs("div",{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:279",className:"border rounded-lg overflow-hidden",children:[e.jsx("div",{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:280",className:"max-h-64 overflow-y-auto",children:e.jsxs(Ge,{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:281",children:[e.jsx(Qe,{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:282",children:e.jsxs(re,{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:283",children:[e.jsx(z,{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:284",children:"Name"}),e.jsx(z,{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:285",children:"Email"}),e.jsx(z,{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:286",children:"Company"}),e.jsx(z,{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:287",children:"Phone"})]})}),e.jsx(Ye,{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:290",children:c.clients.slice(0,10).map((D,P)=>e.jsxs(re,{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:292",children:[e.jsx(M,{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:293",className:"font-medium",children:D.name}),e.jsx(M,{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:296",children:D.email||"-"}),e.jsx(M,{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:297",children:D.companyName||"-"}),e.jsx(M,{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:298",children:D.phone||"-"})]},P))})]})}),c.clients.length>10&&e.jsxs("div",{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:305",className:"p-2 text-center text-sm text-muted-foreground bg-secondary/50",children:["Showing 10 of ",c.clients.length," clients"]})]}),e.jsxs("div",{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:313",className:"flex items-center space-x-2",children:[e.jsx(H,{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:314",id:"skipDuplicates",checked:j,onCheckedChange:D=>w(D)}),e.jsx(K,{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:319",htmlFor:"skipDuplicates",className:"text-sm",children:"Skip clients with emails that already exist"})]})]})},me=()=>e.jsxs("div",{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:328",className:"py-8 text-center",children:[e.jsx(Y,{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:329",className:"h-10 w-10 mx-auto animate-spin text-primary mb-4"}),e.jsx("p",{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:330",className:"text-muted-foreground",children:"Importing clients..."})]}),k=()=>b?e.jsxs("div",{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:338",className:"space-y-4",children:[e.jsxs("div",{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:339",className:"py-4 text-center",children:[e.jsx(Vs,{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:340",className:"h-12 w-12 mx-auto text-green-500 mb-4"}),e.jsx("h3",{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:341",className:"text-lg font-semibold mb-2",children:"Import Complete"})]}),e.jsxs("div",{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:344",className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:345",className:"p-3 bg-green-500/10 rounded-lg text-center",children:[e.jsx("div",{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:346",className:"text-2xl font-bold text-green-500",children:b.imported}),e.jsx("div",{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:349",className:"text-xs text-muted-foreground",children:"Imported"})]}),e.jsxs("div",{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:351",className:"p-3 bg-yellow-500/10 rounded-lg text-center",children:[e.jsx("div",{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:352",className:"text-2xl font-bold text-yellow-500",children:b.skipped}),e.jsx("div",{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:355",className:"text-xs text-muted-foreground",children:"Skipped"})]}),e.jsxs("div",{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:357",className:"p-3 bg-destructive/10 rounded-lg text-center",children:[e.jsx("div",{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:358",className:"text-2xl font-bold text-destructive",children:b.errors.length}),e.jsx("div",{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:361",className:"text-xs text-muted-foreground",children:"Errors"})]})]}),b.errors.length>0&&e.jsxs(ce,{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:366",variant:"destructive",children:[e.jsx(te,{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:367",className:"h-4 w-4"}),e.jsx(le,{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:368",children:e.jsx("ul",{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:369",className:"text-sm list-disc list-inside",children:b.errors.map((h,S)=>e.jsxs("li",{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:371",children:["Row ",h.index+1,": ",h.message]},S))})})]})]}):null;return e.jsx(fe,{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:384",open:d,onOpenChange:O,children:e.jsxs(be,{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:385",className:"sm:max-w-[600px]",children:[e.jsxs(Ne,{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:386",children:[e.jsxs(De,{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:387",className:"flex items-center gap-2.5",children:[e.jsx("div",{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:388",className:"flex size-8 items-center justify-center rounded-lg bg-primary/10",children:e.jsx(Is,{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:389",className:"size-4 text-primary"})}),i==="upload"&&"Import Clients from CSV",i==="preview"&&"Preview Import",i==="importing"&&"Importing...",i==="complete"&&"Import Complete"]}),e.jsxs(ve,{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:396",children:[i==="upload"&&"Upload a CSV file to bulk import clients",i==="preview"&&"Review the data before importing",i==="importing"&&"Please wait while we import your clients",i==="complete"&&"Your clients have been imported"]})]}),e.jsxs(ze,{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:404",children:[i==="upload"&&X(),i==="preview"&&Te(),i==="importing"&&me(),i==="complete"&&k()]}),i==="upload"&&e.jsx(ae,{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:412",onClose:O,cancelText:"Cancel"}),i==="preview"&&e.jsx(ae,{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:415",onClose:()=>m("upload"),onSubmit:q,submitText:`Import ${c?.clients.length||0} Clients`,cancelText:"Back",disabled:!c||c.clients.length===0}),i==="complete"&&e.jsx(ae,{"data-loc":"client/src/components/clients/CSVImportDialog.tsx:424",onClose:O,submitText:"Done",cancelText:""})]})})}function st({rows:d=10}){return e.jsxs("div",{"data-loc":"client/src/components/skeletons/TableSkeleton.tsx:106",className:"rounded-lg border border-border overflow-hidden",children:[e.jsxs("div",{"data-loc":"client/src/components/skeletons/TableSkeleton.tsx:108",className:"grid grid-cols-[1fr_1fr_1fr_1fr_1fr_auto] gap-4 px-4 py-3 bg-muted/30 border-b border-border",children:[e.jsx(I,{"data-loc":"client/src/components/skeletons/TableSkeleton.tsx:109",className:"h-4 w-16"}),e.jsx(I,{"data-loc":"client/src/components/skeletons/TableSkeleton.tsx:110",className:"h-4 w-20"}),e.jsx(I,{"data-loc":"client/src/components/skeletons/TableSkeleton.tsx:111",className:"h-4 w-20"}),e.jsx(I,{"data-loc":"client/src/components/skeletons/TableSkeleton.tsx:112",className:"h-4 w-12"}),e.jsx(I,{"data-loc":"client/src/components/skeletons/TableSkeleton.tsx:113",className:"h-4 w-20"}),e.jsx(I,{"data-loc":"client/src/components/skeletons/TableSkeleton.tsx:114",className:"h-4 w-16"})]}),e.jsx("div",{"data-loc":"client/src/components/skeletons/TableSkeleton.tsx:118",className:"divide-y divide-border",children:Array.from({length:d}).map((o,a)=>e.jsxs("div",{"data-loc":"client/src/components/skeletons/TableSkeleton.tsx:120",className:"grid grid-cols-[1fr_1fr_1fr_1fr_1fr_auto] gap-4 px-4 py-4 items-center",children:[e.jsx("div",{"data-loc":"client/src/components/skeletons/TableSkeleton.tsx:125",className:"space-y-1",children:e.jsx(I,{"data-loc":"client/src/components/skeletons/TableSkeleton.tsx:126",className:"h-4 w-32"})}),e.jsxs("div",{"data-loc":"client/src/components/skeletons/TableSkeleton.tsx:129",className:"space-y-1",children:[e.jsx(I,{"data-loc":"client/src/components/skeletons/TableSkeleton.tsx:130",className:"h-3 w-36"}),e.jsx(I,{"data-loc":"client/src/components/skeletons/TableSkeleton.tsx:131",className:"h-3 w-24"})]}),e.jsx(I,{"data-loc":"client/src/components/skeletons/TableSkeleton.tsx:134",className:"h-4 w-28"}),e.jsx(I,{"data-loc":"client/src/components/skeletons/TableSkeleton.tsx:136",className:"h-4 w-16"}),e.jsx(I,{"data-loc":"client/src/components/skeletons/TableSkeleton.tsx:138",className:"h-4 w-32"}),e.jsxs("div",{"data-loc":"client/src/components/skeletons/TableSkeleton.tsx:140",className:"flex items-center gap-1",children:[e.jsx(I,{"data-loc":"client/src/components/skeletons/TableSkeleton.tsx:141",className:"h-8 w-8 rounded-lg"}),e.jsx(I,{"data-loc":"client/src/components/skeletons/TableSkeleton.tsx:142",className:"h-8 w-8 rounded-lg"}),e.jsx(I,{"data-loc":"client/src/components/skeletons/TableSkeleton.tsx:143",className:"h-8 w-8 rounded-lg"})]})]},a))})]})}function St(){const{loading:d,isAuthenticated:o}=fs(),[a,i]=r.useState(""),[m,c]=r.useState(!1),[u,j]=r.useState(!1),[w,b]=r.useState(!1),[x,T]=r.useState(!1),[N,t]=r.useState(null),[l,V]=r.useState(null),[$,A]=r.useState(!1),[q,de]=r.useState("name"),[O,X]=r.useState("asc"),[Te,me]=r.useState(!1),{filters:k,clearFilters:h,hasActiveFilters:S}=Ls({pageKey:"clients",filters:[{key:"company",defaultValue:"all"},{key:"taxExempt",defaultValue:"all"},{key:"dateRange",defaultValue:"all"},{key:"tag",defaultValue:"all"}]}),[D,P]=r.useState(!1),[xe,we]=r.useState(null),[We,pe]=r.useState(""),[He,ge]=r.useState("#6366f1"),[ue,J]=r.useState(new Map),[B,_]=r.useState(new Set),[he,ke]=r.useState(1),[G,Ke]=r.useState(25);r.useEffect(()=>{const s=()=>{t(null),c(!0)};return window.addEventListener("open-new-client-dialog",s),()=>window.removeEventListener("open-new-client-dialog",s)},[]);const{data:R,isLoading:Xe}=y.clients.list.useQuery(void 0,{enabled:o}),F=y.useUtils(),{pushUndoAction:tt}=bs(),{executeDelete:Je}=Os(),Ze=y.clients.delete.useMutation({onSuccess:()=>{},onError:(s,n)=>{F.clients.list.invalidate(),g.error(s.message||"Failed to delete client. Item has been restored.")}}),es=y.clients.bulkDelete.useMutation({onSuccess:s=>{F.clients.list.invalidate(),_(new Set),g.success(`Successfully deleted ${s.deletedCount} client(s)`)},onError:s=>{g.error(s.message||"Failed to delete clients")}}),{data:Z}=y.clients.listTags.useQuery(void 0,{enabled:o}),ss=y.clients.createTag.useMutation({onSuccess:()=>{F.clients.listTags.invalidate(),P(!1),pe(""),ge("#6366f1"),g.success("Tag created successfully")},onError:s=>{g.error(s.message||"Failed to create tag")}}),ts=y.clients.updateTag.useMutation({onSuccess:()=>{F.clients.listTags.invalidate(),P(!1),we(null),pe(""),ge("#6366f1"),g.success("Tag updated successfully")},onError:s=>{g.error(s.message||"Failed to update tag")}}),cs=y.clients.deleteTag.useMutation({onSuccess:()=>{F.clients.listTags.invalidate(),g.success("Tag deleted successfully")},onError:s=>{g.error(s.message||"Failed to delete tag")}});y.clients.assignTag.useMutation({onSuccess:(s,n)=>{const p=Z?.find(f=>f.id===n.tagId);p&&J(f=>{const v=new Map(f),E=v.get(n.clientId)||[];return E.find(se=>se.id===p.id)||v.set(n.clientId,[...E,p]),v}),g.success("Tag assigned")},onError:s=>{g.error(s.message||"Failed to assign tag")}});const ls=y.clients.removeTag.useMutation({onSuccess:(s,n)=>{J(p=>{const f=new Map(p),v=f.get(n.clientId)||[];return f.set(n.clientId,v.filter(E=>E.id!==n.tagId)),f}),g.success("Tag removed")},onError:s=>{g.error(s.message||"Failed to remove tag")}}),as=y.clients.bulkAssignTag.useMutation({onSuccess:(s,n)=>{const p=Z?.find(f=>f.id===n.tagId);p&&J(f=>{const v=new Map(f);for(const E of n.clientIds){const se=v.get(E)||[];se.find(hs=>hs.id===p.id)||v.set(E,[...se,p])}return v}),_(new Set),g.success(`Tag assigned to ${s.assignedCount} client(s)`)},onError:s=>{g.error(s.message||"Failed to assign tags")}});r.useEffect(()=>{R&&o&&(async()=>{try{const n=R.map(v=>v.id),p=await F.clients.getClientTagsForMultiple.fetch({clientIds:n}),f=new Map;Object.entries(p).forEach(([v,E])=>{f.set(parseInt(v),E)}),J(f)}catch(n){console.error("Failed to load client tags:",n)}})()},[R,o]);const U=r.useMemo(()=>({key:q,direction:O}),[q,O]),ns=s=>{const n=s;q===n?X(O==="asc"?"desc":"asc"):(de(n),X("asc"))},Q=r.useMemo(()=>{if(!R)return[];let s=[...R];if(a){const n=a.toLowerCase();s=s.filter(p=>p.name.toLowerCase().includes(n)||p.email?.toLowerCase().includes(n)||p.phone?.includes(n)||p.companyName?.toLowerCase().includes(n))}if(k.tag&&k.tag!=="all"&&(s=s.filter(n=>(ue.get(n.id)||[]).some(f=>f.id===parseInt(k.tag)))),k.company&&k.company!=="all"&&(s=s.filter(n=>k.company==="with"?n.companyName:!n.companyName)),k.taxExempt&&k.taxExempt!=="all"&&(s=s.filter(n=>k.taxExempt==="yes"?n.taxExempt:!n.taxExempt)),k.dateRange&&k.dateRange!=="all"){const n=new Date,p=new Date(n.getTime()-720*60*60*1e3),f=new Date(n.getTime()-2160*60*60*1e3);s=s.filter(v=>{const E=new Date(v.createdAt);return k.dateRange==="30"?E>=p:k.dateRange==="90"?E>=f:!0})}return s.sort((n,p)=>{let f,v;return U.key==="name"?(f=n.name,v=p.name):U.key==="email"?(f=n.email||"",v=p.email||""):U.key==="createdAt"&&(f=new Date(n.createdAt).getTime(),v=new Date(p.createdAt).getTime()),U.direction==="asc"?f>v?1:-1:f<v?1:-1}),s},[R,a,U,k,ue]),ye=Q.length,os=Math.ceil(ye/G),ee=r.useMemo(()=>{const s=(he-1)*G;return Q.slice(s,s+G)},[Q,he,G]),is=s=>{ke(s)},rs=s=>{Ke(s),ke(1)},Ae=(s,n)=>{const p=new Set(B);n?p.add(s):p.delete(s),_(p)},ds=B.size>0,ms=s=>{t(s),c(!0)},xs=s=>{t(s),j(!0)},Ie=s=>{V(s),b(!0)},ps=()=>{l&&Je({item:l,itemName:l.name,itemType:"client",onOptimisticDelete:()=>{b(!1),V(null)},onRestore:()=>{F.clients.list.invalidate()},onConfirmDelete:async()=>{await Ze.mutateAsync({id:l.id})}})},gs=()=>{T(!0)},us=()=>{es.mutate({ids:Array.from(B)}),T(!1)};return!o||d?e.jsx("div",{"data-loc":"client/src/pages/Clients.tsx:526",className:"flex items-center justify-center h-screen",children:e.jsx(Ns,{"data-loc":"client/src/pages/Clients.tsx:527"})}):e.jsxs("div",{"data-loc":"client/src/pages/Clients.tsx:533",className:"min-h-screen bg-background",children:[e.jsx(zs,{"data-loc":"client/src/pages/Clients.tsx:534"}),e.jsx("main",{"data-loc":"client/src/pages/Clients.tsx:535",className:"container mx-auto py-8",children:e.jsxs("div",{"data-loc":"client/src/pages/Clients.tsx:536",className:"space-y-6",children:[e.jsxs("div",{"data-loc":"client/src/pages/Clients.tsx:538",className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{"data-loc":"client/src/pages/Clients.tsx:539",children:[e.jsx("h1",{"data-loc":"client/src/pages/Clients.tsx:540",className:"text-3xl font-bold",children:"Clients"}),e.jsx("p",{"data-loc":"client/src/pages/Clients.tsx:541",className:"text-muted-foreground mt-1",children:"Manage your client information and communication"})]}),e.jsxs("div",{"data-loc":"client/src/pages/Clients.tsx:545",className:"flex flex-wrap gap-2",children:[e.jsxs(C,{"data-loc":"client/src/pages/Clients.tsx:546",variant:"outline",onClick:()=>A(!0),children:[e.jsx(Le,{"data-loc":"client/src/pages/Clients.tsx:550",className:"h-4 w-4 mr-2"}),"Import CSV"]}),e.jsxs(C,{"data-loc":"client/src/pages/Clients.tsx:553",onClick:()=>{t(null),c(!0)},children:[e.jsx(Es,{"data-loc":"client/src/pages/Clients.tsx:557",className:"h-4 w-4 mr-2"}),"New Client"]})]})]}),e.jsx(Pe,{"data-loc":"client/src/pages/Clients.tsx:564",children:e.jsx(Ve,{"data-loc":"client/src/pages/Clients.tsx:565",className:"pt-6",children:e.jsxs("div",{"data-loc":"client/src/pages/Clients.tsx:566",className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{"data-loc":"client/src/pages/Clients.tsx:567",className:"flex-1 relative",children:[e.jsx(Ms,{"data-loc":"client/src/pages/Clients.tsx:568",className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(Se,{"data-loc":"client/src/pages/Clients.tsx:569",placeholder:"Search by name, email, or company...",value:a,onChange:s=>i(s.target.value),className:"pl-10"})]}),e.jsxs("div",{"data-loc":"client/src/pages/Clients.tsx:576",className:"flex gap-2",children:[e.jsxs(C,{"data-loc":"client/src/pages/Clients.tsx:577",variant:S?"default":"outline",onClick:()=>me(!0),children:[e.jsx(Bs,{"data-loc":"client/src/pages/Clients.tsx:581",className:"h-4 w-4 mr-2"}),"Filters ",S&&`(${Object.values(k).filter(s=>s!=="all").length})`]}),S&&e.jsx(C,{"data-loc":"client/src/pages/Clients.tsx:585",variant:"ghost",onClick:()=>h(),children:"Clear"})]})]})})}),e.jsx("div",{"data-loc":"client/src/pages/Clients.tsx:598",children:Xe?e.jsx(st,{"data-loc":"client/src/pages/Clients.tsx:600"}):R&&R.length===0?e.jsx(_s,{"data-loc":"client/src/pages/Clients.tsx:602",...Us.clients}):Q.length===0?e.jsx(Pe,{"data-loc":"client/src/pages/Clients.tsx:604",children:e.jsx(Ve,{"data-loc":"client/src/pages/Clients.tsx:605",className:"pt-12 pb-12 text-center",children:e.jsx("p",{"data-loc":"client/src/pages/Clients.tsx:606",className:"text-muted-foreground",children:"No clients match your filters"})})}):e.jsxs(e.Fragment,{children:[e.jsx(Qs,{"data-loc":"client/src/pages/Clients.tsx:613",isSomeSelected:ds,selectedIds:B,setSelectedIds:_,tags:Z,bulkAssignTag:as,handleBulkDelete:gs}),e.jsx(Ys,{"data-loc":"client/src/pages/Clients.tsx:622",paginatedClients:ee,filteredAndSortedClients:Q,selectedIds:B,currentSort:U,handleSort:ns,handleSelectOne:Ae,toggleSelectAll:()=>{B.size===ee.length?_(new Set):_(new Set(ee.map(s=>s.id)))},clientTagsMap:ue,removeTagMutation:ls,onEdit:s=>{t(s),c(!0)},onDelete:s=>Ie(s),onPortalAccess:s=>{t(s),j(!0)},onDuplicate:s=>{const n={...s,id:0,name:`${s.name} (Copy)`};t(n),c(!0)}}),e.jsx("div",{"data-loc":"client/src/pages/Clients.tsx:660",className:"md:hidden space-y-3",children:ee.map(s=>e.jsxs("div",{"data-loc":"client/src/pages/Clients.tsx:662",className:`p-4 rounded-lg border border-border/50 bg-card/50 ${B.has(s.id)?"ring-2 ring-primary/50":""}`,children:[e.jsxs("div",{"data-loc":"client/src/pages/Clients.tsx:666",className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{"data-loc":"client/src/pages/Clients.tsx:667",className:"flex items-start gap-3",children:[e.jsx(H,{"data-loc":"client/src/pages/Clients.tsx:668",checked:B.has(s.id),onCheckedChange:n=>Ae(s.id,!!n),"aria-label":`Select ${s.name}`}),e.jsxs("div",{"data-loc":"client/src/pages/Clients.tsx:675",className:"flex-1 min-w-0",children:[e.jsx("h4",{"data-loc":"client/src/pages/Clients.tsx:676",className:"font-medium text-foreground truncate",children:s.name}),s.companyName&&e.jsx("p",{"data-loc":"client/src/pages/Clients.tsx:680",className:"text-sm text-muted-foreground truncate",children:s.companyName})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/Clients.tsx:686",className:"flex items-center gap-1",children:[e.jsx(C,{"data-loc":"client/src/pages/Clients.tsx:687",variant:"ghost",size:"sm",onClick:()=>xs(s),"aria-label":`Manage portal access for ${s.name}`,children:e.jsx(L,{"data-loc":"client/src/pages/Clients.tsx:693",className:"h-4 w-4"})}),e.jsx(C,{"data-loc":"client/src/pages/Clients.tsx:695",variant:"ghost",size:"sm",onClick:()=>ms(s),"aria-label":`Edit ${s.name}`,children:e.jsx(oe,{"data-loc":"client/src/pages/Clients.tsx:701",className:"h-4 w-4"})}),e.jsx(C,{"data-loc":"client/src/pages/Clients.tsx:703",variant:"ghost",size:"sm",onClick:()=>Ie(s),className:"text-destructive hover:text-destructive","aria-label":`Delete ${s.name}`,children:e.jsx(ie,{"data-loc":"client/src/pages/Clients.tsx:710",className:"h-4 w-4"})})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/Clients.tsx:714",className:"mt-3 space-y-1.5 text-sm",children:[s.email&&e.jsxs("div",{"data-loc":"client/src/pages/Clients.tsx:716",className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(ne,{"data-loc":"client/src/pages/Clients.tsx:717",className:"h-3 w-3"}),e.jsx("span",{"data-loc":"client/src/pages/Clients.tsx:718",className:"truncate",children:s.email})]}),s.phone&&e.jsxs("div",{"data-loc":"client/src/pages/Clients.tsx:722",className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(je,{"data-loc":"client/src/pages/Clients.tsx:723",className:"h-3 w-3"}),e.jsx("span",{"data-loc":"client/src/pages/Clients.tsx:724",children:s.phone})]}),s.address&&e.jsxs("div",{"data-loc":"client/src/pages/Clients.tsx:728",className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(Oe,{"data-loc":"client/src/pages/Clients.tsx:729",className:"h-3 w-3 flex-shrink-0"}),e.jsx("span",{"data-loc":"client/src/pages/Clients.tsx:730",className:"truncate",children:s.address})]})]})]},s.id))}),e.jsx("div",{"data-loc":"client/src/pages/Clients.tsx:739",className:"mt-6",children:e.jsx($s,{"data-loc":"client/src/pages/Clients.tsx:740",currentPage:he,totalPages:os,totalItems:ye,pageSize:G,onPageChange:is,onPageSizeChange:rs})})]})})]})}),e.jsx(Ds,{"data-loc":"client/src/pages/Clients.tsx:756",open:m,onOpenChange:c,client:N}),N&&e.jsx(qs,{"data-loc":"client/src/pages/Clients.tsx:763",open:u,onOpenChange:j,client:N}),e.jsx(Ee,{"data-loc":"client/src/pages/Clients.tsx:770",open:w,onOpenChange:b,onConfirm:ps,title:"Delete Client",description:`Are you sure you want to delete "${l?.name}"? This action cannot be undone.`}),e.jsx(Ee,{"data-loc":"client/src/pages/Clients.tsx:778",open:x,onOpenChange:T,onConfirm:us,title:"Delete Selected Clients",description:`Are you sure you want to delete ${B.size} client${B.size!==1?"s":""}? This action cannot be undone.`}),e.jsx(et,{"data-loc":"client/src/pages/Clients.tsx:786",open:$,onOpenChange:A,onSuccess:()=>F.clients.list.invalidate()}),e.jsx(Gs,{"data-loc":"client/src/pages/Clients.tsx:792",tagDialogOpen:D,setTagDialogOpen:P,editingTag:xe,setEditingTag:we,newTagName:We,setNewTagName:pe,newTagColor:He,setNewTagColor:ge,tags:Z,deleteTag:cs,createTag:ss,updateTag:ts})]})}export{St as default};
