import{j as e,r as j}from"./vendor-react-BuVtq312.js";import{t as A,B as F,c as M,I as g,j as K,G as W,C as y,z as N,A as D,E as b,a as T}from"./index-hzFfJlKH.js";import{L as h}from"./label-DJDGx5UM.js";import{T as X}from"./textarea-CA7ezKjn.js";import{m as Y,a as O,t as L,p as _,s as Z,f as C,C as ee,L as te,I as ce}from"./InvoiceFormCalculations-YZzX9-IS.js";import{S as se,a as oe,b as ne,c as ie,d as z}from"./select-BmfPitD4.js";import{P as ae,a as re,b as le}from"./popover-BWvbcDDZ.js";import{S as me}from"./scroll-area-Dr7k8mI2.js";import{P as Q,S as de,al as ve,a8 as R,ac as ue,am as xe,an as pe}from"./vendor-icons-CPPAmKDz.js";import{i as Ie,a as he}from"./CurrencySelector-CmxErqHw.js";import{n as Fe}from"./index.browser-OxPLOBIU.js";function je({value:c,onChange:a,error:v}){const{data:l,isLoading:p}=A.templates.list.useQuery();if(p)return e.jsxs("div",{"data-loc":"client/src/components/invoices/TemplateSelector.tsx:33",className:"space-y-2",children:[e.jsx(h,{"data-loc":"client/src/components/invoices/TemplateSelector.tsx:34",children:"Invoice Template"}),e.jsx("div",{"data-loc":"client/src/components/invoices/TemplateSelector.tsx:35",className:"h-10 bg-muted animate-pulse rounded-md"})]});const x=l?.find(m=>m.isDefault),n=c?l?.find(m=>m.id===c):x;return e.jsxs("div",{"data-loc":"client/src/components/invoices/TemplateSelector.tsx:46",className:"space-y-2",children:[e.jsx(h,{"data-loc":"client/src/components/invoices/TemplateSelector.tsx:47",htmlFor:"template",children:"Invoice Template"}),e.jsxs(se,{"data-loc":"client/src/components/invoices/TemplateSelector.tsx:48",value:c?.toString()||"default",onValueChange:m=>a(m==="default"?null:parseInt(m)),children:[e.jsx(oe,{"data-loc":"client/src/components/invoices/TemplateSelector.tsx:54",id:"template",className:v?"border-destructive":"",children:e.jsx(ne,{"data-loc":"client/src/components/invoices/TemplateSelector.tsx:58",children:n?e.jsxs("div",{"data-loc":"client/src/components/invoices/TemplateSelector.tsx:60",className:"flex items-center gap-2",children:[e.jsx("div",{"data-loc":"client/src/components/invoices/TemplateSelector.tsx:61",className:"w-4 h-4 rounded-sm",style:{backgroundColor:n.primaryColor||"#5f6fff"}}),e.jsx("span",{"data-loc":"client/src/components/invoices/TemplateSelector.tsx:67",children:n.name}),n.isDefault&&!c&&e.jsx("span",{"data-loc":"client/src/components/invoices/TemplateSelector.tsx:69",className:"text-xs text-muted-foreground",children:"(Default)"})]}):"Select template"})}),e.jsxs(ie,{"data-loc":"client/src/components/invoices/TemplateSelector.tsx:79",children:[e.jsx(z,{"data-loc":"client/src/components/invoices/TemplateSelector.tsx:81",value:"default",children:e.jsxs("div",{"data-loc":"client/src/components/invoices/TemplateSelector.tsx:82",className:"flex items-center gap-2",children:[e.jsx("div",{"data-loc":"client/src/components/invoices/TemplateSelector.tsx:83",className:"w-4 h-4 rounded-sm",style:{backgroundColor:x?.primaryColor||"#5f6fff"}}),e.jsx("span",{"data-loc":"client/src/components/invoices/TemplateSelector.tsx:89",children:x?.name||"Default"}),e.jsx("span",{"data-loc":"client/src/components/invoices/TemplateSelector.tsx:90",className:"text-xs text-muted-foreground",children:"(Default)"})]})}),l?.map(m=>e.jsx(z,{"data-loc":"client/src/components/invoices/TemplateSelector.tsx:96",value:m.id.toString(),children:e.jsxs("div",{"data-loc":"client/src/components/invoices/TemplateSelector.tsx:97",className:"flex items-center gap-2",children:[e.jsx("div",{"data-loc":"client/src/components/invoices/TemplateSelector.tsx:98",className:"w-4 h-4 rounded-sm",style:{backgroundColor:m.primaryColor||"#5f6fff"}}),e.jsx("span",{"data-loc":"client/src/components/invoices/TemplateSelector.tsx:104",children:m.name}),m.isDefault&&e.jsx("span",{"data-loc":"client/src/components/invoices/TemplateSelector.tsx:106",className:"text-xs text-muted-foreground",children:"â˜…"})]})},m.id))]})]}),v&&e.jsx("p",{"data-loc":"client/src/components/invoices/TemplateSelector.tsx:113",className:"text-sm text-destructive",children:v}),e.jsx("p",{"data-loc":"client/src/components/invoices/TemplateSelector.tsx:114",className:"text-xs text-muted-foreground",children:"Choose a template for this invoice. Leave as default to use your default template."})]})}function fe({onSelect:c,trigger:a,className:v}){const[l,p]=j.useState(!1),[x,n]=j.useState(""),m=j.useRef(null),{data:s,isLoading:o}=A.products.list.useQuery({includeInactive:!1},{enabled:l}),t=A.products.incrementUsage.useMutation(),u=s?.filter(r=>{if(!x)return!0;const I=x.toLowerCase();return r.name.toLowerCase().includes(I)||r.description?.toLowerCase().includes(I)||r.category?.toLowerCase().includes(I)})?.sort((r,I)=>I.usageCount-r.usageCount),S=s?.slice(0,3),f=r=>{c(r),t.mutate({id:r.id}),p(!1),n("")};return j.useEffect(()=>{l&&m.current&&setTimeout(()=>m.current?.focus(),0)},[l]),e.jsxs(ae,{"data-loc":"client/src/components/invoices/ProductSelector.tsx:81",open:l,onOpenChange:p,children:[e.jsx(re,{"data-loc":"client/src/components/invoices/ProductSelector.tsx:82",asChild:!0,children:a||e.jsxs(F,{"data-loc":"client/src/components/invoices/ProductSelector.tsx:84",variant:"outline",size:"sm",className:M("gap-2",v),children:[e.jsx(Q,{"data-loc":"client/src/components/invoices/ProductSelector.tsx:89",className:"h-4 w-4"}),"Add from Library"]})}),e.jsxs(le,{"data-loc":"client/src/components/invoices/ProductSelector.tsx:94",className:"w-[min(350px,calc(100vw-2rem))] p-0",align:"start",children:[e.jsx("div",{"data-loc":"client/src/components/invoices/ProductSelector.tsx:95",className:"p-3 border-b",children:e.jsxs("div",{"data-loc":"client/src/components/invoices/ProductSelector.tsx:96",className:"relative",children:[e.jsx(de,{"data-loc":"client/src/components/invoices/ProductSelector.tsx:97",className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(g,{"data-loc":"client/src/components/invoices/ProductSelector.tsx:98",ref:m,placeholder:"Search products...",value:x,onChange:r=>n(r.target.value),className:"pl-9"})]})}),e.jsx(me,{"data-loc":"client/src/components/invoices/ProductSelector.tsx:108",className:"h-[300px]",children:o?e.jsx("div",{"data-loc":"client/src/components/invoices/ProductSelector.tsx:110",className:"p-4 text-center text-sm text-muted-foreground",children:"Loading products..."}):u&&u.length>0?e.jsxs("div",{"data-loc":"client/src/components/invoices/ProductSelector.tsx:114",className:"p-2",children:[!x&&S&&S.length>0&&e.jsxs("div",{"data-loc":"client/src/components/invoices/ProductSelector.tsx:119",className:"mb-2",children:[e.jsxs("div",{"data-loc":"client/src/components/invoices/ProductSelector.tsx:120",className:"px-2 py-1 text-xs font-medium text-muted-foreground flex items-center gap-1",children:[e.jsx(ve,{"data-loc":"client/src/components/invoices/ProductSelector.tsx:121",className:"h-3 w-3"}),"Frequently Used"]}),S.map(r=>e.jsx(B,{"data-loc":"client/src/components/invoices/ProductSelector.tsx:125",product:r,onSelect:f,highlight:!0},`frequent-${r.id}`)),e.jsx("div",{"data-loc":"client/src/components/invoices/ProductSelector.tsx:132",className:"my-2 border-t"})]}),e.jsx("div",{"data-loc":"client/src/components/invoices/ProductSelector.tsx:137",className:"px-2 py-1 text-xs font-medium text-muted-foreground",children:x?"Search Results":"All Products"}),u.map(r=>e.jsx(B,{"data-loc":"client/src/components/invoices/ProductSelector.tsx:141",product:r,onSelect:f},r.id))]}):e.jsxs("div",{"data-loc":"client/src/components/invoices/ProductSelector.tsx:149",className:"p-8 text-center",children:[e.jsx(Q,{"data-loc":"client/src/components/invoices/ProductSelector.tsx:150",className:"mx-auto h-8 w-8 text-muted-foreground/50"}),e.jsx("p",{"data-loc":"client/src/components/invoices/ProductSelector.tsx:151",className:"mt-2 text-sm text-muted-foreground",children:x?"No products found":"No products yet"}),e.jsxs(F,{"data-loc":"client/src/components/invoices/ProductSelector.tsx:154",variant:"link",size:"sm",className:"mt-2",onClick:()=>{p(!1),window.open("/products","_blank")},children:[e.jsx(R,{"data-loc":"client/src/components/invoices/ProductSelector.tsx:163",className:"mr-1 h-3 w-3"}),"Add Products"]})]})}),e.jsx("div",{"data-loc":"client/src/components/invoices/ProductSelector.tsx:170",className:"p-2 border-t bg-muted/50",children:e.jsxs(F,{"data-loc":"client/src/components/invoices/ProductSelector.tsx:171",variant:"ghost",size:"sm",className:"w-full justify-start text-muted-foreground",onClick:()=>{p(!1),window.open("/products","_blank")},children:[e.jsx(R,{"data-loc":"client/src/components/invoices/ProductSelector.tsx:180",className:"mr-2 h-4 w-4"}),"Manage Products"]})})]})]})}function B({product:c,onSelect:a,highlight:v=!1}){return e.jsxs("button",{"data-loc":"client/src/components/invoices/ProductSelector.tsx:199",className:M("w-full text-left px-2 py-2 rounded-md hover:bg-accent transition-colors",v&&"bg-accent/50"),onClick:()=>a(c),children:[e.jsxs("div",{"data-loc":"client/src/components/invoices/ProductSelector.tsx:206",className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{"data-loc":"client/src/components/invoices/ProductSelector.tsx:207",className:"flex-1 min-w-0",children:[e.jsx("div",{"data-loc":"client/src/components/invoices/ProductSelector.tsx:208",className:"font-medium text-sm truncate",children:c.name}),c.description&&e.jsx("div",{"data-loc":"client/src/components/invoices/ProductSelector.tsx:210",className:"text-xs text-muted-foreground truncate",children:c.description})]}),e.jsxs("div",{"data-loc":"client/src/components/invoices/ProductSelector.tsx:215",className:"text-right shrink-0",children:[e.jsxs("div",{"data-loc":"client/src/components/invoices/ProductSelector.tsx:216",className:"font-medium text-sm",children:["$",parseFloat(c.rate).toFixed(2)]}),c.unit&&e.jsxs("div",{"data-loc":"client/src/components/invoices/ProductSelector.tsx:220",className:"text-xs text-muted-foreground",children:["per ",c.unit]})]})]}),c.category&&e.jsx(K,{"data-loc":"client/src/components/invoices/ProductSelector.tsx:227",variant:"outline",className:"mt-1 text-xs",children:c.category})]})}function P(){return{id:Fe(),description:"",quantity:1,rate:0}}function U(){const c=new Date().toISOString().split("T")[0],a=new Date(Date.now()+720*60*60*1e3).toISOString().split("T")[0];return{clientId:null,issueDate:c,dueDate:a,lineItems:[P()],taxRate:0,discountType:"percentage",discountValue:0,notes:"",paymentTerms:"Net 30",currency:"USD",templateId:null}}function Se(c={}){const{initialData:a,lineItems:v}=c,l=U(),p=s=>s?s.map(o=>"id"in o&&o.id?o:{...P(),...o}):l.lineItems,[x,n]=j.useState({...l,...a,lineItems:p(v??a?.lineItems)});return[x,{setClientId:s=>n(o=>({...o,clientId:s})),setIssueDate:s=>n(o=>({...o,issueDate:s})),setDueDate:s=>n(o=>({...o,dueDate:s})),setLineItems:s=>n(o=>({...o,lineItems:s})),setTaxRate:s=>n(o=>({...o,taxRate:s})),setDiscountType:s=>n(o=>({...o,discountType:s})),setDiscountValue:s=>n(o=>({...o,discountValue:s})),setNotes:s=>n(o=>({...o,notes:s})),setPaymentTerms:s=>n(o=>({...o,paymentTerms:s})),setCurrency:s=>n(o=>({...o,currency:s})),setTemplateId:s=>n(o=>({...o,templateId:s})),addLineItem:()=>n(s=>({...s,lineItems:[...s.lineItems,P()]})),updateLineItem:(s,o)=>n(t=>({...t,lineItems:t.lineItems.map(d=>d.id===s?o:d)})),deleteLineItem:s=>n(o=>({...o,lineItems:o.lineItems.length>1?o.lineItems.filter(t=>t.id!==s):o.lineItems})),reset:()=>n(U())}]}function ge(c){const{lineItems:a,taxRate:v,discountType:l,discountValue:p}=c;return j.useMemo(()=>{const x=a.reduce((t,d)=>{const u=Y(d.quantity,d.rate);return O(t,u)},L(0));let n=L(0);p>0&&(l==="percentage"?n=_(x,p):n=L(p));const m=Z(x,n),s=_(m,v),o=O(m,s);return{subtotal:parseFloat(C(x,2)),discountAmount:parseFloat(C(n,2)),taxAmount:parseFloat(C(s,2)),total:parseFloat(C(o,2))}},[a,v,l,p])}function ye(c){const a={};if(c.clientId||(a.clientId="Please select a client"),c.issueDate||(a.issueDate="Issue date is required"),c.dueDate||(a.dueDate="Due date is required"),c.issueDate&&c.dueDate){const v=new Date(c.issueDate);new Date(c.dueDate)<v&&(a.dueDate="Due date must be after issue date")}return c.lineItems.length===0&&(a.lineItems="At least one line item is required"),c.lineItems.forEach((v,l)=>{v.description.trim()||(a[`lineItem_${l}_description`]="Description is required"),v.quantity<=0&&(a[`lineItem_${l}_quantity`]="Quantity must be greater than 0"),v.rate<0&&(a[`lineItem_${l}_rate`]="Rate cannot be negative")}),(c.taxRate<0||c.taxRate>100)&&(a.taxRate="Tax rate must be between 0 and 100"),c.discountValue<0&&(a.discountValue="Discount cannot be negative"),a}function Ne(c){return Object.keys(c).length>0}function $e({mode:c,initialData:a,lineItems:v,invoiceNumber:l,onSubmit:p,onCancel:x,isLoading:n=!1,showPreview:m=!1,onPreviewChange:s,previewData:o}){const[t,d]=Se({initialData:a,lineItems:v}),[u,S]=j.useState({}),f=ge({lineItems:t.lineItems,taxRate:t.taxRate,discountType:t.discountType,discountValue:t.discountValue}),r=j.useId(),I=`${r}-issueDate-error`,k=`${r}-dueDate-error`,V=`${r}-notes`,$=`${r}-paymentTerms`,G=i=>{const w=i.description?`${i.name} - ${i.description}`:i.name;d.setLineItems([...t.lineItems,{...P(),description:w,rate:parseFloat(i.rate)}])},q=()=>{const i=ye(t);return S(i),!Ne(i)},H=async()=>{if(!q())return;const i=E();await p(i,"draft")},J=async()=>{if(!q())return;const i=E();await p(i,"sent")},E=()=>({clientId:t.clientId,invoiceNumber:l||"INV-0001",issueDate:new Date(t.issueDate),dueDate:new Date(t.dueDate),lineItems:t.lineItems.map(i=>({description:i.description,quantity:i.quantity,rate:i.rate})),taxRate:t.taxRate,discountType:t.discountType,discountValue:t.discountValue,notes:t.notes,paymentTerms:t.paymentTerms,templateId:t.templateId||void 0,currency:t.currency});return n&&c==="edit"?e.jsx("div",{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:156",className:"min-h-screen flex items-center justify-center bg-background",children:e.jsx("div",{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:157",className:"opacity-70",children:e.jsx(W,{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:158",size:"md"})})}):e.jsxs("div",{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:165",className:"space-y-6",children:[e.jsxs(y,{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:166",children:[e.jsxs(N,{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:167",children:[e.jsx(D,{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:168",children:"Invoice Details"}),e.jsx(b,{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:169",children:"Basic information about the invoice"})]}),e.jsxs(T,{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:171",className:"space-y-4",children:[e.jsx(ee,{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:172",value:t.clientId,onChange:d.setClientId,error:u.clientId}),e.jsx(je,{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:178",value:t.templateId,onChange:d.setTemplateId}),e.jsxs("div",{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:183",className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:184",className:"space-y-2",children:[e.jsx(h,{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:185",htmlFor:`${r}-invoiceNumber`,children:"Invoice Number"}),e.jsx(g,{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:186",id:`${r}-invoiceNumber`,value:l||"Loading...",disabled:!0,"aria-label":"Invoice number (auto-generated)"})]}),e.jsxs("div",{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:194",className:"space-y-2",children:[e.jsx(h,{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:195",children:"Currency"}),e.jsx(he,{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:196",value:t.currency,onChange:d.setCurrency,className:"w-full"}),Ie(t.currency)&&e.jsxs("p",{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:202",className:"text-xs text-amber-500",children:["Crypto invoice - amounts in ",t.currency]})]}),e.jsxs("div",{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:208",className:"space-y-2",children:[e.jsxs(h,{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:209",htmlFor:`${r}-issueDate`,children:["Issue Date ",e.jsx("span",{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:210",className:"text-destructive",children:"*"})]}),e.jsx(g,{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:212",id:`${r}-issueDate`,type:"date",value:t.issueDate,onChange:i=>d.setIssueDate(i.target.value),className:u.issueDate?"border-destructive":"","aria-label":"Invoice issue date","aria-required":"true","aria-invalid":!!u.issueDate,"aria-describedby":u.issueDate?I:void 0}),u.issueDate&&e.jsx("p",{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:226",id:I,className:"text-sm text-destructive",role:"alert",children:u.issueDate})]}),e.jsxs("div",{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:236",className:"space-y-2",children:[e.jsxs(h,{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:237",htmlFor:`${r}-dueDate`,children:["Due Date ",e.jsx("span",{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:238",className:"text-destructive",children:"*"})]}),e.jsx(g,{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:240",id:`${r}-dueDate`,type:"date",value:t.dueDate,onChange:i=>d.setDueDate(i.target.value),className:u.dueDate?"border-destructive":"","aria-label":"Invoice due date","aria-required":"true","aria-invalid":!!u.dueDate,"aria-describedby":u.dueDate?k:void 0}),u.dueDate&&e.jsx("p",{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:252",id:k,className:"text-sm text-destructive",role:"alert",children:u.dueDate})]})]})]})]}),e.jsxs(y,{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:265",children:[e.jsx(N,{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:266",children:e.jsxs("div",{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:267",className:"flex items-center justify-between",children:[e.jsxs("div",{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:268",children:[e.jsx(D,{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:269",children:"Line Items"}),e.jsx(b,{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:270",children:"Add products or services to the invoice"})]}),e.jsxs("div",{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:274",className:"flex gap-2",children:[e.jsx(fe,{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:275",onSelect:G}),e.jsxs(F,{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:276",type:"button",variant:"outline",size:"sm",onClick:d.addLineItem,children:[e.jsx(R,{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:282",className:"h-4 w-4 mr-2"}),"Add Item"]})]})]})}),e.jsxs(T,{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:288",className:"space-y-4",children:[e.jsxs("div",{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:289",className:"hidden md:grid grid-cols-12 gap-4 text-sm font-medium text-muted-foreground pb-2 border-b",children:[e.jsx("div",{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:290",className:"col-span-5",children:"Description"}),e.jsx("div",{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:291",className:"col-span-2",children:"Quantity"}),e.jsx("div",{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:292",className:"col-span-2",children:"Rate"}),e.jsx("div",{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:293",className:"col-span-2 text-right",children:"Amount"}),e.jsx("div",{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:294",className:"col-span-1"})]}),t.lineItems.map(i=>e.jsx(te,{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:298",item:i,onChange:w=>d.updateLineItem(i.id,w),onDelete:()=>d.deleteLineItem(i.id),canDelete:t.lineItems.length>1},i.id)),u.lineItems&&e.jsx("p",{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:308",className:"text-sm text-destructive",children:u.lineItems})]})]}),e.jsxs(y,{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:313",children:[e.jsxs(N,{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:314",children:[e.jsx(D,{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:315",children:"Totals"}),e.jsx(b,{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:316",children:"Tax, discounts, and final total"})]}),e.jsx(T,{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:318",children:e.jsx(ce,{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:319",subtotal:f.subtotal,taxRate:t.taxRate,onTaxRateChange:d.setTaxRate,discountType:t.discountType,onDiscountTypeChange:d.setDiscountType,discountValue:t.discountValue,onDiscountValueChange:d.setDiscountValue,discountAmount:f.discountAmount,taxAmount:f.taxAmount,total:f.total})})]}),e.jsxs(y,{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:334",children:[e.jsxs(N,{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:335",children:[e.jsx(D,{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:336",children:"Additional Information"}),e.jsx(b,{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:337",children:"Notes and payment terms for the client"})]}),e.jsxs(T,{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:341",className:"space-y-4",children:[e.jsxs("div",{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:342",className:"space-y-2",children:[e.jsx(h,{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:343",htmlFor:V,children:"Notes"}),e.jsx(X,{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:344",id:V,placeholder:"Add any additional notes or comments...",value:t.notes,onChange:i=>d.setNotes(i.target.value),rows:3})]}),e.jsxs("div",{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:353",className:"space-y-2",children:[e.jsx(h,{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:354",htmlFor:$,children:"Payment Terms"}),e.jsx(g,{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:355",id:$,placeholder:"e.g., Net 30, Due on receipt",value:t.paymentTerms,onChange:i=>d.setPaymentTerms(i.target.value)})]})]})]}),e.jsxs("div",{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:365",className:"flex items-center justify-end gap-4",children:[e.jsx(F,{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:366",variant:"outline",onClick:x,children:"Cancel"}),e.jsxs(F,{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:369",variant:"outline",onClick:()=>s?.(!0),type:"button",children:[e.jsx(ue,{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:374",className:"h-4 w-4 mr-2"}),"Preview"]}),e.jsx(F,{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:377",variant:"outline",onClick:H,disabled:n,children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:384",className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(xe,{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:389",className:"h-4 w-4 mr-2"}),"Save as Draft"]})}),e.jsx(F,{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:394",onClick:J,disabled:n,children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:397",className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(pe,{"data-loc":"client/src/components/invoices/InvoiceForm/InvoiceForm.tsx:402",className:"h-4 w-4 mr-2"}),"Save & Send"]})})]})]})}export{$e as I,je as T,P as g};
