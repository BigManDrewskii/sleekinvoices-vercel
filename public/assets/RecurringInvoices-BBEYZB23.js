import{j as e}from"./vendor-react-BuVtq312.js";import{u as C,t as d,C as x,j as v,B as t,k as I}from"./index-hzFfJlKH.js";import{P}from"./PageLayout-D7c6YbGr.js";import{R as k}from"./PageSkeletons-DirSuB2s.js";import{E as F,a as z}from"./EmptyState-B5hZ-p_K.js";import{D as g}from"./typography-CdqW54LS.js";import{u as E}from"./useUndoableDelete-CCCtPilo.js";import{a8 as h,aI as R,n as j,a0 as f,a2 as N}from"./vendor-icons-CPPAmKDz.js";import"./vendor-data-DopHG4T0.js";import"./vendor-radix-DQBG9U-J.js";import"./Navigation-DKoTJDrW.js";import"./UserAvatar-DzPpP9tb.js";import"./skeleton-QN8DVCY2.js";import"./vendor-date-B2OJh1lx.js";function V(){const[,r]=C(),{data:l,isLoading:y}=d.recurringInvoices.list.useQuery(),D=d.recurringInvoices.toggle.useMutation(),A=d.recurringInvoices.delete.useMutation(),c=d.useUtils(),u=async(s,o)=>{const a=c.recurringInvoices.list.getData();c.recurringInvoices.list.setData(void 0,n=>n?.map(i=>i.id===s?{...i,isActive:!o}:i));try{await D.mutateAsync({id:s,isActive:!o}),I.success(o?"Recurring invoice paused":"Recurring invoice activated")}catch{a&&c.recurringInvoices.list.setData(void 0,a),I.error("Failed to toggle recurring invoice")}finally{c.recurringInvoices.list.invalidate()}},{executeDelete:w}=E(),m=async(s,o)=>{if(!confirm("Are you sure you want to delete this recurring invoice?"))return;const a=c.recurringInvoices.list.getData(),n=a?.find(i=>i.id===s);n&&w({item:n,itemName:"Recurring invoice",itemType:"recurring invoice",onOptimisticDelete:()=>{c.recurringInvoices.list.setData(void 0,i=>i?.filter(b=>b.id!==s))},onRestore:()=>{a?c.recurringInvoices.list.setData(void 0,a):c.recurringInvoices.list.invalidate()},onConfirmDelete:async()=>{await A.mutateAsync({id:s}),c.recurringInvoices.list.invalidate()}})},p=s=>s.charAt(0).toUpperCase()+s.slice(1);return y?e.jsx(k,{"data-loc":"client/src/pages/RecurringInvoices.tsx:102"}):e.jsx(P,{"data-loc":"client/src/pages/RecurringInvoices.tsx:106",title:"Recurring Invoices",subtitle:"Automate invoice generation for subscription-based clients",headerActions:e.jsxs(t,{"data-loc":"client/src/pages/RecurringInvoices.tsx:110",onClick:()=>r("/recurring-invoices/create"),children:[e.jsx(h,{"data-loc":"client/src/pages/RecurringInvoices.tsx:111",className:"w-4 h-4 mr-2","aria-hidden":"true"}),e.jsx("span",{"data-loc":"client/src/pages/RecurringInvoices.tsx:112",className:"hidden sm:inline",children:"Create Recurring Invoice"}),e.jsx("span",{"data-loc":"client/src/pages/RecurringInvoices.tsx:113",className:"sm:hidden",children:"New"})]}),children:!l||l.length===0?e.jsx(x,{"data-loc":"client/src/pages/RecurringInvoices.tsx:118",className:"p-8",children:e.jsx(F,{"data-loc":"client/src/pages/RecurringInvoices.tsx:119",...z.recurring,action:{label:"Create Recurring Invoice",onClick:()=>r("/recurring-invoices/create"),icon:h}})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{"data-loc":"client/src/pages/RecurringInvoices.tsx:131",className:"hidden md:block",children:e.jsx("div",{"data-loc":"client/src/pages/RecurringInvoices.tsx:132",className:"space-y-4",children:l.map(s=>e.jsx(x,{"data-loc":"client/src/pages/RecurringInvoices.tsx:134",className:"p-6",children:e.jsxs("div",{"data-loc":"client/src/pages/RecurringInvoices.tsx:135",className:"flex items-start justify-between",children:[e.jsxs("div",{"data-loc":"client/src/pages/RecurringInvoices.tsx:136",className:"flex-1",children:[e.jsxs("div",{"data-loc":"client/src/pages/RecurringInvoices.tsx:137",className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{"data-loc":"client/src/pages/RecurringInvoices.tsx:138",className:"text-lg font-semibold",children:s.clientName||"Unknown Client"}),e.jsx(v,{"data-loc":"client/src/pages/RecurringInvoices.tsx:141",variant:s.isActive?"default":"secondary",children:s.isActive?"Active":"Paused"}),e.jsx(v,{"data-loc":"client/src/pages/RecurringInvoices.tsx:146",variant:"outline",children:p(s.frequency)})]}),e.jsxs("p",{"data-loc":"client/src/pages/RecurringInvoices.tsx:151",className:"text-sm text-muted-foreground mb-2",children:[s.invoiceNumberPrefix," â€¢"," ",s.clientEmail||"No email"]}),e.jsxs("div",{"data-loc":"client/src/pages/RecurringInvoices.tsx:156",className:"grid grid-cols-3 gap-4 mt-4 text-sm",children:[e.jsxs("div",{"data-loc":"client/src/pages/RecurringInvoices.tsx:157",children:[e.jsx("p",{"data-loc":"client/src/pages/RecurringInvoices.tsx:158",className:"text-muted-foreground",children:"Start Date"}),e.jsx("p",{"data-loc":"client/src/pages/RecurringInvoices.tsx:159",className:"font-medium",children:e.jsx(g,{"data-loc":"client/src/pages/RecurringInvoices.tsx:160",date:s.startDate,format:"long"})})]}),e.jsxs("div",{"data-loc":"client/src/pages/RecurringInvoices.tsx:166",children:[e.jsx("p",{"data-loc":"client/src/pages/RecurringInvoices.tsx:167",className:"text-muted-foreground",children:"Next Invoice"}),e.jsx("p",{"data-loc":"client/src/pages/RecurringInvoices.tsx:168",className:"font-medium",children:e.jsx(g,{"data-loc":"client/src/pages/RecurringInvoices.tsx:169",date:s.nextInvoiceDate,format:"long"})})]}),e.jsxs("div",{"data-loc":"client/src/pages/RecurringInvoices.tsx:175",children:[e.jsx("p",{"data-loc":"client/src/pages/RecurringInvoices.tsx:176",className:"text-muted-foreground",children:"End Date"}),e.jsx("p",{"data-loc":"client/src/pages/RecurringInvoices.tsx:177",className:"font-medium",children:e.jsx(g,{"data-loc":"client/src/pages/RecurringInvoices.tsx:178",date:s.endDate,format:"long"})})]})]}),s.notes&&e.jsx("p",{"data-loc":"client/src/pages/RecurringInvoices.tsx:187",className:"text-sm text-muted-foreground mt-3",children:s.notes})]}),e.jsxs("div",{"data-loc":"client/src/pages/RecurringInvoices.tsx:193",className:"flex gap-2 ml-4",children:[e.jsx(t,{"data-loc":"client/src/pages/RecurringInvoices.tsx:194",variant:"outline",size:"sm",onClick:()=>u(s.id,s.isActive),children:s.isActive?e.jsxs(e.Fragment,{children:[e.jsx(R,{"data-loc":"client/src/pages/RecurringInvoices.tsx:203",className:"w-4 h-4 mr-1"})," Pause"]}):e.jsxs(e.Fragment,{children:[e.jsx(j,{"data-loc":"client/src/pages/RecurringInvoices.tsx:207",className:"w-4 h-4 mr-1"})," Activate"]})}),e.jsx(t,{"data-loc":"client/src/pages/RecurringInvoices.tsx:211",variant:"outline",size:"sm",onClick:()=>r(`/recurring-invoices/${s.id}/edit`),children:e.jsx(f,{"data-loc":"client/src/pages/RecurringInvoices.tsx:220",className:"w-4 h-4"})}),e.jsx(t,{"data-loc":"client/src/pages/RecurringInvoices.tsx:222",variant:"outline",size:"sm",onClick:()=>m(s.id),children:e.jsx(N,{"data-loc":"client/src/pages/RecurringInvoices.tsx:227",className:"w-4 h-4"})})]})]})},s.id))})}),e.jsx("div",{"data-loc":"client/src/pages/RecurringInvoices.tsx:237",className:"md:hidden space-y-4",children:l.map(s=>e.jsx(x,{"data-loc":"client/src/pages/RecurringInvoices.tsx:239",className:"p-4",children:e.jsxs("div",{"data-loc":"client/src/pages/RecurringInvoices.tsx:240",className:"space-y-3",children:[e.jsxs("div",{"data-loc":"client/src/pages/RecurringInvoices.tsx:241",className:"flex items-start justify-between",children:[e.jsxs("div",{"data-loc":"client/src/pages/RecurringInvoices.tsx:242",children:[e.jsx("h3",{"data-loc":"client/src/pages/RecurringInvoices.tsx:243",className:"font-semibold",children:s.clientName||"Unknown Client"}),e.jsx("p",{"data-loc":"client/src/pages/RecurringInvoices.tsx:246",className:"text-sm text-muted-foreground",children:s.invoiceNumberPrefix})]}),e.jsx("div",{"data-loc":"client/src/pages/RecurringInvoices.tsx:250",className:"flex gap-2",children:e.jsx(v,{"data-loc":"client/src/pages/RecurringInvoices.tsx:251",variant:s.isActive?"default":"secondary",className:"text-xs",children:s.isActive?"Active":"Paused"})})]}),e.jsxs("div",{"data-loc":"client/src/pages/RecurringInvoices.tsx:260",className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{"data-loc":"client/src/pages/RecurringInvoices.tsx:261",children:[e.jsx("p",{"data-loc":"client/src/pages/RecurringInvoices.tsx:262",className:"text-muted-foreground",children:"Frequency"}),e.jsx("p",{"data-loc":"client/src/pages/RecurringInvoices.tsx:263",className:"font-medium",children:p(s.frequency)})]}),e.jsxs("div",{"data-loc":"client/src/pages/RecurringInvoices.tsx:267",children:[e.jsx("p",{"data-loc":"client/src/pages/RecurringInvoices.tsx:268",className:"text-muted-foreground",children:"Next Invoice"}),e.jsx("p",{"data-loc":"client/src/pages/RecurringInvoices.tsx:269",className:"font-medium",children:e.jsx(g,{"data-loc":"client/src/pages/RecurringInvoices.tsx:270",date:s.nextInvoiceDate,format:"long"})})]})]}),e.jsxs("div",{"data-loc":"client/src/pages/RecurringInvoices.tsx:278",className:"flex gap-2 pt-3 border-t",children:[e.jsx(t,{"data-loc":"client/src/pages/RecurringInvoices.tsx:279",variant:"outline",size:"default",className:"flex-1 h-11",onClick:()=>u(s.id,s.isActive),children:s.isActive?e.jsxs(e.Fragment,{children:[e.jsx(R,{"data-loc":"client/src/pages/RecurringInvoices.tsx:289",className:"w-4 h-4 mr-2"})," Pause"]}):e.jsxs(e.Fragment,{children:[e.jsx(j,{"data-loc":"client/src/pages/RecurringInvoices.tsx:293",className:"w-4 h-4 mr-2"})," Activate"]})}),e.jsx(t,{"data-loc":"client/src/pages/RecurringInvoices.tsx:297",variant:"outline",size:"default",className:"h-11 px-3",onClick:()=>r(`/recurring-invoices/${s.id}/edit`),children:e.jsx(f,{"data-loc":"client/src/pages/RecurringInvoices.tsx:305",className:"w-4 h-4"})}),e.jsx(t,{"data-loc":"client/src/pages/RecurringInvoices.tsx:307",variant:"outline",size:"default",className:"h-11 px-3",onClick:()=>m(s.id),children:e.jsx(N,{"data-loc":"client/src/pages/RecurringInvoices.tsx:313",className:"w-4 h-4"})})]})]})},s.id))})]})})}export{V as default};
