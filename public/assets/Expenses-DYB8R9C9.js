import{j as e,r as l}from"./vendor-react-BuVtq312.js";import{C as q,z as Be,a as je,D as Ee,e as be,f as De,h as fe,I as Q,B as V,j as ee,t as I,k as N,d as Ze,A as es,E as ss,p as ts}from"./index-hzFfJlKH.js";import{L as w}from"./label-DJDGx5UM.js";import{a1 as ce,a8 as he,a2 as Me,b as ye,d as Re,X as ns,L as as,a6 as ls,aL as cs,ac as os,E as rs,a0 as is,D as xs}from"./vendor-icons-CPPAmKDz.js";import{F as ps,a as Z,u as ds}from"./useTableSort-BKzs4CS_.js";import{S as L,a as _,b as O,c as z,d as r}from"./select-BmfPitD4.js";import{D as Ue,C as B}from"./typography-CdqW54LS.js";import{T as ms}from"./textarea-CA7ezKjn.js";import{C as gs}from"./checkbox-Cacebbmr.js";import{T as us,a as hs,b as Pe,c as ue,d as js,e as Y}from"./table-y7wtTQEZ.js";import{D as Es,a as bs,b as Ds,c as ne,d as fs}from"./Navigation-DKoTJDrW.js";import{S as ys,a as ae,P as Ns}from"./scrollable-table-wrapper-nwSnGFpJ.js";import{D as vs,a as Fe}from"./data-table-empty-B3ZZCHTu.js";import{P as Ae}from"./PageLayout-D7c6YbGr.js";import{S as d,b as ks,a as Cs}from"./skeleton-QN8DVCY2.js";import"./vendor-data-DopHG4T0.js";import"./vendor-radix-DQBG9U-J.js";import"./vendor-date-B2OJh1lx.js";import"./UserAvatar-DzPpP9tb.js";import"./EmptyState-B5hZ-p_K.js";function le(){return e.jsx(q,{"data-loc":"client/src/components/skeletons/ExpensesPageSkeleton.tsx:20",children:e.jsxs(je,{"data-loc":"client/src/components/skeletons/ExpensesPageSkeleton.tsx:21",className:"p-4",children:[e.jsxs("div",{"data-loc":"client/src/components/skeletons/ExpensesPageSkeleton.tsx:22",className:"flex items-center justify-between",children:[e.jsx(d,{"data-loc":"client/src/components/skeletons/ExpensesPageSkeleton.tsx:23",className:"h-4 w-24"}),e.jsx(d,{"data-loc":"client/src/components/skeletons/ExpensesPageSkeleton.tsx:24",className:"h-8 w-8 rounded-lg"})]}),e.jsx(d,{"data-loc":"client/src/components/skeletons/ExpensesPageSkeleton.tsx:26",className:"h-8 w-28 mt-2"}),e.jsx(d,{"data-loc":"client/src/components/skeletons/ExpensesPageSkeleton.tsx:27",className:"h-3 w-20 mt-2"})]})})}function Ss(){return e.jsxs("div",{"data-loc":"client/src/components/skeletons/ExpensesPageSkeleton.tsx:38",className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsx(le,{"data-loc":"client/src/components/skeletons/ExpensesPageSkeleton.tsx:39"}),e.jsx(le,{"data-loc":"client/src/components/skeletons/ExpensesPageSkeleton.tsx:40"}),e.jsx(le,{"data-loc":"client/src/components/skeletons/ExpensesPageSkeleton.tsx:41"}),e.jsx(le,{"data-loc":"client/src/components/skeletons/ExpensesPageSkeleton.tsx:42"})]})}function ws(){return e.jsxs("div",{"data-loc":"client/src/components/skeletons/ExpensesPageSkeleton.tsx:52",className:"flex flex-wrap gap-2 mb-4",children:[e.jsx(d,{"data-loc":"client/src/components/skeletons/ExpensesPageSkeleton.tsx:53",className:"h-10 w-36 rounded-lg"}),e.jsx(d,{"data-loc":"client/src/components/skeletons/ExpensesPageSkeleton.tsx:54",className:"h-10 w-32 rounded-lg"}),e.jsx(d,{"data-loc":"client/src/components/skeletons/ExpensesPageSkeleton.tsx:55",className:"h-10 w-28 rounded-lg"}),e.jsx(d,{"data-loc":"client/src/components/skeletons/ExpensesPageSkeleton.tsx:56",className:"h-10 w-32 rounded-lg"})]})}function Ts(){return e.jsxs("div",{"data-loc":"client/src/components/skeletons/ExpensesPageSkeleton.tsx:66",className:"flex items-center gap-4 p-4 border-b border-border",children:[e.jsx(d,{"data-loc":"client/src/components/skeletons/ExpensesPageSkeleton.tsx:68",className:"h-6 w-6 rounded"}),e.jsxs("div",{"data-loc":"client/src/components/skeletons/ExpensesPageSkeleton.tsx:70",className:"flex-1 space-y-1",children:[e.jsx(d,{"data-loc":"client/src/components/skeletons/ExpensesPageSkeleton.tsx:71",className:"h-4 w-48"}),e.jsx(d,{"data-loc":"client/src/components/skeletons/ExpensesPageSkeleton.tsx:72",className:"h-3 w-32"})]}),e.jsx(d,{"data-loc":"client/src/components/skeletons/ExpensesPageSkeleton.tsx:75",className:"h-5 w-20"}),e.jsx(d,{"data-loc":"client/src/components/skeletons/ExpensesPageSkeleton.tsx:77",className:"h-4 w-24"}),e.jsx(Cs,{"data-loc":"client/src/components/skeletons/ExpensesPageSkeleton.tsx:79"}),e.jsx(d,{"data-loc":"client/src/components/skeletons/ExpensesPageSkeleton.tsx:81",className:"h-4 w-16"}),e.jsxs("div",{"data-loc":"client/src/components/skeletons/ExpensesPageSkeleton.tsx:83",className:"flex items-center gap-1",children:[e.jsx(d,{"data-loc":"client/src/components/skeletons/ExpensesPageSkeleton.tsx:84",className:"h-8 w-8 rounded-lg"}),e.jsx(d,{"data-loc":"client/src/components/skeletons/ExpensesPageSkeleton.tsx:85",className:"h-8 w-8 rounded-lg"})]})]})}function Ps({rows:x=10}){return e.jsxs(q,{"data-loc":"client/src/components/skeletons/ExpensesPageSkeleton.tsx:96",children:[e.jsx(Be,{"data-loc":"client/src/components/skeletons/ExpensesPageSkeleton.tsx:97",className:"pb-4",children:e.jsxs("div",{"data-loc":"client/src/components/skeletons/ExpensesPageSkeleton.tsx:98",className:"flex items-center justify-between",children:[e.jsxs("div",{"data-loc":"client/src/components/skeletons/ExpensesPageSkeleton.tsx:99",className:"space-y-2",children:[e.jsx(d,{"data-loc":"client/src/components/skeletons/ExpensesPageSkeleton.tsx:100",className:"h-5 w-28"}),e.jsx(d,{"data-loc":"client/src/components/skeletons/ExpensesPageSkeleton.tsx:101",className:"h-4 w-40"})]}),e.jsx(ks,{"data-loc":"client/src/components/skeletons/ExpensesPageSkeleton.tsx:103"})]})}),e.jsxs(je,{"data-loc":"client/src/components/skeletons/ExpensesPageSkeleton.tsx:106",className:"p-0",children:[e.jsxs("div",{"data-loc":"client/src/components/skeletons/ExpensesPageSkeleton.tsx:108",className:"grid grid-cols-[auto_1fr_100px_100px_100px_80px_auto] gap-4 px-4 py-3 bg-muted/30 border-y border-border",children:[e.jsx(d,{"data-loc":"client/src/components/skeletons/ExpensesPageSkeleton.tsx:109",className:"h-4 w-6"}),e.jsx(d,{"data-loc":"client/src/components/skeletons/ExpensesPageSkeleton.tsx:110",className:"h-4 w-24"}),e.jsx(d,{"data-loc":"client/src/components/skeletons/ExpensesPageSkeleton.tsx:111",className:"h-4 w-16"}),e.jsx(d,{"data-loc":"client/src/components/skeletons/ExpensesPageSkeleton.tsx:112",className:"h-4 w-16"}),e.jsx(d,{"data-loc":"client/src/components/skeletons/ExpensesPageSkeleton.tsx:113",className:"h-4 w-20"}),e.jsx(d,{"data-loc":"client/src/components/skeletons/ExpensesPageSkeleton.tsx:114",className:"h-4 w-16"}),e.jsx(d,{"data-loc":"client/src/components/skeletons/ExpensesPageSkeleton.tsx:115",className:"h-4 w-16"})]}),e.jsx("div",{"data-loc":"client/src/components/skeletons/ExpensesPageSkeleton.tsx:119",children:Array.from({length:x}).map((j,t)=>e.jsx(Ts,{"data-loc":"client/src/components/skeletons/ExpensesPageSkeleton.tsx:121"},t))})]})]})}function Fs(){return e.jsxs("div",{"data-loc":"client/src/components/skeletons/ExpensesPageSkeleton.tsx:134",className:"space-y-6",children:[e.jsx(Ss,{"data-loc":"client/src/components/skeletons/ExpensesPageSkeleton.tsx:136"}),e.jsx(ws,{"data-loc":"client/src/components/skeletons/ExpensesPageSkeleton.tsx:139"}),e.jsx(Ps,{"data-loc":"client/src/components/skeletons/ExpensesPageSkeleton.tsx:142"})]})}function As({open:x,onOpenChange:j,categories:t,categoryForm:n,setCategoryForm:m,createCategoryMutation:u,handleCreateCategory:f,handleDeleteCategory:i,ids:b}){return e.jsx(Ee,{"data-loc":"client/src/components/expenses/CategoryDialog.tsx:50",open:x,onOpenChange:j,children:e.jsxs(be,{"data-loc":"client/src/components/expenses/CategoryDialog.tsx:51",className:"sm:max-w-md",children:[e.jsxs(De,{"data-loc":"client/src/components/expenses/CategoryDialog.tsx:52",className:"pb-4",children:[e.jsxs(fe,{"data-loc":"client/src/components/expenses/CategoryDialog.tsx:53",className:"flex items-center gap-3",children:[e.jsx("div",{"data-loc":"client/src/components/expenses/CategoryDialog.tsx:54",className:"p-3 rounded-xl bg-primary/10",children:e.jsx(ce,{"data-loc":"client/src/components/expenses/CategoryDialog.tsx:55",className:"w-5 h-5 text-primary"})}),e.jsx("span",{"data-loc":"client/src/components/expenses/CategoryDialog.tsx:57",className:"text-xl",children:"Expense Categories"})]}),e.jsx("p",{"data-loc":"client/src/components/expenses/CategoryDialog.tsx:59",className:"text-base text-muted-foreground mt-1",children:"Organize your expenses with custom categories"})]}),e.jsx("form",{"data-loc":"client/src/components/expenses/CategoryDialog.tsx:65",onSubmit:f,className:"mt-4",children:e.jsxs("div",{"data-loc":"client/src/components/expenses/CategoryDialog.tsx:66",className:"p-4 rounded-xl bg-muted/30 border border-border/50 space-y-4",children:[e.jsxs("div",{"data-loc":"client/src/components/expenses/CategoryDialog.tsx:67",className:"flex items-center gap-2 text-sm font-medium text-foreground/80",children:[e.jsx(he,{"data-loc":"client/src/components/expenses/CategoryDialog.tsx:68",className:"w-4 h-4"}),"Add New Category"]}),e.jsxs("div",{"data-loc":"client/src/components/expenses/CategoryDialog.tsx:72",className:"flex gap-3",children:[e.jsxs("div",{"data-loc":"client/src/components/expenses/CategoryDialog.tsx:74",className:"relative",children:[e.jsx(w,{"data-loc":"client/src/components/expenses/CategoryDialog.tsx:75",htmlFor:b.categoryColor,className:"sr-only",children:"Category Color"}),e.jsx(Q,{"data-loc":"client/src/components/expenses/CategoryDialog.tsx:76",id:b.categoryColor,type:"color",value:n.color,onChange:p=>m({...n,color:p.target.value}),"aria-label":"Category color",className:"w-12 h-12 p-1 cursor-pointer rounded-lg border-2 border-border/50 hover:border-primary/50 transition-colors"})]}),e.jsxs("div",{"data-loc":"client/src/components/expenses/CategoryDialog.tsx:92",className:"flex-1",children:[e.jsx(w,{"data-loc":"client/src/components/expenses/CategoryDialog.tsx:93",htmlFor:b.categoryName,className:"sr-only",children:"Category Name"}),e.jsx(Q,{"data-loc":"client/src/components/expenses/CategoryDialog.tsx:94",id:b.categoryName,value:n.name,onChange:p=>m({...n,name:p.target.value}),placeholder:"Enter category name...","aria-label":"Category name",className:"h-12",required:!0})]}),e.jsx(V,{"data-loc":"client/src/components/expenses/CategoryDialog.tsx:111",type:"submit",disabled:u.isPending||!n.name.trim(),className:"h-12 px-4",children:u.isPending?e.jsx("div",{"data-loc":"client/src/components/expenses/CategoryDialog.tsx:120",className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}):e.jsx(he,{"data-loc":"client/src/components/expenses/CategoryDialog.tsx:122",className:"w-4 h-4"})})]}),e.jsxs("div",{"data-loc":"client/src/components/expenses/CategoryDialog.tsx:128",className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx("div",{"data-loc":"client/src/components/expenses/CategoryDialog.tsx:129",className:"w-3 h-3 rounded-full",style:{backgroundColor:n.color}}),e.jsxs("span",{"data-loc":"client/src/components/expenses/CategoryDialog.tsx:133",children:["Selected color: ",n.color]})]})]})}),e.jsxs("div",{"data-loc":"client/src/components/expenses/CategoryDialog.tsx:139",className:"mt-6",children:[e.jsxs("div",{"data-loc":"client/src/components/expenses/CategoryDialog.tsx:140",className:"flex items-center justify-between mb-3",children:[e.jsx("span",{"data-loc":"client/src/components/expenses/CategoryDialog.tsx:141",className:"text-sm font-medium text-foreground/80",children:"Your Categories"}),e.jsxs("span",{"data-loc":"client/src/components/expenses/CategoryDialog.tsx:144",className:"text-xs text-muted-foreground",children:[t?.length||0," total"]})]}),e.jsx("div",{"data-loc":"client/src/components/expenses/CategoryDialog.tsx:149",className:"space-y-2 max-h-[280px] overflow-y-auto pr-1",children:t&&t.length>0?t.map(p=>e.jsxs("div",{"data-loc":"client/src/components/expenses/CategoryDialog.tsx:152",className:"group flex items-center justify-between p-3 rounded-lg border border-border/50 bg-card hover:bg-muted/30 hover:border-border transition-all duration-200",children:[e.jsxs("div",{"data-loc":"client/src/components/expenses/CategoryDialog.tsx:156",className:"flex items-center gap-3",children:[e.jsx("div",{"data-loc":"client/src/components/expenses/CategoryDialog.tsx:157",className:"w-8 h-8 rounded-lg shadow-sm flex items-center justify-center",style:{backgroundColor:p.color},children:e.jsx(ce,{"data-loc":"client/src/components/expenses/CategoryDialog.tsx:161",className:"w-4 h-4 text-white/80"})}),e.jsxs("div",{"data-loc":"client/src/components/expenses/CategoryDialog.tsx:163",children:[e.jsx("span",{"data-loc":"client/src/components/expenses/CategoryDialog.tsx:164",className:"font-medium",children:p.name}),e.jsx("div",{"data-loc":"client/src/components/expenses/CategoryDialog.tsx:165",className:"text-xs text-muted-foreground",children:p.color})]})]}),e.jsx(V,{"data-loc":"client/src/components/expenses/CategoryDialog.tsx:170",variant:"ghost",size:"sm",onClick:()=>i(p.id),className:"opacity-0 group-hover:opacity-100 transition-opacity text-muted-foreground hover:text-destructive hover:bg-destructive/10",children:e.jsx(Me,{"data-loc":"client/src/components/expenses/CategoryDialog.tsx:176",className:"w-4 h-4"})})]},p.id)):e.jsxs("div",{"data-loc":"client/src/components/expenses/CategoryDialog.tsx:181",className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx("div",{"data-loc":"client/src/components/expenses/CategoryDialog.tsx:182",className:"p-3 rounded-full bg-muted/50 mb-3",children:e.jsx(ce,{"data-loc":"client/src/components/expenses/CategoryDialog.tsx:183",className:"w-6 h-6 text-muted-foreground"})}),e.jsx("p",{"data-loc":"client/src/components/expenses/CategoryDialog.tsx:185",className:"text-sm font-medium text-foreground/80",children:"No categories yet"}),e.jsx("p",{"data-loc":"client/src/components/expenses/CategoryDialog.tsx:188",className:"text-xs text-muted-foreground mt-1",children:"Create your first category above to get started"})]})})]})]})})}function Is({hasActiveFilters:x,onClearFilters:j,searchValue:t,onSearchChange:n,searchPlaceholder:m,activeFilters:u,onClearAll:f,paymentMethodFilter:i,setPaymentMethodFilter:b,billableFilter:p,setBillableFilter:P,clientFilter:a,setClientFilter:C,categoryFilter:W,setCategoryFilter:R,dateRange:K,setDateRange:G,clients:U,categories:c}){return e.jsx(ps,{"data-loc":"client/src/components/expenses/ExpenseFilters.tsx:60",hasActiveFilters:x,onClearFilters:j,searchValue:t,onSearchChange:n,searchPlaceholder:m,activeFilters:u,onClearAll:f,children:e.jsxs("div",{"data-loc":"client/src/components/expenses/ExpenseFilters.tsx:69",className:"flex flex-wrap items-end gap-3 md:gap-4 w-full",children:[e.jsx(Z,{"data-loc":"client/src/components/expenses/ExpenseFilters.tsx:70",label:"Payment Method",children:e.jsxs(L,{"data-loc":"client/src/components/expenses/ExpenseFilters.tsx:71",value:i||"all",onValueChange:s=>b(s==="all"?null:s),children:[e.jsx(_,{"data-loc":"client/src/components/expenses/ExpenseFilters.tsx:75",className:"w-[160px] md:w-[180px]",children:e.jsx(O,{"data-loc":"client/src/components/expenses/ExpenseFilters.tsx:76",placeholder:"All Methods"})}),e.jsxs(z,{"data-loc":"client/src/components/expenses/ExpenseFilters.tsx:78",children:[e.jsx(r,{"data-loc":"client/src/components/expenses/ExpenseFilters.tsx:79",value:"all",children:"All Methods"}),e.jsx(r,{"data-loc":"client/src/components/expenses/ExpenseFilters.tsx:80",value:"cash",children:"Cash"}),e.jsx(r,{"data-loc":"client/src/components/expenses/ExpenseFilters.tsx:81",value:"credit_card",children:"Credit Card"}),e.jsx(r,{"data-loc":"client/src/components/expenses/ExpenseFilters.tsx:82",value:"debit_card",children:"Debit Card"}),e.jsx(r,{"data-loc":"client/src/components/expenses/ExpenseFilters.tsx:83",value:"bank_transfer",children:"Bank Transfer"}),e.jsx(r,{"data-loc":"client/src/components/expenses/ExpenseFilters.tsx:84",value:"check",children:"Check"}),e.jsx(r,{"data-loc":"client/src/components/expenses/ExpenseFilters.tsx:85",value:"other",children:"Other"})]})]})}),e.jsx(Z,{"data-loc":"client/src/components/expenses/ExpenseFilters.tsx:90",label:"Billable Status",children:e.jsxs(L,{"data-loc":"client/src/components/expenses/ExpenseFilters.tsx:91",value:p,onValueChange:s=>P(s),children:[e.jsx(_,{"data-loc":"client/src/components/expenses/ExpenseFilters.tsx:97",children:e.jsx(O,{"data-loc":"client/src/components/expenses/ExpenseFilters.tsx:98",placeholder:"All"})}),e.jsxs(z,{"data-loc":"client/src/components/expenses/ExpenseFilters.tsx:100",children:[e.jsx(r,{"data-loc":"client/src/components/expenses/ExpenseFilters.tsx:101",value:"all",children:"All"}),e.jsx(r,{"data-loc":"client/src/components/expenses/ExpenseFilters.tsx:102",value:"billable",children:"Billable Only"}),e.jsx(r,{"data-loc":"client/src/components/expenses/ExpenseFilters.tsx:103",value:"non-billable",children:"Non-Billable Only"})]})]})}),e.jsx(Z,{"data-loc":"client/src/components/expenses/ExpenseFilters.tsx:108",label:"Client",children:e.jsxs(L,{"data-loc":"client/src/components/expenses/ExpenseFilters.tsx:109",value:a?.toString()||"all",onValueChange:s=>C(s==="all"?null:parseInt(s)),children:[e.jsx(_,{"data-loc":"client/src/components/expenses/ExpenseFilters.tsx:115",children:e.jsx(O,{"data-loc":"client/src/components/expenses/ExpenseFilters.tsx:116",placeholder:"All Clients"})}),e.jsxs(z,{"data-loc":"client/src/components/expenses/ExpenseFilters.tsx:118",children:[e.jsx(r,{"data-loc":"client/src/components/expenses/ExpenseFilters.tsx:119",value:"all",children:"All Clients"}),U&&U.map(s=>e.jsx(r,{"data-loc":"client/src/components/expenses/ExpenseFilters.tsx:122",value:s.id.toString(),children:s.name},s.id))]})]})}),e.jsx(Z,{"data-loc":"client/src/components/expenses/ExpenseFilters.tsx:130",label:"Category",children:e.jsxs(L,{"data-loc":"client/src/components/expenses/ExpenseFilters.tsx:131",value:W?.toString()||"all",onValueChange:s=>R(s==="all"?null:parseInt(s)),children:[e.jsx(_,{"data-loc":"client/src/components/expenses/ExpenseFilters.tsx:137",children:e.jsx(O,{"data-loc":"client/src/components/expenses/ExpenseFilters.tsx:138",placeholder:"All Categories"})}),e.jsxs(z,{"data-loc":"client/src/components/expenses/ExpenseFilters.tsx:140",children:[e.jsx(r,{"data-loc":"client/src/components/expenses/ExpenseFilters.tsx:141",value:"all",children:"All Categories"}),c&&c.map(s=>e.jsx(r,{"data-loc":"client/src/components/expenses/ExpenseFilters.tsx:145",value:s.id.toString(),children:s.name},s.id))]})]})}),e.jsx(Z,{"data-loc":"client/src/components/expenses/ExpenseFilters.tsx:154",label:"Date Range",children:e.jsxs(L,{"data-loc":"client/src/components/expenses/ExpenseFilters.tsx:155",value:K,onValueChange:G,children:[e.jsx(_,{"data-loc":"client/src/components/expenses/ExpenseFilters.tsx:156",children:e.jsx(O,{"data-loc":"client/src/components/expenses/ExpenseFilters.tsx:157",placeholder:"All Time"})}),e.jsxs(z,{"data-loc":"client/src/components/expenses/ExpenseFilters.tsx:159",children:[e.jsx(r,{"data-loc":"client/src/components/expenses/ExpenseFilters.tsx:160",value:"all",children:"All Time"}),e.jsx(r,{"data-loc":"client/src/components/expenses/ExpenseFilters.tsx:161",value:"today",children:"Today"}),e.jsx(r,{"data-loc":"client/src/components/expenses/ExpenseFilters.tsx:162",value:"7days",children:"Last 7 Days"}),e.jsx(r,{"data-loc":"client/src/components/expenses/ExpenseFilters.tsx:163",value:"30days",children:"Last 30 Days"}),e.jsx(r,{"data-loc":"client/src/components/expenses/ExpenseFilters.tsx:164",value:"90days",children:"Last 90 Days"}),e.jsx(r,{"data-loc":"client/src/components/expenses/ExpenseFilters.tsx:165",value:"year",children:"Last Year"})]})]})})]})})}const Bs={cash:"Cash",credit_card:"Credit Card",debit_card:"Debit Card",bank_transfer:"Bank Transfer",check:"Check",other:"Other"};function Ms({open:x,onOpenChange:j,selectedExpense:t}){return e.jsx(Ee,{"data-loc":"client/src/components/expenses/ExpenseDetailsDialog.tsx:34",open:x,onOpenChange:j,children:e.jsxs(be,{"data-loc":"client/src/components/expenses/ExpenseDetailsDialog.tsx:35",className:"max-w-lg",children:[e.jsx(De,{"data-loc":"client/src/components/expenses/ExpenseDetailsDialog.tsx:36",className:"pb-4",children:e.jsx(fe,{"data-loc":"client/src/components/expenses/ExpenseDetailsDialog.tsx:37",className:"text-xl",children:"Expense Details"})}),t&&e.jsxs("div",{"data-loc":"client/src/components/expenses/ExpenseDetailsDialog.tsx:40",className:"space-y-5 px-0",children:[e.jsxs("div",{"data-loc":"client/src/components/expenses/ExpenseDetailsDialog.tsx:41",className:"flex items-center gap-4",children:[e.jsx("div",{"data-loc":"client/src/components/expenses/ExpenseDetailsDialog.tsx:42",className:"w-5 h-5 rounded-full shadow-sm",style:{backgroundColor:t.categoryColor||"#3B82F6"}}),e.jsxs("div",{"data-loc":"client/src/components/expenses/ExpenseDetailsDialog.tsx:48",children:[e.jsx("h3",{"data-loc":"client/src/components/expenses/ExpenseDetailsDialog.tsx:49",className:"font-semibold text-lg",children:t.description}),e.jsx("p",{"data-loc":"client/src/components/expenses/ExpenseDetailsDialog.tsx:52",className:"text-sm text-muted-foreground",children:t.categoryName||"Uncategorized"})]})]}),e.jsxs("div",{"data-loc":"client/src/components/expenses/ExpenseDetailsDialog.tsx:58",className:"grid grid-cols-2 gap-6 text-sm",children:[e.jsxs("div",{"data-loc":"client/src/components/expenses/ExpenseDetailsDialog.tsx:59",className:"space-y-2",children:[e.jsx("p",{"data-loc":"client/src/components/expenses/ExpenseDetailsDialog.tsx:60",className:"text-muted-foreground",children:"Date"}),e.jsx("p",{"data-loc":"client/src/components/expenses/ExpenseDetailsDialog.tsx:61",className:"font-medium",children:e.jsx(Ue,{"data-loc":"client/src/components/expenses/ExpenseDetailsDialog.tsx:62",date:t.date})})]}),e.jsxs("div",{"data-loc":"client/src/components/expenses/ExpenseDetailsDialog.tsx:65",className:"space-y-2",children:[e.jsx("p",{"data-loc":"client/src/components/expenses/ExpenseDetailsDialog.tsx:66",className:"text-muted-foreground",children:"Amount"}),e.jsx("p",{"data-loc":"client/src/components/expenses/ExpenseDetailsDialog.tsx:67",className:"font-medium",children:e.jsx(B,{"data-loc":"client/src/components/expenses/ExpenseDetailsDialog.tsx:68",amount:parseFloat(t.amount)})})]}),t.vendor&&e.jsxs("div",{"data-loc":"client/src/components/expenses/ExpenseDetailsDialog.tsx:72",children:[e.jsx("p",{"data-loc":"client/src/components/expenses/ExpenseDetailsDialog.tsx:73",className:"text-muted-foreground mb-1",children:"Vendor"}),e.jsx("p",{"data-loc":"client/src/components/expenses/ExpenseDetailsDialog.tsx:74",className:"font-medium",children:t.vendor})]}),t.paymentMethod&&e.jsxs("div",{"data-loc":"client/src/components/expenses/ExpenseDetailsDialog.tsx:78",children:[e.jsx("p",{"data-loc":"client/src/components/expenses/ExpenseDetailsDialog.tsx:79",className:"text-muted-foreground mb-1",children:"Payment Method"}),e.jsx("p",{"data-loc":"client/src/components/expenses/ExpenseDetailsDialog.tsx:80",className:"font-medium",children:Bs[t.paymentMethod]||t.paymentMethod})]}),t.taxAmount&&parseFloat(t.taxAmount)>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{"data-loc":"client/src/components/expenses/ExpenseDetailsDialog.tsx:89",children:[e.jsx("p",{"data-loc":"client/src/components/expenses/ExpenseDetailsDialog.tsx:90",className:"text-muted-foreground mb-1",children:"Tax Amount"}),e.jsx("p",{"data-loc":"client/src/components/expenses/ExpenseDetailsDialog.tsx:91",className:"font-medium",children:e.jsx(B,{"data-loc":"client/src/components/expenses/ExpenseDetailsDialog.tsx:92",amount:parseFloat(t.taxAmount)})})]}),e.jsxs("div",{"data-loc":"client/src/components/expenses/ExpenseDetailsDialog.tsx:97",children:[e.jsx("p",{"data-loc":"client/src/components/expenses/ExpenseDetailsDialog.tsx:98",className:"text-muted-foreground mb-1",children:"Total (incl. tax)"}),e.jsx("p",{"data-loc":"client/src/components/expenses/ExpenseDetailsDialog.tsx:101",className:"font-medium",children:e.jsx(B,{"data-loc":"client/src/components/expenses/ExpenseDetailsDialog.tsx:102",amount:parseFloat(t.amount)+parseFloat(t.taxAmount)})})]})]}),e.jsxs("div",{"data-loc":"client/src/components/expenses/ExpenseDetailsDialog.tsx:112",children:[e.jsx("p",{"data-loc":"client/src/components/expenses/ExpenseDetailsDialog.tsx:113",className:"text-muted-foreground mb-1",children:"Billable Status"}),e.jsx("p",{"data-loc":"client/src/components/expenses/ExpenseDetailsDialog.tsx:114",className:"font-medium",children:t.isBillable?e.jsx(ee,{"data-loc":"client/src/components/expenses/ExpenseDetailsDialog.tsx:116",variant:"default",className:"bg-green-500/10 text-green-500",children:"Billable"}):e.jsx(ee,{"data-loc":"client/src/components/expenses/ExpenseDetailsDialog.tsx:123",variant:"secondary",children:"Non-Billable"})})]}),t.isBillable&&e.jsxs("div",{"data-loc":"client/src/components/expenses/ExpenseDetailsDialog.tsx:128",children:[e.jsx("p",{"data-loc":"client/src/components/expenses/ExpenseDetailsDialog.tsx:129",className:"text-muted-foreground mb-1",children:"Billable To"}),e.jsxs("p",{"data-loc":"client/src/components/expenses/ExpenseDetailsDialog.tsx:130",className:"font-medium",children:[t.clientName||"Unassigned",t.invoiceId&&e.jsx("span",{"data-loc":"client/src/components/expenses/ExpenseDetailsDialog.tsx:133",className:"ml-2 text-xs text-muted-foreground",children:"(Linked to invoice)"})]})]})]}),t.receiptUrl&&e.jsx("div",{"data-loc":"client/src/components/expenses/ExpenseDetailsDialog.tsx:143",className:"pt-4 border-t",children:e.jsxs("a",{"data-loc":"client/src/components/expenses/ExpenseDetailsDialog.tsx:144",href:t.receiptUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-primary hover:underline",children:[e.jsx(ye,{"data-loc":"client/src/components/expenses/ExpenseDetailsDialog.tsx:150",className:"w-4 h-4"}),"View Receipt"]})})]})]})})}const Rs=5*1024*1024,Ie=["image/jpeg","image/jpg","image/png","image/gif","image/webp","application/pdf"];function Us({value:x,onChange:j,disabled:t}){const[n,m]=l.useState(!1),[u,f]=l.useState(!1),i=l.useRef(null),b=I.expenses.uploadReceipt.useMutation(),p=s=>Ie.includes(s.type)?s.size>Rs?(N.error("File too large. Maximum size is 5MB."),!1):!0:(N.error("Invalid file type. Please upload an image (JPG, PNG, GIF, WebP) or PDF."),!1),P=async s=>{if(p(s)){f(!0);try{const g=new FileReader;g.onload=async $=>{const J=($.target?.result).split(",")[1];try{const v=await b.mutateAsync({fileData:J,fileName:s.name,contentType:s.type});j({url:v.url,key:v.key}),N.success("Receipt uploaded successfully")}catch{N.error("Failed to upload receipt")}finally{f(!1)}},g.onerror=()=>{N.error("Failed to read file"),f(!1)},g.readAsDataURL(s)}catch{N.error("Failed to process file"),f(!1)}}},a=s=>{if(s.preventDefault(),m(!1),t||u)return;const g=s.dataTransfer.files[0];g&&P(g)},C=s=>{s.preventDefault(),!t&&!u&&m(!0)},W=()=>{m(!1)},R=()=>{!t&&!u&&i.current?.click()},K=s=>{const g=s.target.files?.[0];g&&P(g)},G=()=>{j(null),i.current&&(i.current.value="")},U=s=>s.toLowerCase().endsWith(".pdf")?"pdf":"image",c=s=>s.split("/").pop()||"receipt";if(x){const s=U(x.url),g=c(x.url);return e.jsx("div",{"data-loc":"client/src/components/expenses/ReceiptUpload.tsx:157",className:"space-y-2",children:e.jsx("div",{"data-loc":"client/src/components/expenses/ReceiptUpload.tsx:158",className:"border rounded-lg p-4 bg-muted/30",children:e.jsxs("div",{"data-loc":"client/src/components/expenses/ReceiptUpload.tsx:159",className:"flex items-start gap-4",children:[s==="image"?e.jsx("div",{"data-loc":"client/src/components/expenses/ReceiptUpload.tsx:161",className:"relative w-24 h-24 flex-shrink-0",children:e.jsx("img",{"data-loc":"client/src/components/expenses/ReceiptUpload.tsx:162",src:x.url,alt:"Receipt",className:"w-full h-full object-cover rounded"})}):e.jsx("div",{"data-loc":"client/src/components/expenses/ReceiptUpload.tsx:169",className:"w-24 h-24 flex-shrink-0 flex items-center justify-center bg-background border rounded",children:e.jsx(Re,{"data-loc":"client/src/components/expenses/ReceiptUpload.tsx:170",className:"w-12 h-12 text-muted-foreground"})}),e.jsxs("div",{"data-loc":"client/src/components/expenses/ReceiptUpload.tsx:174",className:"flex-1 min-w-0",children:[e.jsx("p",{"data-loc":"client/src/components/expenses/ReceiptUpload.tsx:175",className:"text-sm font-medium truncate",children:g}),e.jsx("p",{"data-loc":"client/src/components/expenses/ReceiptUpload.tsx:176",className:"text-xs text-muted-foreground mt-1",children:s==="pdf"?"PDF Document":"Image"}),e.jsxs("div",{"data-loc":"client/src/components/expenses/ReceiptUpload.tsx:179",className:"flex gap-2 mt-3",children:[e.jsx(V,{"data-loc":"client/src/components/expenses/ReceiptUpload.tsx:180",type:"button",variant:"outline",size:"sm",onClick:()=>window.open(x.url,"_blank"),children:"View Full Size"}),e.jsxs(V,{"data-loc":"client/src/components/expenses/ReceiptUpload.tsx:188",type:"button",variant:"outline",size:"sm",onClick:G,disabled:t,children:[e.jsx(ns,{"data-loc":"client/src/components/expenses/ReceiptUpload.tsx:195",className:"w-4 h-4 mr-1"}),"Remove"]})]})]})]})})})}return e.jsxs("div",{"data-loc":"client/src/components/expenses/ReceiptUpload.tsx:207",children:[e.jsx("input",{"data-loc":"client/src/components/expenses/ReceiptUpload.tsx:208",ref:i,type:"file",accept:Ie.join(","),onChange:K,className:"hidden",disabled:t||u}),e.jsx("div",{"data-loc":"client/src/components/expenses/ReceiptUpload.tsx:217",onClick:R,onDrop:a,onDragOver:C,onDragLeave:W,className:`
          border-2 border-dashed rounded-lg p-8 text-center cursor-pointer
          transition-colors
          ${n?"border-primary bg-primary/5":"border-border"}
          ${t||u?"opacity-50 cursor-not-allowed":"hover:border-primary/50"}
        `,children:u?e.jsxs("div",{"data-loc":"client/src/components/expenses/ReceiptUpload.tsx:230",className:"flex flex-col items-center gap-3",children:[e.jsx(as,{"data-loc":"client/src/components/expenses/ReceiptUpload.tsx:231",className:"w-10 h-10 text-primary animate-spin"}),e.jsx("p",{"data-loc":"client/src/components/expenses/ReceiptUpload.tsx:232",className:"text-sm text-muted-foreground",children:"Uploading receipt..."})]}):e.jsxs("div",{"data-loc":"client/src/components/expenses/ReceiptUpload.tsx:237",className:"flex flex-col items-center gap-3",children:[e.jsx("div",{"data-loc":"client/src/components/expenses/ReceiptUpload.tsx:238",className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(ls,{"data-loc":"client/src/components/expenses/ReceiptUpload.tsx:239",className:"w-6 h-6 text-primary"})}),e.jsxs("div",{"data-loc":"client/src/components/expenses/ReceiptUpload.tsx:241",children:[e.jsx("p",{"data-loc":"client/src/components/expenses/ReceiptUpload.tsx:242",className:"text-sm font-medium",children:"Drop receipt here or click to upload"}),e.jsx("p",{"data-loc":"client/src/components/expenses/ReceiptUpload.tsx:245",className:"text-xs text-muted-foreground mt-1",children:"Images (JPG, PNG, GIF, WebP) or PDF, max 5MB"})]})]})})]})}function Ls({open:x,onOpenChange:j,editingExpense:t,expenseForm:n,setExpenseForm:m,categories:u,clients:f,ids:i,handleSaveExpense:b,createExpenseMutation:p,updateExpenseMutation:P}){return e.jsxs(Ee,{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:74",open:x,onOpenChange:j,children:[e.jsx(Ze,{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:75",asChild:!0,children:e.jsxs(V,{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:76",children:[e.jsx(he,{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:77",className:"w-4 h-4 mr-2"}),"Add Expense"]})}),e.jsxs(be,{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:81",className:"max-h-[90vh] overflow-y-auto",children:[e.jsx(De,{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:82",className:"pb-4",children:e.jsx(fe,{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:83",className:"text-xl",children:t?"Edit Expense":"Add Expense"})}),e.jsxs("form",{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:88",onSubmit:b,className:"space-y-5",children:[e.jsxs("div",{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:89",children:[e.jsx(w,{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:90",htmlFor:i.categoryName,children:"Category"}),e.jsxs(L,{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:91",value:n.categoryId.toString(),onValueChange:a=>m({...n,categoryId:parseInt(a)}),children:[e.jsx(_,{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:100",children:e.jsx(O,{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:101",placeholder:"Select category"})}),e.jsx(z,{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:103",children:u&&u.length>0?u.map(a=>e.jsx(r,{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:107",value:a.id.toString(),children:a.name},a.id)):e.jsx(r,{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:113",value:"0",disabled:!0,children:"No categories - create one first"})})]})]}),e.jsxs("div",{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:121",children:[e.jsx(w,{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:122",htmlFor:i.amount,children:"Amount"}),e.jsx(Q,{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:123",id:i.amount,type:"number",step:"0.01",value:n.amount,onChange:a=>m({...n,amount:a.target.value}),placeholder:"0.00",required:!0})]}),e.jsxs("div",{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:136",children:[e.jsx(w,{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:137",htmlFor:i.date,children:"Date"}),e.jsx(Q,{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:138",id:i.date,type:"date",value:n.date,onChange:a=>m({...n,date:a.target.value}),required:!0})]}),e.jsxs("div",{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:149",children:[e.jsx(w,{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:150",htmlFor:i.description,children:"Description"}),e.jsx(ms,{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:151",id:i.description,value:n.description,onChange:a=>m({...n,description:a.target.value}),placeholder:"What was this expense for?",rows:3,required:!0})]}),e.jsxs("div",{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:166",className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:167",children:[e.jsx(w,{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:168",htmlFor:i.vendor,children:"Vendor/Supplier"}),e.jsx(Q,{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:169",id:i.vendor,value:n.vendor,onChange:a=>m({...n,vendor:a.target.value}),placeholder:"e.g., Office Depot, Amazon"})]}),e.jsxs("div",{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:182",children:[e.jsx(w,{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:183",htmlFor:"paymentMethod",children:"Payment Method"}),e.jsxs(L,{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:184",value:n.paymentMethod,onValueChange:a=>m({...n,paymentMethod:a}),children:[e.jsx(_,{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:190",children:e.jsx(O,{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:191",placeholder:"Select method"})}),e.jsxs(z,{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:193",children:[e.jsx(r,{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:194",value:"cash",children:"Cash"}),e.jsx(r,{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:195",value:"credit_card",children:"Credit Card"}),e.jsx(r,{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:196",value:"debit_card",children:"Debit Card"}),e.jsx(r,{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:197",value:"bank_transfer",children:"Bank Transfer"}),e.jsx(r,{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:198",value:"check",children:"Check"}),e.jsx(r,{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:199",value:"other",children:"Other"})]})]})]})]}),e.jsxs("div",{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:205",children:[e.jsx(w,{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:206",htmlFor:i.taxAmount,children:"Tax Amount"}),e.jsx(Q,{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:207",id:i.taxAmount,type:"number",step:"0.01",value:n.taxAmount,onChange:a=>m({...n,taxAmount:a.target.value}),placeholder:"0.00"}),n.taxAmount&&e.jsxs("p",{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:221",className:"text-sm text-muted-foreground mt-1",children:["Total:"," ",e.jsx(B,{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:223",amount:parseFloat(n.amount||"0")+parseFloat(n.taxAmount||"0")})]})]}),e.jsxs("div",{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:233",children:[e.jsx(w,{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:234",children:"Receipt Upload"}),e.jsx(Us,{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:235",value:n.receipt,onChange:a=>m({...n,receipt:a})})]}),e.jsxs("div",{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:241",className:"space-y-3 border-t pt-4",children:[e.jsxs("div",{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:242",className:"flex items-center space-x-2",children:[e.jsx(gs,{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:243",id:i.isBillable,checked:n.isBillable,onCheckedChange:a=>m({...n,isBillable:a,clientId:a?n.clientId:null})}),e.jsx(w,{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:254",htmlFor:i.isBillable,className:"cursor-pointer",children:"This is a billable expense"})]}),n.isBillable&&e.jsxs("div",{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:260",children:[e.jsx(w,{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:261",htmlFor:i.clientId,children:"Client"}),e.jsxs(L,{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:262",value:n.clientId?.toString()||"",onValueChange:a=>m({...n,clientId:parseInt(a)}),children:[e.jsx(_,{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:271",children:e.jsx(O,{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:272",placeholder:"Select client"})}),e.jsx(z,{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:274",children:f&&f.length>0?f.map(a=>e.jsx(r,{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:277",value:a.id.toString(),children:a.name},a.id)):e.jsx(r,{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:285",value:"0",disabled:!0,children:"No clients available"})})]})]})]}),e.jsxs("div",{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:295",className:"flex gap-2",children:[e.jsx(V,{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:296",type:"submit",disabled:p.isPending||P.isPending,children:t?"Update Expense":"Add Expense"}),e.jsx(V,{"data-loc":"client/src/components/expenses/ExpenseDialog.tsx:305",type:"button",variant:"outline",onClick:()=>j(!1),children:"Cancel"})]})]})]})]})}const _s={cash:"Cash",credit_card:"Credit Card",debit_card:"Debit Card",bank_transfer:"Bank Transfer",check:"Check",other:"Other"};function Os({isLoading:x,expenses:j,filteredAndSortedExpenses:t,paginatedExpenses:n,totalItems:m,totalPages:u,pageSize:f,currentPage:i,sort:b,handleSort:p,setCurrentPage:P,setPageSize:a,openExpenseDetails:C,handleEdit:W,deleteExpenseMutation:R,hasActiveFilters:K,setIsExpenseDialogOpen:G,clearAllFilters:U}){return e.jsx(e.Fragment,{children:e.jsxs(q,{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:96",children:[e.jsxs(Be,{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:97",children:[e.jsx(es,{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:98",children:"All Expenses"}),e.jsxs(ss,{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:99",children:[t.length," expense",t.length!==1?"s":""," found"]})]}),e.jsxs(je,{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:104",className:"p-0",children:[e.jsx(ys,{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:105",minWidth:800,children:e.jsxs(us,{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:106",children:[e.jsx(hs,{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:107",children:e.jsxs(Pe,{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:108",children:[e.jsx(ae,{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:109",label:"Description",sortKey:"description",currentSort:b,onSort:p}),e.jsx(ae,{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:115",label:"Category",sortKey:"categoryName",currentSort:b,onSort:p}),e.jsx(ae,{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:121",label:"Date",sortKey:"date",currentSort:b,onSort:p}),e.jsx(ue,{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:127",children:"Payment"}),e.jsx(ae,{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:128",label:"Amount",sortKey:"amount",currentSort:b,onSort:p,align:"right"}),e.jsx(ue,{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:135",children:"Status"}),e.jsx(ue,{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:136",className:"w-[50px]"})]})}),e.jsx(js,{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:139",children:x?e.jsx(vs,{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:141",colSpan:7,rows:5}):!j||j.length===0?e.jsx(Fe,{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:143",colSpan:7,preset:"expenses",action:{label:"Add Your First Expense",onClick:()=>G(!0)}}):t.length===0?e.jsx(Fe,{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:152",colSpan:7,title:"No matching expenses",description:"No expenses match your current filters",illustration:"/sleeky/empty-states/search-results.png",action:{label:"Clear Filters",onClick:U}}):n.map(c=>e.jsxs(Pe,{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:164",className:"cursor-pointer hover:bg-muted/50",onClick:()=>C(c),children:[e.jsx(Y,{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:169",children:e.jsxs("div",{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:170",className:"flex items-center gap-3",children:[e.jsx("div",{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:171",className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:c.categoryColor||"#3B82F6"}}),e.jsxs("div",{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:177",children:[e.jsx("div",{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:178",className:"font-medium",children:c.description}),c.vendor&&e.jsx("div",{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:182",className:"text-sm text-muted-foreground",children:c.vendor})]})]})}),e.jsx(Y,{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:189",children:e.jsx(ee,{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:190",variant:"outline",children:c.categoryName})}),e.jsx(Y,{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:192",children:e.jsx(Ue,{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:193",date:c.date})}),e.jsx(Y,{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:195",children:c.paymentMethod?e.jsx("span",{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:197",className:"text-sm",children:_s[c.paymentMethod]||c.paymentMethod}):e.jsx("span",{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:202",className:"text-muted-foreground",children:"â€”"})}),e.jsx(Y,{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:205",className:"text-right",children:e.jsxs("div",{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:206",children:[e.jsx(B,{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:207",amount:parseFloat(c.amount),bold:!0}),c.taxAmount&&parseFloat(c.taxAmount)>0&&e.jsxs("div",{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:210",className:"text-xs text-muted-foreground",children:["+",e.jsx(B,{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:212",amount:parseFloat(c.taxAmount)})," ","tax"]})]})}),e.jsx(Y,{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:220",children:e.jsxs("div",{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:221",className:"flex items-center gap-2",children:[c.isBillable?e.jsx(ee,{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:223",variant:"default",className:"bg-green-500/10 text-green-500 hover:bg-green-500/20",children:"Billable"}):e.jsx(ee,{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:230",variant:"secondary",children:"Non-Billable"}),c.receiptUrl&&e.jsx(ye,{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:233",className:"w-4 h-4 text-muted-foreground"})]})}),e.jsx(Y,{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:237",children:e.jsxs(Es,{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:238",children:[e.jsx(bs,{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:239",asChild:!0,onClick:s=>s.stopPropagation(),children:e.jsx(V,{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:243",variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(cs,{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:248",className:"h-4 w-4"})})}),e.jsxs(Ds,{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:251",align:"end",children:[e.jsxs(ne,{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:252",onClick:s=>{s.stopPropagation(),C(c)},children:[e.jsx(os,{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:258",className:"mr-2 h-4 w-4"}),"View Details"]}),c.receiptUrl&&e.jsxs(ne,{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:262",onClick:s=>{s.stopPropagation(),window.open(c.receiptUrl,"_blank")},children:[e.jsx(rs,{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:268",className:"mr-2 h-4 w-4"}),"View Receipt"]}),e.jsx(fs,{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:272"}),e.jsxs(ne,{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:273",onClick:s=>{s.stopPropagation(),W(c)},children:[e.jsx(is,{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:279",className:"mr-2 h-4 w-4"}),"Edit"]}),e.jsxs(ne,{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:282",onClick:s=>{s.stopPropagation(),window.confirm("Are you sure you want to delete this expense?")&&R.mutate(c.id)},className:"text-destructive",children:[e.jsx(Me,{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:295",className:"mr-2 h-4 w-4"}),"Delete"]})]})]})})]},c.id))})]})}),!x&&j&&j.length>0&&t.length>0&&u>1&&e.jsx("div",{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:313",className:"px-5 pb-4 border-t border-border/20 pt-4",children:e.jsx(Ns,{"data-loc":"client/src/components/expenses/ExpenseTable.tsx:314",currentPage:i,totalPages:u,pageSize:f,totalItems:m,onPageChange:P,onPageSizeChange:c=>{a(c),P(1)},pageSizeOptions:[10,25,50,100]})})]})]})})}function ot(){const{data:x,isLoading:j}=I.expenses.list.useQuery(),{data:t}=I.expenses.categories.list.useQuery(),{data:n}=I.clients.list.useQuery(),m=I.expenses.create.useMutation(),u=I.expenses.update.useMutation(),f=I.expenses.delete.useMutation(),i=I.expenses.categories.create.useMutation(),b=I.expenses.categories.delete.useMutation(),p=I.useUtils(),{pushUndoAction:P}=ts(),[a,C]=l.useState(!1),[W,R]=l.useState(!1),K={categoryColor:l.useId(),categoryName:l.useId(),amount:l.useId(),date:l.useId(),description:l.useId(),vendor:l.useId(),taxAmount:l.useId(),isBillable:l.useId(),clientId:l.useId()};l.useEffect(()=>{const o=()=>{C(!0)};return window.addEventListener("open-new-expense-dialog",o),()=>window.removeEventListener("open-new-expense-dialog",o)},[]);const[G,U]=l.useState(null),[c,s]=l.useState(!1),[g,$]=l.useState(null),[F,J]=l.useState("all"),[v,oe]=l.useState(null),[M,re]=l.useState(null),[A,ie]=l.useState("all"),[Le,_e]=l.useState(""),[xe,Ne]=l.useState(1),[se,Oe]=l.useState(25),{sort:ze,handleSort:Ve,sortData:ve}=ds({defaultKey:"date",defaultDirection:"desc"}),[E,ke]=l.useState(null),[y,pe]=l.useState({categoryId:0,amount:"",date:new Date().toISOString().split("T")[0],description:"",vendor:"",paymentMethod:"",taxAmount:"",receipt:null,isBillable:!1,clientId:null}),[Ce,Se]=l.useState({name:"",color:"#3B82F6"}),X=l.useMemo(()=>{if(!x)return[];const o=x.filter(h=>{if(g&&h.paymentMethod!==g||F==="billable"&&!h.isBillable||F==="non-billable"&&h.isBillable||v&&h.clientId!==v||M&&h.categoryId!==M)return!1;if(A!=="all"){const S=new Date(h.date),H=new Date;switch(A){case"today":if(S.toDateString()!==H.toDateString())return!1;break;case"7days":if(S<new Date(H.getTime()-10080*60*1e3))return!1;break;case"30days":if(S<new Date(H.getTime()-720*60*60*1e3))return!1;break;case"90days":if(S<new Date(H.getTime()-2160*60*60*1e3))return!1;break;case"year":if(S<new Date(H.getTime()-365*24*60*60*1e3))return!1;break}}return!0});return ve(o)},[x,g,F,v,M,A,ve]),we=X.length,We=Math.ceil(we/se),Ke=X.slice((xe-1)*se,xe*se);l.useEffect(()=>{Ne(1)},[g,F,v,M,A]);const T=l.useMemo(()=>{const o=X,h=o.reduce((D,k)=>D+parseFloat(k.amount||"0"),0),S=o.reduce((D,k)=>D+parseFloat(k.taxAmount||"0"),0),H=h+S,Te=o.filter(D=>D.isBillable).length,Je=o.length-Te,Xe=o.filter(D=>D.isBillable).reduce((D,k)=>D+parseFloat(k.amount||"0")+parseFloat(k.taxAmount||"0"),0),ge={};o.forEach(D=>{const k=D.paymentMethod||"unspecified";ge[k]=(ge[k]||0)+parseFloat(D.amount||"0")});const te={};return o.forEach(D=>{const k=D.categoryId?.toString()||"uncategorized";te[k]||(te[k]={name:D.categoryName||"Uncategorized",color:D.categoryColor||"#6B7280",amount:0}),te[k].amount+=parseFloat(D.amount||"0")}),{totalAmount:h,totalTax:S,totalWithTax:H,count:o.length,billableCount:Te,nonBillableCount:Je,billableAmount:Xe,byPaymentMethod:ge,byCategory:te}},[X]),de=!!(g||F!=="all"||v||M||A!=="all"),Ge=l.useMemo(()=>{const o=[];if(g&&o.push({key:"method",label:"Method",value:g.charAt(0).toUpperCase()+g.slice(1).replace("_"," "),onRemove:()=>$(null)}),F!=="all"&&o.push({key:"billable",label:"Billable",value:F==="billable"?"Billable Only":"Non-Billable",onRemove:()=>J("all")}),v){const h=n?.find(S=>S.id===v);o.push({key:"client",label:"Client",value:h?.name||"Unknown",onRemove:()=>oe(null)})}if(M){const h=t?.find(S=>S.id===M);o.push({key:"category",label:"Category",value:h?.name||"Unknown",onRemove:()=>re(null)})}if(A!=="all"){const h={today:"Today","7days":"Last 7 Days","30days":"Last 30 Days","90days":"Last 90 Days",year:"Last Year"};o.push({key:"dateRange",label:"Date",value:h[A]||A,onRemove:()=>ie("all")})}return o},[g,F,v,M,A,n,t]),me=()=>{$(null),J("all"),oe(null),re(null),ie("all")},He=async o=>{if(o.preventDefault(),!y.categoryId){N.error("Please select a category");return}if(y.isBillable&&!y.clientId){N.error("Please select a client for billable expenses");return}try{const h={categoryId:y.categoryId,amount:parseFloat(y.amount),date:new Date(y.date),description:y.description,vendor:y.vendor||void 0,paymentMethod:y.paymentMethod||void 0,taxAmount:y.taxAmount?parseFloat(y.taxAmount):void 0,receiptUrl:y.receipt?.url,receiptKey:y.receipt?.key,isBillable:y.isBillable,clientId:y.clientId||void 0};E?(await u.mutateAsync({id:E.id,...h}),N.success("Expense updated")):(await m.mutateAsync(h),N.success("Expense added")),p.expenses.list.invalidate(),p.expenses.stats.invalidate(),C(!1)}catch{N.error(E?"Failed to update expense":"Failed to add expense")}},Ye=async o=>{o.preventDefault();try{await i.mutateAsync(Ce),p.expenses.categories.list.invalidate(),N.success("Category created"),R(!1),Se({name:"",color:"#3B82F6"})}catch{N.error("Failed to create category")}};l.useRef(null);const qe=o=>{U(o),s(!0)},Qe=o=>{ke(o),C(!0)};l.useEffect(()=>{E&&a?pe({categoryId:E.categoryId||0,amount:E.amount?.toString()||"",date:new Date(E.date).toISOString().split("T")[0],description:E.description||"",vendor:E.vendor||"",paymentMethod:E.paymentMethod||"",taxAmount:E.taxAmount?.toString()||"",receipt:E.receiptUrl?{url:E.receiptUrl,key:E.receiptKey||""}:null,isBillable:E.isBillable||!1,clientId:E.clientId||null}):a||(ke(null),pe({categoryId:0,amount:"",date:new Date().toISOString().split("T")[0],description:"",vendor:"",paymentMethod:"",taxAmount:"",receipt:null,isBillable:!1,clientId:null}))},[E,a]);const $e=async o=>{if(confirm("Are you sure you want to delete this category?"))try{await b.mutateAsync({id:o}),p.expenses.categories.list.invalidate(),N.success("Category deleted")}catch{N.error("Failed to delete category")}};return j?e.jsx(Ae,{"data-loc":"client/src/pages/Expenses.tsx:655",title:"Expenses",subtitle:"Track your business expenses and categorize spending",children:e.jsx(Fs,{"data-loc":"client/src/pages/Expenses.tsx:659"})}):e.jsxs(Ae,{"data-loc":"client/src/pages/Expenses.tsx:665",title:"Expenses",subtitle:"Track your business expenses and categorize spending",headerActions:e.jsxs("div",{"data-loc":"client/src/pages/Expenses.tsx:669",className:"flex gap-2",children:[e.jsx(As,{"data-loc":"client/src/pages/Expenses.tsx:670",open:W,onOpenChange:R,categories:t,categoryForm:Ce,setCategoryForm:Se,createCategoryMutation:i,handleCreateCategory:Ye,handleDeleteCategory:$e,ids:K}),e.jsx(Ls,{"data-loc":"client/src/pages/Expenses.tsx:682",open:a,onOpenChange:C,editingExpense:E,expenseForm:y,setExpenseForm:pe,categories:t,clients:n,ids:K,handleSaveExpense:He,createExpenseMutation:m,updateExpenseMutation:u})]}),children:[e.jsxs("div",{"data-loc":"client/src/pages/Expenses.tsx:699",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsx(q,{"data-loc":"client/src/pages/Expenses.tsx:700",className:"p-4",children:e.jsxs("div",{"data-loc":"client/src/pages/Expenses.tsx:701",className:"flex items-center gap-3",children:[e.jsx(xs,{"data-loc":"client/src/pages/Expenses.tsx:702",className:"w-8 h-8 text-muted-foreground"}),e.jsxs("div",{"data-loc":"client/src/pages/Expenses.tsx:703",children:[e.jsx("p",{"data-loc":"client/src/pages/Expenses.tsx:704",className:"text-sm text-muted-foreground",children:"Total Expenses"}),e.jsx("p",{"data-loc":"client/src/pages/Expenses.tsx:705",className:"text-2xl",children:e.jsx(B,{"data-loc":"client/src/pages/Expenses.tsx:706",amount:T.totalWithTax,bold:!0})}),T.totalTax>0&&e.jsxs("p",{"data-loc":"client/src/pages/Expenses.tsx:709",className:"text-xs text-muted-foreground",children:["(incl. ",e.jsx(B,{"data-loc":"client/src/pages/Expenses.tsx:710",amount:T.totalTax})," tax)"]})]})]})}),e.jsx(q,{"data-loc":"client/src/pages/Expenses.tsx:717",className:"p-4",children:e.jsxs("div",{"data-loc":"client/src/pages/Expenses.tsx:718",className:"flex items-center gap-3",children:[e.jsx(Re,{"data-loc":"client/src/pages/Expenses.tsx:719",className:"w-8 h-8 text-muted-foreground"}),e.jsxs("div",{"data-loc":"client/src/pages/Expenses.tsx:720",children:[e.jsx("p",{"data-loc":"client/src/pages/Expenses.tsx:721",className:"text-sm text-muted-foreground",children:"Expense Count"}),e.jsx("p",{"data-loc":"client/src/pages/Expenses.tsx:722",className:"text-2xl font-numeric-bold",children:T.count}),de&&x&&e.jsxs("p",{"data-loc":"client/src/pages/Expenses.tsx:724",className:"text-xs text-muted-foreground",children:["of ",e.jsx("span",{"data-loc":"client/src/pages/Expenses.tsx:725",className:"font-numeric",children:x.length})," ","total"]})]})]})}),e.jsx(q,{"data-loc":"client/src/pages/Expenses.tsx:733",className:"p-4",children:e.jsxs("div",{"data-loc":"client/src/pages/Expenses.tsx:734",className:"flex items-center gap-3",children:[e.jsx(ye,{"data-loc":"client/src/pages/Expenses.tsx:735",className:"w-8 h-8 text-green-600"}),e.jsxs("div",{"data-loc":"client/src/pages/Expenses.tsx:736",children:[e.jsx("p",{"data-loc":"client/src/pages/Expenses.tsx:737",className:"text-sm text-muted-foreground",children:"Billable"}),e.jsx("p",{"data-loc":"client/src/pages/Expenses.tsx:738",className:"text-2xl",children:e.jsx(B,{"data-loc":"client/src/pages/Expenses.tsx:739",amount:T.billableAmount,bold:!0})}),e.jsxs("p",{"data-loc":"client/src/pages/Expenses.tsx:741",className:"text-xs text-muted-foreground",children:[e.jsx("span",{"data-loc":"client/src/pages/Expenses.tsx:742",className:"font-numeric",children:T.billableCount})," ","expense",T.billableCount!==1?"s":""]})]})]})}),e.jsx(q,{"data-loc":"client/src/pages/Expenses.tsx:749",className:"p-4",children:e.jsxs("div",{"data-loc":"client/src/pages/Expenses.tsx:750",className:"flex items-center gap-3",children:[e.jsx(ce,{"data-loc":"client/src/pages/Expenses.tsx:751",className:"w-8 h-8 text-muted-foreground"}),e.jsxs("div",{"data-loc":"client/src/pages/Expenses.tsx:752",children:[e.jsx("p",{"data-loc":"client/src/pages/Expenses.tsx:753",className:"text-sm text-muted-foreground",children:"Non-Billable"}),e.jsx("p",{"data-loc":"client/src/pages/Expenses.tsx:754",className:"text-2xl",children:e.jsx(B,{"data-loc":"client/src/pages/Expenses.tsx:755",amount:T.totalWithTax-T.billableAmount,bold:!0})}),e.jsxs("p",{"data-loc":"client/src/pages/Expenses.tsx:760",className:"text-xs text-muted-foreground",children:[e.jsx("span",{"data-loc":"client/src/pages/Expenses.tsx:761",className:"font-numeric",children:T.nonBillableCount})," ","expense",T.nonBillableCount!==1?"s":""]})]})]})})]}),e.jsx(Is,{"data-loc":"client/src/pages/Expenses.tsx:769",hasActiveFilters:de,onClearFilters:me,searchValue:Le,onSearchChange:_e,searchPlaceholder:"Search expenses...",activeFilters:Ge,onClearAll:me,paymentMethodFilter:g,setPaymentMethodFilter:$,billableFilter:F,setBillableFilter:J,clientFilter:v,setClientFilter:oe,categoryFilter:M,setCategoryFilter:re,dateRange:A,setDateRange:ie,clients:n,categories:t}),e.jsx(Os,{"data-loc":"client/src/pages/Expenses.tsx:791",isLoading:j,expenses:x,filteredAndSortedExpenses:X,paginatedExpenses:Ke,totalItems:we,totalPages:We,pageSize:se,currentPage:xe,sort:ze,handleSort:Ve,setCurrentPage:Ne,setPageSize:Oe,openExpenseDetails:qe,handleEdit:Qe,deleteExpenseMutation:f,hasActiveFilters:de,setIsExpenseDialogOpen:C,clearAllFilters:me}),e.jsx(Ms,{"data-loc":"client/src/pages/Expenses.tsx:812",open:c,onOpenChange:s,selectedExpense:G})]})}export{ot as default};
