import{j as s}from"./vendor-react-BuVtq312.js";import{b as w,t as C,G as L,g as k,L as p,B as x,C as c,a,z as P,A,E as T,j as u}from"./index-hzFfJlKH.js";import{C as m,N as B}from"./typography-CdqW54LS.js";import{N as D}from"./Navigation-DKoTJDrW.js";import{z,b as g,T as $,ap as E,x as M,B as U,f as G,u as y,aD as O,l as R,O as V}from"./vendor-icons-CPPAmKDz.js";import"./vendor-data-DopHG4T0.js";import"./vendor-radix-DQBG9U-J.js";import"./vendor-date-B2OJh1lx.js";import"./UserAvatar-DzPpP9tb.js";function Z(){const{loading:b,isAuthenticated:l}=w(),{data:o,isLoading:h}=C.crypto.getHistory.useQuery(void 0,{enabled:l});if(b||h)return s.jsx("div",{"data-loc":"client/src/pages/SubscriptionHistory.tsx:41",className:"min-h-screen flex items-center justify-center bg-background",children:s.jsx("div",{"data-loc":"client/src/pages/SubscriptionHistory.tsx:42",className:"opacity-70",children:s.jsx(L,{"data-loc":"client/src/pages/SubscriptionHistory.tsx:43",size:"md"})})});if(!l)return window.location.href=k(),null;const S=t=>{switch(t.toLowerCase()){case"finished":case"confirmed":case"active":return s.jsx(V,{"data-loc":"client/src/pages/SubscriptionHistory.tsx:59",className:"h-5 w-5 text-green-500"});case"waiting":case"confirming":case"sending":return s.jsx(R,{"data-loc":"client/src/pages/SubscriptionHistory.tsx:63",className:"h-5 w-5 text-amber-500"});case"failed":case"expired":case"refunded":return s.jsx(O,{"data-loc":"client/src/pages/SubscriptionHistory.tsx:67",className:"h-5 w-5 text-destructive"});default:return s.jsx(y,{"data-loc":"client/src/pages/SubscriptionHistory.tsx:69",className:"h-5 w-5 text-muted-foreground"})}},j=t=>{const e=t.toLowerCase();let r="neutral";return["finished","confirmed","active"].includes(e)?r="success":["waiting","confirming","sending"].includes(e)?r="warning":["failed","expired","refunded"].includes(e)&&(r="error"),s.jsx(u,{"data-loc":"client/src/pages/SubscriptionHistory.tsx:86",variant:r,children:t.charAt(0).toUpperCase()+t.slice(1)})},H=t=>new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),f=t=>t===1?"1 Month":`${t} Months`,i=o?.items||[],n=o?.totalCryptoPayments||0,d=i.filter(t=>["finished","confirmed","active"].includes(t.status.toLowerCase())),N=d.reduce((t,e)=>t+e.amount,0),v=d.reduce((t,e)=>t+e.months,0);return s.jsxs("div",{"data-loc":"client/src/pages/SubscriptionHistory.tsx:124",className:"min-h-screen bg-background",children:[s.jsx(D,{"data-loc":"client/src/pages/SubscriptionHistory.tsx:125"}),s.jsx("div",{"data-loc":"client/src/pages/SubscriptionHistory.tsx:127",className:"container mx-auto px-4 py-8",children:s.jsxs("div",{"data-loc":"client/src/pages/SubscriptionHistory.tsx:128",className:"max-w-4xl mx-auto",children:[s.jsxs("div",{"data-loc":"client/src/pages/SubscriptionHistory.tsx:130",className:"mb-8",children:[s.jsx(p,{"data-loc":"client/src/pages/SubscriptionHistory.tsx:131",href:"/subscription",children:s.jsxs(x,{"data-loc":"client/src/pages/SubscriptionHistory.tsx:132",variant:"ghost",size:"sm",className:"mb-4",children:[s.jsx(z,{"data-loc":"client/src/pages/SubscriptionHistory.tsx:133",className:"h-4 w-4 mr-2"}),"Back to Subscription"]})}),s.jsx("h1",{"data-loc":"client/src/pages/SubscriptionHistory.tsx:137",className:"text-3xl font-bold text-foreground mb-2",children:"Payment History"}),s.jsx("p",{"data-loc":"client/src/pages/SubscriptionHistory.tsx:140",className:"text-muted-foreground",children:"View all your subscription payments and extensions"})]}),s.jsxs("div",{"data-loc":"client/src/pages/SubscriptionHistory.tsx:146",className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[s.jsx(c,{"data-loc":"client/src/pages/SubscriptionHistory.tsx:147",children:s.jsx(a,{"data-loc":"client/src/pages/SubscriptionHistory.tsx:148",className:"p-4",children:s.jsxs("div",{"data-loc":"client/src/pages/SubscriptionHistory.tsx:149",className:"flex items-center gap-3",children:[s.jsx("div",{"data-loc":"client/src/pages/SubscriptionHistory.tsx:150",className:"p-2 bg-primary/10 rounded-lg",children:s.jsx(g,{"data-loc":"client/src/pages/SubscriptionHistory.tsx:151",className:"h-5 w-5 text-primary"})}),s.jsxs("div",{"data-loc":"client/src/pages/SubscriptionHistory.tsx:153",children:[s.jsx("p",{"data-loc":"client/src/pages/SubscriptionHistory.tsx:154",className:"text-sm text-muted-foreground",children:"Total Payments"}),s.jsx("p",{"data-loc":"client/src/pages/SubscriptionHistory.tsx:157",className:"text-2xl font-bold",children:i.length})]})]})})}),s.jsx(c,{"data-loc":"client/src/pages/SubscriptionHistory.tsx:163",children:s.jsx(a,{"data-loc":"client/src/pages/SubscriptionHistory.tsx:164",className:"p-4",children:s.jsxs("div",{"data-loc":"client/src/pages/SubscriptionHistory.tsx:165",className:"flex items-center gap-3",children:[s.jsx("div",{"data-loc":"client/src/pages/SubscriptionHistory.tsx:166",className:"p-2 bg-green-500/10 rounded-lg",children:s.jsx($,{"data-loc":"client/src/pages/SubscriptionHistory.tsx:167",className:"h-5 w-5 text-green-500"})}),s.jsxs("div",{"data-loc":"client/src/pages/SubscriptionHistory.tsx:169",children:[s.jsx("p",{"data-loc":"client/src/pages/SubscriptionHistory.tsx:170",className:"text-sm text-muted-foreground",children:"Total Spent"}),s.jsx("p",{"data-loc":"client/src/pages/SubscriptionHistory.tsx:171",className:"text-2xl",children:s.jsx(m,{"data-loc":"client/src/pages/SubscriptionHistory.tsx:172",amount:N,bold:!0})})]})]})})}),s.jsx(c,{"data-loc":"client/src/pages/SubscriptionHistory.tsx:179",children:s.jsx(a,{"data-loc":"client/src/pages/SubscriptionHistory.tsx:180",className:"p-4",children:s.jsxs("div",{"data-loc":"client/src/pages/SubscriptionHistory.tsx:181",className:"flex items-center gap-3",children:[s.jsx("div",{"data-loc":"client/src/pages/SubscriptionHistory.tsx:182",className:"p-2 bg-amber-500/10 rounded-lg",children:s.jsx(E,{"data-loc":"client/src/pages/SubscriptionHistory.tsx:183",className:"h-5 w-5 text-amber-500"})}),s.jsxs("div",{"data-loc":"client/src/pages/SubscriptionHistory.tsx:185",children:[s.jsx("p",{"data-loc":"client/src/pages/SubscriptionHistory.tsx:186",className:"text-sm text-muted-foreground",children:"Total Duration"}),s.jsxs("p",{"data-loc":"client/src/pages/SubscriptionHistory.tsx:189",className:"text-2xl font-bold",children:[v," Months"]})]})]})})})]}),s.jsxs(c,{"data-loc":"client/src/pages/SubscriptionHistory.tsx:197",children:[s.jsxs(P,{"data-loc":"client/src/pages/SubscriptionHistory.tsx:198",children:[s.jsxs(A,{"data-loc":"client/src/pages/SubscriptionHistory.tsx:199",className:"flex items-center gap-2",children:[s.jsx(M,{"data-loc":"client/src/pages/SubscriptionHistory.tsx:200",className:"h-5 w-5"}),"Payment Timeline"]}),s.jsxs(T,{"data-loc":"client/src/pages/SubscriptionHistory.tsx:203",children:[n>0?`${n} crypto payment${n>1?"s":""}`:"No payments yet",o?.hasStripeSubscription&&" • Stripe subscription active"]})]}),s.jsx(a,{"data-loc":"client/src/pages/SubscriptionHistory.tsx:211",children:i.length===0?s.jsxs("div",{"data-loc":"client/src/pages/SubscriptionHistory.tsx:213",className:"text-center py-12",children:[s.jsx("div",{"data-loc":"client/src/pages/SubscriptionHistory.tsx:214",className:"mx-auto w-16 h-16 bg-muted rounded-full flex items-center justify-center mb-4",children:s.jsx(g,{"data-loc":"client/src/pages/SubscriptionHistory.tsx:215",className:"h-8 w-8 text-muted-foreground"})}),s.jsx("h3",{"data-loc":"client/src/pages/SubscriptionHistory.tsx:217",className:"text-lg font-medium mb-2",children:"No payment history"}),s.jsx("p",{"data-loc":"client/src/pages/SubscriptionHistory.tsx:220",className:"text-muted-foreground mb-4",children:"You haven't made any subscription payments yet."}),s.jsx(p,{"data-loc":"client/src/pages/SubscriptionHistory.tsx:223",href:"/subscription",children:s.jsx(x,{"data-loc":"client/src/pages/SubscriptionHistory.tsx:224",children:"View Plans"})})]}):s.jsx("div",{"data-loc":"client/src/pages/SubscriptionHistory.tsx:228",className:"space-y-4",children:i.map((t,e)=>s.jsxs("div",{"data-loc":"client/src/pages/SubscriptionHistory.tsx:230",className:`relative flex items-start gap-4 p-4 rounded-lg border bg-card hover:bg-accent/5 transition-colors ${e===0?"border-primary/50":"border-border"}`,children:[e<i.length-1&&s.jsx("div",{"data-loc":"client/src/pages/SubscriptionHistory.tsx:238",className:"absolute left-[2.1rem] top-16 w-0.5 h-[calc(100%-2rem)] bg-border"}),s.jsx("div",{"data-loc":"client/src/pages/SubscriptionHistory.tsx:242",className:"flex-shrink-0 z-10",children:s.jsx("div",{"data-loc":"client/src/pages/SubscriptionHistory.tsx:243",className:`p-2 rounded-full ${t.type==="crypto"?"bg-amber-500/20":"bg-blue-500/20"}`,children:t.type==="crypto"?s.jsx(U,{"data-loc":"client/src/pages/SubscriptionHistory.tsx:251",className:"h-5 w-5 text-amber-500"}):s.jsx(G,{"data-loc":"client/src/pages/SubscriptionHistory.tsx:253",className:"h-5 w-5 text-blue-500"})})}),s.jsx("div",{"data-loc":"client/src/pages/SubscriptionHistory.tsx:259",className:"flex-1 min-w-0",children:s.jsxs("div",{"data-loc":"client/src/pages/SubscriptionHistory.tsx:260",className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{"data-loc":"client/src/pages/SubscriptionHistory.tsx:261",children:[s.jsxs("div",{"data-loc":"client/src/pages/SubscriptionHistory.tsx:262",className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{"data-loc":"client/src/pages/SubscriptionHistory.tsx:263",className:"font-medium",children:t.type==="crypto"?"Crypto Payment":"Stripe Subscription"}),t.isExtension&&s.jsx(u,{"data-loc":"client/src/pages/SubscriptionHistory.tsx:269",variant:"secondary",children:"Extension"}),j(t.status)]}),s.jsxs("p",{"data-loc":"client/src/pages/SubscriptionHistory.tsx:273",className:"text-sm text-muted-foreground",children:[f(t.months)," •"," ",H(t.date)]}),t.type==="crypto"&&"cryptoCurrency"in t&&s.jsxs("p",{"data-loc":"client/src/pages/SubscriptionHistory.tsx:279",className:"text-xs text-muted-foreground mt-1",children:["Paid"," ",s.jsx(B,{"data-loc":"client/src/pages/SubscriptionHistory.tsx:281",value:t.cryptoAmount,decimals:6})," ",t.cryptoCurrency]})]}),s.jsxs("div",{"data-loc":"client/src/pages/SubscriptionHistory.tsx:290",className:"text-right flex-shrink-0",children:[s.jsxs("div",{"data-loc":"client/src/pages/SubscriptionHistory.tsx:291",className:"flex items-center gap-2",children:[S(t.status),s.jsx("span",{"data-loc":"client/src/pages/SubscriptionHistory.tsx:293",className:"text-lg",children:s.jsx(m,{"data-loc":"client/src/pages/SubscriptionHistory.tsx:294",amount:t.amount,bold:!0})})]}),s.jsx("p",{"data-loc":"client/src/pages/SubscriptionHistory.tsx:297",className:"text-xs text-muted-foreground",children:t.currency})]})]})})]},t.id))})})]}),s.jsx(c,{"data-loc":"client/src/pages/SubscriptionHistory.tsx:311",className:"mt-6 bg-muted/50",children:s.jsx(a,{"data-loc":"client/src/pages/SubscriptionHistory.tsx:312",className:"p-4",children:s.jsxs("div",{"data-loc":"client/src/pages/SubscriptionHistory.tsx:313",className:"flex items-start gap-3",children:[s.jsx(y,{"data-loc":"client/src/pages/SubscriptionHistory.tsx:314",className:"h-5 w-5 text-muted-foreground flex-shrink-0 mt-0.5"}),s.jsxs("div",{"data-loc":"client/src/pages/SubscriptionHistory.tsx:315",className:"text-sm text-muted-foreground",children:[s.jsx("p",{"data-loc":"client/src/pages/SubscriptionHistory.tsx:316",className:"font-medium text-foreground mb-1",children:"About Payment History"}),s.jsx("p",{"data-loc":"client/src/pages/SubscriptionHistory.tsx:319",children:"This page shows all your subscription payments including one-time crypto payments and recurring Stripe subscriptions. Crypto payments are processed via NOWPayments and may take a few minutes to confirm on the blockchain."})]})]})})})]})})]})}export{Z as default};
